<testcase>
	<brief>test with just one port on Sifos</brief>
	<priority>High</priority>
	<automated>no</automated>
	<numofsw>1</numofsw>
	<tbtype>linux</tbtype>

	<description>
		check operation on Sifos with single port
	</description>
	<comment></comment>
	
	<property name="pub.tclclient1.ip" value="10.155.31.170" />
	
	<property name="sw1.user" value="admin" />
	<property name="sw1.passwd" value="aerohive" />
	<property name="sw1.sfs_tcl_server" value="10.155.32.80"/>
	<property name="sw1.sfs_tcl_server.port" value="6900"/>
	
	<property name="sw.port.1" value="eth1/2" />
	<property name="sw.port.2" value="eth1/3" />
	<property name="sw.port.3" value="eth1/4" />
	<property name="sw.port.3" value="eth1/4" />
	<property name="sw.port.4" value="eth1/5" />
	<property name="sw.port.5" value="eth1/6" />
	<property name="sw.port.6" value="eth1/7" />
	<property name="sw.port.7" value="eth1/8" />
	<property name="sw.port.8" value="eth1/9" />
	<property name="sw.port.9" value="eth1/10" />
	<property name="sw.port.10" value="eth1/11" />
	<property name="sw.port.11" value="eth1/12" />
	<property name="sw.port.12" value="eth1/13" />
	<property name="sw.port.13" value="eth1/14" />
	<property name="sw.port.14" value="eth1/15" />
	<property name="sw.port.15" value="eth1/16" />
	<property name="sw.port.16" value="eth1/17" />
	<property name="sw.port.17" value="eth1/18" />
	<property name="sw.port.18" value="eth1/19" />
	<property name="sw.port.19" value="eth1/20" />
	<property name="sw.port.20" value="eth1/21" />
	<property name="sw.port.21" value="eth1/22" />
	<property name="sw.port.22" value="eth1/23" />
	<property name="sw.port.23" value="eth1/24" />
	
	<property name="pse.profile.0" value="pse_profile0" />
	<property name="pse.profile.1" value="pse-at" />
	<property name="pse.profile.2" value="pse-af" />
	<property name="power.mode.1" value="AT" />
	<property name="power.mode.2" value="AF" />
	<property name="power.limit.1" value="32.0" />
	<property name="power.limit.2" value="15.4" />
	<property name="payload.0" value="12" /> <!-- class0, 13 -->
	<property name="payload.1" value="3.5" /> <!-- class1, 3.8 -->
	<property name="payload.2" value="6" /> <!-- class2, 6.5 -->
	<property name="payload.3" value="12" /> <!-- class3, 13 -->
	<property name="payload.4" value="25" /> <!-- class4, 25.5 -->
	<property name="payload.delta.1" value="2" />
	<property name="payload.delta.2" value="4" />
	<property name="pse.status.1" value="Searching" />
	<property name="pse.status.2" value="delivering" />
	<property name="pse.status.3" value="fault" />
	<property name="pse.status.4" value="turn off by PM" />
	
	<property name="max.power.source.1" value="80" />
	<property name="max.power.source.2" value="60" />
	<property name="max.power.source.3" value="40" />
	<property name="payload" value="25" /> <!-- class4 -->
	<property name="pse.profile.pri.1" value="pse-1" />
	<property name="pse.priority.1" value="critical" />
	<property name="pse.profile.pri.2" value="pse-2" />
	<property name="pse.priority.2" value="high" />
	<property name="pse.profile.pri.3" value="pse-3" />
	<property name="pse.priority.3" value="low" />
	
	
	
<stage>	

		<step no="1.0.1">
			<desc>
				Show interface mgt0 to get ip address
			</desc>
			<log-file>step1.0.1_mgt0_ip_info.log</log-file>
			<console target="sw1">
				-v 'show interface mgt0'
			</console>
		</step>

		<step no="1.0.2">
			<desc>
				Get mgt0's ip address
			</desc>
			<setvar name="sw1.ip">
				python ${bin.dir}/getbyrexp.py -p "IP addr=(\d+\.\d+\.\d+\.\d+);" -f ${log.dir}/step1.0.1_mgt0_ip_info.log -t str
			</setvar>
		</step>

		<step no="1.1">
			<desc>
				verify sw pse is enabled by default
			</desc>
			<log-file>step1.1_default_pse_state.log</log-file>
			<ssh target="${sw1.ip}" user="${sw1.user}" password="${sw1.passwd}">
				-v 'show pse'
			</ssh>
			<log-match>-i "Max port supported"</log-match>
			<log-match>-i "Power management type"</log-match>
		</step>
	
		<step no="6.0.1">
			<desc>
				config pse profile
			</desc>
			<log-file>step6.0.1_CfgPseProfile.log</log-file>
			<ssh target="${sw1.ip}" user="${sw1.user}" password="${sw1.passwd}" timeout="180">
				-v 'pse profile ${pse.profile.pri.1}'
				-v 'pse profile ${pse.profile.pri.1} power-mode 802.3${power.mode.1}'
				-v 'pse profile ${pse.profile.pri.2}'
				-v 'pse profile ${pse.profile.pri.2} power-mode 802.3${power.mode.2}'
				-v 'pse restart'
			</ssh>
		</step>
		
		<step no="delay" delay="120">
			<desc>
				delay after pse restart
			</desc>
			<script>
				pwd
			</script>
		</step>
		
		<step no="6.0.2">
			<desc>
				check power mode of configured pse profile
			</desc>
			<log-file>step6.0.2_CheckPowerMode.log</log-file>
			<ssh target="${sw1.ip}" user="${sw1.user}" password="${sw1.passwd}">
				-v 'show pse profile'
			</ssh>
			<log-match>-c -i "${pse.profile.pri.1}.*${pse.priority.3}.*802.3.*${power.mode.1}.*${power.limit.1}" -re</log-match>
			<log-match>-c -i "${pse.profile.pri.2}.*${pse.priority.3}.*802.3.*${power.mode.2}.*${power.limit.2}" -re</log-match>
		</step>		
		
		<step no="6.1">
			<desc>
				bind configure pse profile to eth port
			</desc>
			<log-file>step6.1_BindPseProfile.log</log-file>
			<ssh target="${sw1.ip}" user="${sw1.user}" password="${sw1.passwd}">
				-v 'in ${sw.port.1} pse profile ${pse.profile.pri.1}'
				-v 'in ${sw.port.2} pse profile ${pse.profile.pri.1}'
				-v 'in ${sw.port.3} pse profile ${pse.profile.pri.1}'
				-v 'in ${sw.port.4} pse profile ${pse.profile.pri.1}'
				-v 'in ${sw.port.5} pse profile ${pse.profile.pri.1}'
				-v 'in ${sw.port.6} pse profile ${pse.profile.pri.1}'
				-v 'in ${sw.port.7} pse profile ${pse.profile.pri.1}'
				-v 'in ${sw.port.8} pse profile ${pse.profile.pri.1}'
				-v 'in ${sw.port.9} pse profile ${pse.profile.pri.1}'
				-v 'in ${sw.port.10} pse profile ${pse.profile.pri.1}'
				-v 'in ${sw.port.11} pse profile ${pse.profile.pri.1}'
				-v 'in ${sw.port.12} pse profile ${pse.profile.pri.2}'
				-v 'in ${sw.port.13} pse profile ${pse.profile.pri.2}'
				-v 'in ${sw.port.14} pse profile ${pse.profile.pri.2}'
				-v 'in ${sw.port.15} pse profile ${pse.profile.pri.2}'
				-v 'in ${sw.port.16} pse profile ${pse.profile.pri.2}'
				-v 'in ${sw.port.17} pse profile ${pse.profile.pri.2}'
				-v 'in ${sw.port.18} pse profile ${pse.profile.pri.2}'
				-v 'in ${sw.port.19} pse profile ${pse.profile.pri.2}'
				-v 'in ${sw.port.20} pse profile ${pse.profile.pri.2}'
				-v 'in ${sw.port.21} pse profile ${pse.profile.pri.2}'
				-v 'in ${sw.port.22} pse profile ${pse.profile.pri.2}'
				-v 'in ${sw.port.23} pse profile ${pse.profile.pri.2}'
			</ssh>
		</step>
		
		<step no="6.1.2">
			<desc>
				check pse config of eth port
			</desc>
			<log-file>step6.1.2.log</log-file>
			<ssh target="${sw1.ip}" user="${sw1.user}" password="${sw1.passwd}">
				-v 'show pse por'
			</ssh>
			<log-match>-c -i "${sw.port.1}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.3}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.4}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.5}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.6}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.7}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.8}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.9}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.10}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.11}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.12}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.13}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.14}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.15}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.16}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.17}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.18}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.19}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.20}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.21}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.22}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.23}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
		</step>	
</stage>

<stage>
		<if>"${sw1.platform}" == "SR2024P"</if>		
		<step no="6.3.1">
		
			<desc>simulate pd by sifos with class and payload</desc>
			<log-file>step6.3.1_sifos.log</log-file>
			<ssh target="${pub.tclclient1.ip}" prompt="%.*|.*root@.*#" timeout="200" session-new="${job.user}-${job.sid}-1">
				<!--  ahsfs initialize  -->
				-v 'tclsh8.5' 
				-v 'package req ahsfs' 
				-v '' 
				-v 'sfs_connect ${sw1.sfs_tcl_server} ${sw1.sfs_tcl_server.port}' 
				-v '' 
				-v 'cmd "psa_getConfig"' 
				-v 'cmd "psa_emulate_pd 1,2 c 4 p ${payload.4} o 0 alt A pol NEG start"' 
				-v 'cmd "psa_emulate_pd 2,1 c 4 p ${payload.4} o 0 alt A pol NEG start"' 
				-v 'cmd "psa_emulate_pd 2,2 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 3,1 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 3,2 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 4,1 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 4,2 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 5,1 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 5,2 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 6,1 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 6,2 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 7,1 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 7,2 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 8,1 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 8,2 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 9,1 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 9,2 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 10,1 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 10,2 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 11,1 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 11,2 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 12,1 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 12,2 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'after 3000' 
				-v 'cmd "psa_emulate_pd 1,2 stat#101"'
				-v 'cmd "psa_emulate_pd 2,1 stat#102"'
				-v 'cmd "psa_emulate_pd 2,2 stat#103"'
				-v 'cmd "psa_emulate_pd 3,1 stat#104"'
				-v 'cmd "psa_emulate_pd 3,2 stat#105"'
				-v 'cmd "psa_emulate_pd 4,1 stat#106"'
				-v 'cmd "psa_emulate_pd 4,2 stat#107"'
				-v 'cmd "psa_emulate_pd 5,1 stat#108"'
				-v 'cmd "psa_emulate_pd 5,2 stat#109"'
				-v 'cmd "psa_emulate_pd 6,1 stat#110"'
				-v 'cmd "psa_emulate_pd 6,2 stat#111"'
				-v 'cmd "psa_emulate_pd 7,1 stat#112"'
				-v 'cmd "psa_emulate_pd 7,2 stat#113"'
				-v 'cmd "psa_emulate_pd 8,1 stat#114"'
				-v 'cmd "psa_emulate_pd 8,2 stat#115"'
				-v 'cmd "psa_emulate_pd 9,1 stat#116"'
				-v 'cmd "psa_emulate_pd 9,2 stat#117"'
				-v 'cmd "psa_emulate_pd 10,1 stat#118"'
				-v 'cmd "psa_emulate_pd 10,2 stat#119"'
				-v 'cmd "psa_emulate_pd 11,1 stat#120"'
				-v 'cmd "psa_emulate_pd 11,2 stat#121"'
				-v 'cmd "psa_emulate_pd 12,1 stat#122"'
				-v 'cmd "psa_emulate_pd 12,2 stat#123"'
			</ssh>
			<log-match>-i "cmdSeq 101" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 102" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 103" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 104" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 105" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 106" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 107" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 108" -i "Status:;RUNNING" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 109" -i "Status:;RUNNING" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 110" -i "Status:;RUNNING" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 111" -i "Status:;RUNNING" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 112" -i "Status:;RUNNING" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 113" -i "Status:;RUNNING" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 114" -i "Status:;RUNNING" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 115" -i "Status:;RUNNING" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 116" -i "Status:;RUNNING" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 117" -i "Status:;RUNNING" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 118" -i "Status:;RUNNING" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 119" -i "Status:;RUNNING" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 120" -i "Status:;RUNNING" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 121" -i "Status:;RUNNING" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 122" -i "Status:;RUNNING" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 123" -i "Status:;RUNNING" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>			
		</step>
	
		<step no="6.4.1">
			<desc>
				check power deliver on switch
			</desc>
			<log-file>step6.4.1_PowerDeliverOnSwitch.log</log-file>
			<ssh target="${sw1.ip}" user="${sw1.user}" password="${sw1.passwd}">
				-v 'show pse por'
			</ssh>
			<log-match>-c -i "${sw.port.1}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.2}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.3}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.4}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.5}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.6}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.7}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.8}" -i "${pse.status.4}" -i "${pse.priority.3}" -i "0.0*" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.9}" -i "${pse.status.4}" -i "${pse.priority.3}" -i "0.0*" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.10}" -i "${pse.status.4}" -i "${pse.priority.3}" -i "0.0*" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.11}" -i "${pse.status.4}" -i "${pse.priority.3}" -i "0.0*" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.12}" -i "${pse.status.4}" -i "${pse.priority.3}" -i "0.0*" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.13}" -i "${pse.status.4}" -i "${pse.priority.3}" -i "0.0*" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.14}" -i "${pse.status.4}" -i "${pse.priority.3}" -i "0.0*" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.15}" -i "${pse.status.4}" -i "${pse.priority.3}" -i "0.0*" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.16}" -i "${pse.status.4}" -i "${pse.priority.3}" -i "0.0*" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.17}" -i "${pse.status.4}" -i "${pse.priority.3}" -i "0.0*" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.18}" -i "${pse.status.4}" -i "${pse.priority.3}" -i "0.0*" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.19}" -i "${pse.status.4}" -i "${pse.priority.3}" -i "0.0*" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.20}" -i "${pse.status.4}" -i "${pse.priority.3}" -i "0.0*" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.21}" -i "${pse.status.4}" -i "${pse.priority.3}" -i "0.0*" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.22}" -i "${pse.status.4}" -i "${pse.priority.3}" -i "0.0*" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.23}" -i "${pse.status.4}" -i "${pse.priority.3}" -i "0.0*" -i "${pse.profile.pri.2}"</log-match>
		</step>
		
		<step no="6.4.2">
			<desc>
				get power delivering on switch
			</desc>
			<ssh target="${sw1.ip}" user="${sw1.user}" password="${sw1.passwd}">
				-v 'show pse'
			</ssh>
			<log-match>-c -i "Total power available" -i "195"</log-match>
			<log-match>-c -i "Power management type" -i "Dynamic"</log-match>
		</step>		
	
</stage>		
	
<stage>
		<if>"${sw1.platform}" == "SR2124P"</if>	
		
		<step no="7.3.1">
		
			<desc>simulate pd by sifos with class and payload</desc>
			<log-file>step7.3.1_sifos.log</log-file>
			<ssh target="${pub.tclclient1.ip}" prompt="%.*|.*root@.*#" timeout="200" session-new="${job.user}-${job.sid}-1">
				<!--  ahsfs initialize  -->
				-v 'tclsh8.5' 
				-v 'package req ahsfs' 
				-v '' 
				-v 'sfs_connect ${sw1.sfs_tcl_server} ${sw1.sfs_tcl_server.port}' 
				-v '' 
				-v 'cmd "psa_getConfig"' 
				-v 'cmd "psa_emulate_pd 1,2 c 4 p ${payload.4} o 0 alt A pol NEG start"' 
				-v 'cmd "psa_emulate_pd 2,1 c 4 p ${payload.4} o 0 alt A pol NEG start"' 
				-v 'cmd "psa_emulate_pd 2,2 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 3,1 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 3,2 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 4,1 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 4,2 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 5,1 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 5,2 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 6,1 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 6,2 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 7,1 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 7,2 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 8,1 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 8,2 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 9,1 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 9,2 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 10,1 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 10,2 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 11,1 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 11,2 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 12,1 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 12,2 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'after 3000' 
				-v 'cmd "psa_emulate_pd 1,2 stat#201"'
				-v 'cmd "psa_emulate_pd 2,1 stat#202"'
				-v 'cmd "psa_emulate_pd 2,2 stat#203"'
				-v 'cmd "psa_emulate_pd 3,1 stat#204"'
				-v 'cmd "psa_emulate_pd 3,2 stat#205"'
				-v 'cmd "psa_emulate_pd 4,1 stat#206"'
				-v 'cmd "psa_emulate_pd 4,2 stat#207"'
				-v 'cmd "psa_emulate_pd 5,1 stat#208"'
				-v 'cmd "psa_emulate_pd 5,2 stat#209"'
				-v 'cmd "psa_emulate_pd 6,1 stat#210"'
				-v 'cmd "psa_emulate_pd 6,2 stat#211"'
				-v 'cmd "psa_emulate_pd 7,1 stat#212"'
				-v 'cmd "psa_emulate_pd 7,2 stat#213"'
				-v 'cmd "psa_emulate_pd 8,1 stat#214"'
				-v 'cmd "psa_emulate_pd 8,2 stat#215"'
				-v 'cmd "psa_emulate_pd 9,1 stat#216"'
				-v 'cmd "psa_emulate_pd 9,2 stat#217"'
				-v 'cmd "psa_emulate_pd 10,1 stat#218"'
				-v 'cmd "psa_emulate_pd 10,2 stat#219"'
				-v 'cmd "psa_emulate_pd 11,1 stat#220"'
				-v 'cmd "psa_emulate_pd 11,2 stat#221"'
				-v 'cmd "psa_emulate_pd 12,1 stat#222"'
				-v 'cmd "psa_emulate_pd 12,2 stat#223"'
			</ssh>
			<log-match>-i "cmdSeq 201" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 202" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 203" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 204" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 205" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 206" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 207" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 208" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 209" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 210" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 211" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 212" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 213" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 214" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 215" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 216" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 217" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 218" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 219" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 220" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 221" -i "Status:;RUNNING" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 222" -i "Status:;RUNNING" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 223" -i "Status:;RUNNING" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>			
		</step>
	
		<step no="7.4.1">
			<desc>
				check power deliver on switch
			</desc>
			<log-file>step7.4.1_PowerDeliverOnSwitch.log</log-file>
			<ssh target="${sw1.ip}" user="${sw1.user}" password="${sw1.passwd}">
				-v 'show pse por'
			</ssh>
			<log-match>-c -i "${sw.port.1}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.2}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.3}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.4}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.5}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.6}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.7}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.8}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.9}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.10}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.11}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.12}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.13}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.14}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.15}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.16}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.17}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.18}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.19}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.20}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.21}" -i "${pse.status.4}" -i "${pse.priority.3}" -i "0.0*" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.22}" -i "${pse.status.4}" -i "${pse.priority.3}" -i "0.0*" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.23}" -i "${pse.status.4}" -i "${pse.priority.3}" -i "0.0*" -i "${pse.profile.pri.2}"</log-match>
		</step>
		
		<step no="7.4.2">
			<desc>
				get power delivering on switch
			</desc>
			<ssh target="${sw1.ip}" user="${sw1.user}" password="${sw1.passwd}">
				-v 'show pse'
			</ssh>
			<log-match>-c -i "Total power available" -i "408"</log-match>
			<log-match>-c -i "Power management type" -i "Dynamic"</log-match>
		</step>		
</stage>		

<stage>
		<if>"${sw1.platform}" == "SR2148P"</if>	
		
		<step no="8.3.1">
		
			<desc>simulate pd by sifos with class and payload</desc>
			<log-file>step8.3.1_sifos.log</log-file>
			<ssh target="${pub.tclclient1.ip}" prompt="%.*|.*root@.*#" timeout="200" session-new="${job.user}-${job.sid}-1">
				<!--  ahsfs initialize  -->
				-v 'tclsh8.5' 
				-v 'package req ahsfs' 
				-v '' 
				-v 'sfs_connect ${sw1.sfs_tcl_server} ${sw1.sfs_tcl_server.port}' 
				-v '' 
				-v 'cmd "psa_getConfig"' 
				-v 'cmd "psa_emulate_pd 1,2 c 4 p ${payload.4} o 0 alt A pol NEG start"' 
				-v 'cmd "psa_emulate_pd 2,1 c 4 p ${payload.4} o 0 alt A pol NEG start"' 
				-v 'cmd "psa_emulate_pd 2,2 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 3,1 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 3,2 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 4,1 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 4,2 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 5,1 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 5,2 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 6,1 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 6,2 c 4 p ${payload.4} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 7,1 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 7,2 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 8,1 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 8,2 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 9,1 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 9,2 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 10,1 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 10,2 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 11,1 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 11,2 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 12,1 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'cmd "psa_emulate_pd 12,2 c 0 p ${payload.0} o 0 alt A pol NEG start"'
				-v 'after 3000' 
				-v 'cmd "psa_emulate_pd 1,2 stat#301"'
				-v 'cmd "psa_emulate_pd 2,1 stat#302"'
				-v 'cmd "psa_emulate_pd 2,2 stat#303"'
				-v 'cmd "psa_emulate_pd 3,1 stat#304"'
				-v 'cmd "psa_emulate_pd 3,2 stat#305"'
				-v 'cmd "psa_emulate_pd 4,1 stat#306"'
				-v 'cmd "psa_emulate_pd 4,2 stat#307"'
				-v 'cmd "psa_emulate_pd 5,1 stat#308"'
				-v 'cmd "psa_emulate_pd 5,2 stat#309"'
				-v 'cmd "psa_emulate_pd 6,1 stat#310"'
				-v 'cmd "psa_emulate_pd 6,2 stat#311"'
				-v 'cmd "psa_emulate_pd 7,1 stat#312"'
				-v 'cmd "psa_emulate_pd 7,2 stat#313"'
				-v 'cmd "psa_emulate_pd 8,1 stat#314"'
				-v 'cmd "psa_emulate_pd 8,2 stat#315"'
				-v 'cmd "psa_emulate_pd 9,1 stat#316"'
				-v 'cmd "psa_emulate_pd 9,2 stat#317"'
				-v 'cmd "psa_emulate_pd 10,1 stat#318"'
				-v 'cmd "psa_emulate_pd 10,2 stat#319"'
				-v 'cmd "psa_emulate_pd 11,1 stat#320"'
				-v 'cmd "psa_emulate_pd 11,2 stat#321"'
				-v 'cmd "psa_emulate_pd 12,1 stat#322"'
				-v 'cmd "psa_emulate_pd 12,2 stat#323"'
			</ssh>
			<log-match>-i "cmdSeq 301" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 302" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 303" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 304" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 305" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 306" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 307" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 308" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 309" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 310" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 311" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 312" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 313" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 314" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 315" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 316" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 317" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 318" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 319" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 320" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 321" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 322" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>
			<log-match>-i "cmdSeq 323" -i "Status:;RUNNING" -i "State:;POWERED"</log-match>			
		</step>
	
		<step no="8.4.1">
			<desc>
				check power deliver on switch
			</desc>
			<log-file>step8.4.1_PowerDeliverOnSwitch.log</log-file>
			<ssh target="${sw1.ip}" user="${sw1.user}" password="${sw1.passwd}">
				-v 'show pse por'
			</ssh>
			<log-match>-c -i "${sw.port.1}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.2}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.3}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.4}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.5}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.6}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.7}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.8}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.9}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.10}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.11}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.1}"</log-match>
			<log-match>-c -i "${sw.port.12}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.13}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.14}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.15}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.16}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.17}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.18}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.19}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.20}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.21}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.22}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
			<log-match>-c -i "${sw.port.23}" -i "${pse.status.2}" -i "${pse.priority.3}" -i "${pse.profile.pri.2}"</log-match>
		</step>
		
		<step no="8.4.2">
			<desc>
				get power delivering on switch
			</desc>
			<ssh target="${sw1.ip}" user="${sw1.user}" password="${sw1.passwd}">
				-v 'show pse'
			</ssh>
			<log-match>-c -i "Total power available" -i "779"</log-match>
			<log-match>-c -i "Power management type" -i "Dynamic"</log-match>
		</step>		
</stage>
	
<stage>		
		<step no="9.0">
			<desc>stop pd simulation on sifos</desc>
			<log-file>step9.0_sifos.log</log-file>
			<ssh target="${pub.tclclient1.ip}" prompt="%.*|.*root@.*#" timeout="200" session-get="${job.user}-${job.sid}-1">
				<!--  ahsfs initialize  -->
				-v ''
				-v 'cmd "psa_emulate_pd 1,2 stop"'
				-v 'cmd "psa_emulate_pd 2,1 stop"'
				-v 'cmd "psa_emulate_pd 2,2 stop"'
				-v 'cmd "psa_emulate_pd 3,1 stop"'
				-v 'cmd "psa_emulate_pd 3,2 stop"'
				-v 'cmd "psa_emulate_pd 4,1 stop"'
				-v 'cmd "psa_emulate_pd 4,2 stop"'
				-v 'cmd "psa_emulate_pd 5,1 stop"'
				-v 'cmd "psa_emulate_pd 5,2 stop"'
				-v 'cmd "psa_emulate_pd 6,1 stop"'
				-v 'cmd "psa_emulate_pd 6,2 stop"'
				-v 'cmd "psa_emulate_pd 7,1 stop"'
				-v 'cmd "psa_emulate_pd 7,2 stop"'
				-v 'cmd "psa_emulate_pd 8,1 stop"'
				-v 'cmd "psa_emulate_pd 8,2 stop"'
				-v 'cmd "psa_emulate_pd 9,1 stop"'
				-v 'cmd "psa_emulate_pd 9,2 stop"'
				-v 'cmd "psa_emulate_pd 10,1 stop"'
				-v 'cmd "psa_emulate_pd 10,2 stop"'
				-v 'cmd "psa_emulate_pd 11,1 stop"'
				-v 'cmd "psa_emulate_pd 11,2 stop"'
				-v 'cmd "psa_emulate_pd 12,1 stop"'
				-v 'cmd "psa_emulate_pd 12,2 stop"'
				-v 'after 3000'
				-v 'cmd "psa_emulate_pd 1,2 stat#401"'
				-v 'cmd "psa_emulate_pd 2,1 stat#402"'
				-v 'cmd "psa_emulate_pd 2,2 stat#403"'
				-v 'cmd "psa_emulate_pd 3,1 stat#404"'
				-v 'cmd "psa_emulate_pd 3,2 stat#405"'
				-v 'cmd "psa_emulate_pd 4,1 stat#406"'
				-v 'cmd "psa_emulate_pd 4,2 stat#407"'
				-v 'cmd "psa_emulate_pd 5,1 stat#408"'
				-v 'cmd "psa_emulate_pd 5,2 stat#409"'
				-v 'cmd "psa_emulate_pd 6,1 stat#410"'
				-v 'cmd "psa_emulate_pd 6,2 stat#411"'
				-v 'cmd "psa_emulate_pd 7,1 stat#412"'
				-v 'cmd "psa_emulate_pd 7,2 stat#413"'
				-v 'cmd "psa_emulate_pd 8,1 stat#414"'
				-v 'cmd "psa_emulate_pd 8,2 stat#415"'
				-v 'cmd "psa_emulate_pd 9,1 stat#416"'
				-v 'cmd "psa_emulate_pd 9,2 stat#417"'
				-v 'cmd "psa_emulate_pd 10,1 stat#418"'
				-v 'cmd "psa_emulate_pd 10,2 stat#419"'
				-v 'cmd "psa_emulate_pd 11,1 stat#420"'
				-v 'cmd "psa_emulate_pd 11,2 stat#421"'
				-v 'cmd "psa_emulate_pd 12,1 stat#422"'
				-v 'cmd "psa_emulate_pd 12,2 stat#423"'
			</ssh>
			<log-match>-i "cmdSeq 401" -i "Status:;IDLE" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 402" -i "Status:;IDLE" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 403" -i "Status:;IDLE" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 404" -i "Status:;IDLE" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 405" -i "Status:;IDLE" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 406" -i "Status:;IDLE" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 407" -i "Status:;IDLE" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 408" -i "Status:;IDLE" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 409" -i "Status:;IDLE" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 410" -i "Status:;IDLE" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 411" -i "Status:;IDLE" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 412" -i "Status:;IDLE" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 413" -i "Status:;IDLE" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 414" -i "Status:;IDLE" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 415" -i "Status:;IDLE" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 416" -i "Status:;IDLE" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 417" -i "Status:;IDLE" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 418" -i "Status:;IDLE" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 419" -i "Status:;IDLE" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 420" -i "Status:;IDLE" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 421" -i "Status:;IDLE" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 422" -i "Status:;IDLE" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
			<log-match>-i "cmdSeq 423" -i "Status:;IDLE" -i "State:;UNPOWERED" -i "Pload:;0.0;W"</log-match>
		</step>	
	
		<step no="quit_sifos_session">
			<desc>stop pd simulation on sifos</desc>
			<log-file>quit_sifos_session.log</log-file>
			<ssh target="${pub.tclclient1.ip}" prompt="%.*|.*root@.*#" timeout="200" session-get="${job.user}-${job.sid}-1">
				<!--  ahsfs initialize  -->
				-v '' 
				-v 'ctrl-c'
			</ssh>
		</step>	

	</stage>
	
	<failed-process>
		<stage>
			<step no="post_1">
				<desc>stop pd simulation on sifos</desc>
			<log-file>step9.0_sifos.log</log-file>
			<ssh target="${pub.tclclient1.ip}" prompt="%.*|.*root@.*#" timeout="200" session-get="${job.user}-${job.sid}-1">
				<!--  ahsfs initialize  -->
				-v ''
				-v 'cmd "psa_emulate_pd 1,2 stop"'
				-v 'cmd "psa_emulate_pd 2,1 stop"'
				-v 'cmd "psa_emulate_pd 2,2 stop"'
				-v 'cmd "psa_emulate_pd 3,1 stop"'
				-v 'cmd "psa_emulate_pd 3,2 stop"'
				-v 'cmd "psa_emulate_pd 4,1 stop"'
				-v 'cmd "psa_emulate_pd 4,2 stop"'
				-v 'cmd "psa_emulate_pd 5,1 stop"'
				-v 'cmd "psa_emulate_pd 5,2 stop"'
				-v 'cmd "psa_emulate_pd 6,1 stop"'
				-v 'cmd "psa_emulate_pd 6,2 stop"'
				-v 'cmd "psa_emulate_pd 7,1 stop"'
				-v 'cmd "psa_emulate_pd 7,2 stop"'
				-v 'cmd "psa_emulate_pd 8,1 stop"'
				-v 'cmd "psa_emulate_pd 8,2 stop"'
				-v 'cmd "psa_emulate_pd 9,1 stop"'
				-v 'cmd "psa_emulate_pd 9,2 stop"'
				-v 'cmd "psa_emulate_pd 10,1 stop"'
				-v 'cmd "psa_emulate_pd 10,2 stop"'
				-v 'cmd "psa_emulate_pd 11,1 stop"'
				-v 'cmd "psa_emulate_pd 11,2 stop"'
				-v 'cmd "psa_emulate_pd 12,1 stop"'
				-v 'cmd "psa_emulate_pd 12,2 stop"'
				-v 'ctrl-c'
			</ssh>
			</step>
		</stage>
	</failed-process>	
	
</testcase>
