<?xml version="1.0" encoding="UTF-8"?>
<testcase>
	<brief>aerohive switch run stp, cisco run pvst</brief>
	<priority>accept</priority>
	<automated>yes</automated>
	
	<numofsw>1</numofsw>
	<tbtype>winlin</tbtype>
	
	<description>
	system test : switch-solution
	</description>
	
	<pre-process>
		<stage>
			<step no="0">
				<desc>show case name</desc>
				<script>
					echo "${case.name}"
				</script>
			</step>
		</stage>
		<include prefix="p1" file="${case.dir}/subs/system_pubswitch_init.xml" />
		<include prefix="p2" file="${case.dir}/subs/system_image_upgrade.xml" />
		<include prefix="p3" file="${case.dir}/subs/system_pubswitch_init.xml" />	
	</pre-process>
	
	<property name="pri.tclserver.ip" value="10.155.37.33"/>
	<property name="pri.tclclient.ip" value="10.155.37.32"/>
	
	<property name="sw1.port1.phytype" value="copper"/>
	<property name="sw1.port2.phytype" value="copper"/>
	<property name="sw1.port3.phytype" value="copper"/>
	<property name="sw1.port4.phytype" value="copper"/>
	
	<property name="vlan.group1.start" value="2001"/>
	<property name="vlan.group2.start" value="2033"/>
	<property name="vlan.group3.start" value="2065"/>
	<property name="vlan.group4.start" value="2097"/>
	<property name="vlan.last" value="2128"/>
	<property name="vlancount" value="128"/>
	
	<property name="dut1.ixia" value="eth1/23"/>
	<property name="dut2.ixia" value="eth1/23"/>
	<property name="dut3.ixia" value="eth1/23"/>
	<property name="dut4.ixia" value="eth1/47"/>
	
	<property name="dut1.port1" value="eth1/26"/>
	<property name="dut2.port1" value="eth1/28"/>
	<property name="dut3.port1" value="eth1/26"/>
	<property name="dut4.port1" value="eth1/49"/>
	
	<property name="dut1.agg1.port1" value="eth1/12"/>
	<property name="dut1.agg1.port2" value="eth1/14"/>
	
	<property name="dut2.agg1.port1" value="eth1/1"/>
	<property name="dut2.agg1.port2" value="eth1/2"/>
	<property name="dut2.agg1.port3" value="eth1/15"/>
	<property name="dut2.agg1.port4" value="eth1/16"/>
	
	<property name="dut3.agg1.port1" value="eth1/11"/>
	<property name="dut3.agg1.port2" value="eth1/13"/>
	<property name="dut3.agg29.port1" value="eth1/2"/>
	<property name="dut3.agg29.port2" value="eth1/22"/>
	<property name="dut3.agg30.port1" value="eth1/25"/>
	<property name="dut3.agg30.port2" value="eth1/27"/>	
	
	<property name="dut4.agg1.port1" value="eth1/5"/>
	<property name="dut4.agg1.port2" value="eth1/6"/>
	<property name="dut4.agg1.port3" value="eth1/25"/>
	<property name="dut4.agg1.port4" value="eth1/26"/>
	<property name="dut4.agg2.port1" value="eth1/1"/>
	<property name="dut4.agg2.port2" value="eth1/37"/>
	<property name="dut4.agg3.port1" value="eth1/50"/>
	<property name="dut4.agg3.port2" value="eth1/52"/>

	<property name="cisco.po1.port1" value="Gi0/1"/>
	<property name="cisco.po1.port2" value="Gi0/2"/>
	<property name="cisco.po2.port1" value="Gi0/3"/>
	<property name="cisco.po2.port2" value="Gi0/4"/>
	
	<property name="dut1.out" value="eth1/24"/>
	<property name="dut2.out" value="eth1/24"/>
	<property name="dut3.out" value="eth1/24"/>
	<property name="dut4.out" value="eth1/48"/>
	
	<property name="dut1.mac" value="e01c:4147:3c80"/>
	<property name="dut2.mac" value="e01c:4145:6300"/>
	<property name="dut3.mac" value="e01c:4148:8880"/>
	<property name="dut4.mac" value="e01c:4143:c4c0"/>
	<property name="cisco.mac" value="1ce6:c707:9000"/>
	
	<property name="dut3.hostname" value="AH-488880"/>
	<property name="dut4.hostname" value="AH-43c4c0"/>	
	<property name="cisco.hostname" value="AH-079000"/>
	<property name="stp.delay" value="50"/>
	<property name="loop.interval" value="3"/>
	<property name="loop.max.times" value="10"/>
	
	
	<stage>
		<step no="cli-cisco">
			<desc>cli config for cisco</desc>
			<log-file>cli_config_cisco.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}" prompt=".*#">
				-v "config t"
				-v "interface po 1"
				-v "shut"
				-v "no shut"
				-v "exit"
				-v "interface po 2"
				-v "shut"
				-v "no shut"
				-v "exit"
				-v "spanning-tree mode pvst"
				-v "spanning-tree vlan 1 priority 0"
				-v "spanning-tree vlan ${vlan.group1.start}-${vlan.last} priority 0"
				-v "exit"
			</console>
		</step>
	</stage>

	<stage>
		<step no="cli-dut1">
			<desc>cli config for dut1</desc>
			<log-file>cli_config_dut1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "spanning-tree enable"
				-v "spanning-tree mode stp"
				-v "agg 1"
				-v "interface agg1 shut"
				-v "interface ${dut1.agg1.port1} agg 1"
				-v "interface ${dut1.agg1.port2} agg 1"
				-v "interface agg1 switchport mode trunk"
				-v "interface ${dut1.ixia} switchport mode trunk"
				-v "no interface ${dut1.ixia} switchport trunk allow vlan all"
				-v "interface ${dut1.ixia} switchport trunk allow vlan 1"
				-v "interface ${dut1.port1} switchport mode trunk"
				-v "no interface agg1 shutdown"
				-v "no interface ${dut1.ixia} shutdown"
				-v "no interface ${dut1.port1} shutdown"
				-v "lldp enable"
				-v "cdp enable"
			</console>
		</step>
		<step no="cli-dut2">
			<desc>cli config for dut2</desc>
			<log-file>cli_config_dut2.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "spanning-tree enable"
				-v "spanning-tree mode stp"
				-v "agg 1"
				-v "interface agg1 shut"
				-v "interface ${dut2.agg1.port1} agg 1"
				-v "interface ${dut2.agg1.port2} agg 1"
				-v "interface ${dut2.agg1.port3} agg 1"
				-v "interface ${dut2.agg1.port4} agg 1"
				-v "interface agg1 switchport mode trunk"
				-v "interface ${dut2.ixia} switchport mode trunk"
				-v "no interface ${dut2.ixia} switchport trunk allow vlan all"
				-v "interface ${dut2.ixia} switchport trunk allow vlan 1"
				-v "interface ${dut2.port1} switchport mode trunk"
				-v "no interface agg1 shutdown"
				-v "no interface ${dut2.ixia} shutdown"
				-v "no interface ${dut2.port1} shutdown"
				-v "lldp enable"
				-v "cdp enable"
			</console>
		</step>
		<step no="cli-dut3">
			<desc>cli config for dut3</desc>
			<log-file>cli_config_dut3.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "spanning-tree enable"
				-v "spanning-tree mode stp"
				-v "agg 1"
				-v "interface agg1 shut"
				-v "interface ${dut3.agg1.port1} agg 1"
				-v "interface ${dut3.agg1.port2} agg 1"
				-v "agg 29"
				-v "interface agg29 shut"
				-v "interface ${dut3.agg29.port1} agg 29"
				-v "interface ${dut3.agg29.port2} agg 29"
				-v "agg 30"
				-v "interface agg30 shut"
				-v "interface ${dut3.agg30.port1} agg 30"
				-v "interface ${dut3.agg30.port2} agg 30"
				-v "interface agg1 switchport mode trunk"
				-v "interface agg29 switchport mode trunk"
				-v "interface agg30 switchport mode trunk"
				-v "interface ${dut3.ixia} switchport mode trunk"
				-v "no interface ${dut3.ixia} switchport trunk allow vlan all"
				-v "interface ${dut3.ixia} switchport trunk allow vlan 1"
				-v "interface ${dut3.port1} switchport mode trunk"
				-v "lldp enable"
				-v "cdp enable"				
			</console>
		</step>
		<step no="cli-dut4">
			<desc>cli config for dut4</desc>
			<log-file>cli_config_dut4.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "spanning-tree enable"
				-v "spanning-tree mode stp"
				-v "spanning-tree priority 28672"
				-v "agg 1"
				-v "interface agg1 shut"
				-v "interface ${dut4.agg1.port1} agg 1"
				-v "interface ${dut4.agg1.port2} agg 1"
				-v "interface ${dut4.agg1.port3} agg 1"
				-v "interface ${dut4.agg1.port4} agg 1"
				-v "agg 2"
				-v "interface agg2 shut"
				-v "interface ${dut4.agg2.port1} agg 2"
				-v "interface ${dut4.agg2.port2} agg 2"
				-v "agg 3"
				-v "interface agg3 shut"
				-v "interface ${dut4.agg3.port1} agg 3"
				-v "interface ${dut4.agg3.port2} agg 3"
				-v "interface agg1 switchport mode trunk"
				-v "interface agg2 switchport mode trunk"
				-v "interface agg3 switchport mode trunk"
				-v "interface ${dut4.ixia} switchport mode trunk"
				-v "no interface ${dut4.ixia} switchport trunk allow vlan all"
				-v "interface ${dut4.ixia} switchport trunk allow vlan 1"
				-v "interface ${dut4.port1} switchport mode trunk"
				-v "lldp enable"
				-v "cdp enable"
			</console>
		</step>
		<step no="cli-dut1-noshut">
			<desc>cli config for dut1</desc>
			<log-file>cli_config_dut1_noshut.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "no interface agg1 shutdown"
				-v "no interface ${dut1.ixia} shutdown"
				-v "no interface ${dut1.port1} shutdown"
			</console>
		</step>
		<step no="cli-dut2-noshut">
			<desc>cli config for dut2</desc>
			<log-file>cli_config_dut2_noshut.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "no interface agg1 shutdown"
				-v "no interface ${dut2.ixia} shutdown"
				-v "no interface ${dut2.port1} shutdown"
			</console>
		</step>
		<step no="cli-dut3-noshut">
			<desc>cli config for dut3</desc>
			<log-file>cli_config_dut3_noshut.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "no interface agg1 shutdown"
				-v "no interface agg29 shutdown"
				-v "no interface agg30 shutdown"
				-v "no interface ${dut3.ixia} shutdown"
				-v "no interface ${dut3.port1} shutdown"
			</console>
		</step>
		<step no="cli-dut4-noshut">
			<desc>cli config for dut4</desc>
			<log-file>cli_config_dut4_noshut.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "no interface agg1 shutdown"
				-v "no interface agg2 shutdown"
				-v "no interface agg3 shutdown"
				-v "no interface ${dut4.ixia} shutdown"
				-v "no interface ${dut4.port1} shutdown"
			</console>
		</step>
	</stage>

	<property name="sw1.port1.ixia_port.mac" value="0000:0100:0001"/>
	<property name="sw1.port2.ixia_port.mac" value="0000:0200:0001"/>
	<property name="sw1.port3.ixia_port.mac" value="0000:0300:0001"/>
	<property name="sw1.port4.ixia_port.mac" value="0000:0400:0001"/>
	
	<property name="ixia.port1" value="${sw1.port1.ixia_port}"/>
	<property name="ixia.port2" value="${sw1.port2.ixia_port}"/>
	<property name="ixia.port3" value="${sw1.port4.ixia_port}"/>
	<property name="ixia.port4" value="${sw1.port3.ixia_port}"/>
	
	<property name="ixia.port1.mac" value="${sw1.port1.ixia_port.mac}"/>
	<property name="ixia.port2.mac" value="${sw1.port2.ixia_port.mac}"/>
	<property name="ixia.port3.mac" value="${sw1.port4.ixia_port.mac}"/>
	<property name="ixia.port4.mac" value="${sw1.port3.ixia_port.mac}"/>
	<property name="stream1.etype" value="0x0800"/>
	<property name="stream1.UDFoffset" value="54"/>
	<property name="stream1.patternOffset2" value="54"/>
	
	<property name="mac.multicast" value="0100:5e00:0005"/>
	<property name="mac.unknown" value="0000:ff00:0001"/>
	
	<property name="alvlan" value="1"/>
	<property name="vlan.group.count" value="32"/>
	
			<!--send 128 vlan to dut1-4-->
	<stage type="child-process" no="dut1-vlan">
		<step no="vlan-dut1">
			<desc>config 128 vlan on dut1</desc>
			<script> 
			${case.dir}/bin/sendvlan.sh ${dut1.consname} ${vlancount} ${vlan.group1.start} 
			</script>
		</step>
	</stage>
	
	<stage type="child-process" no="dut2-vlan">
		<step no="vlan-dut2">
			<desc>config 128 vlan on dut2</desc>
			<script> 
			${case.dir}/bin/sendvlan.sh ${dut2.consname} ${vlancount} ${vlan.group1.start}
			</script>
		</step>
	</stage>
	
	<stage type="child-process" no="dut3-vlan">
		<step no="vlan-dut3">
			<desc>config 128 vlan to dut3</desc>
			<script> 
			${case.dir}/bin/sendvlan.sh ${dut3.consname} ${vlancount} ${vlan.group1.start}
			</script>
		</step>	
	</stage>
	
	<stage type="child-process" no="dut4-vlan">
		<step no="vlan-dut4">
			<desc>config 128 vlan to dut4</desc>
			<script> 
			${case.dir}/bin/sendvlan.sh ${dut4.consname} ${vlancount} ${vlan.group1.start}
			</script>
		</step>	
	</stage>
	
	<stage type="check-point"/>
	
	<property name="alvlan" value="1"/>
	<property name="vlan.group.count" value="32"/>
	
	<stage>
		<step no="alvlan-dut1">
			<desc>config allow vlan for dut1</desc>
			<script timeout="1000">                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
			${case.dir}/bin/sendvlan.sh ${dut1.consname} ${vlan.group.count} ${vlan.group1.start} ${alvlan} ${vlan.group2.start}
			</script>
		</step>
		<step no="alvlan-dut2">
			<desc>config allow vlan for dut2</desc>
			<script timeout="1000">
			${case.dir}/bin/sendvlan.sh ${dut2.consname} ${vlan.group.count} ${vlan.group2.start} ${alvlan} ${vlan.group3.start}
			</script>
		</step>
		<step no="alvlan-dut3">
			<desc>config allow vlan for dut3</desc>
			<script timeout="1000">
			${case.dir}/bin/sendvlan.sh ${dut3.consname} ${vlan.group.count} ${vlan.group2.start} ${alvlan} ${vlan.group3.start} ${vlan.group4.start}
			</script>
		</step>
		<step no="alvlan-dut4">
			<desc>config allow vlan for dut4</desc>
			<script timeout="1000">
			${case.dir}/bin/sendvlan.sh ${dut4.consname} ${vlan.group.count} ${vlan.group1.start} ${alvlan} ${vlan.group2.start} ${vlan.group3.start} ${vlan.group4.start}
			</script>
		</step>
	</stage>

	<stage>
		<step no="show-run-dut1">
			<desc>show running-config on dut1</desc>
			<log-file>running-config-dut1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show running-config"
			</console>
		</step>
		<step no="show-run-dut2">
			<desc>show running-config on dut2</desc>
			<log-file>running-config-dut2.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "show running-config"
			</console>
		</step>
		<step no="show-run-dut3">
			<desc>show running-config on dut3</desc>
			<log-file>running-config-dut3.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show running-config"
			</console>
		</step>		
		<step no="show-run-dut4">
			<desc>show running-config on dut4</desc>
			<log-file>running-config-dut4.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show running-config"
			</console>
		</step>	
	</stage>
	
	<stage no="check_initial_stp">
		<step no="check-dut1-stp">
			<desc>check dut1 initial stp status</desc>
			<log-file>dut1_show_stp.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut1.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut1.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
		</step>
		<step no="check-dut2-stp">
			<desc>check dut2 initial stp status</desc>
			<log-file>dut2_show_stp.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut2.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut2.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
		</step>
		<step no="check-dut3-stp">
			<desc>check dut3 initial stp status</desc>
			<log-file>dut3_show_stp.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut3.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut3.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg29" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg30" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "1000"</log-match>
		</step>
		<step no="check-dut4-stp">
			<desc>check dut4 initial stp status</desc>
			<log-file>dut4_show_stp.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut4.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut4.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
			<log-match>-p 1 -i "agg2" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg3" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
		<step no="check-cisco-stp-1">
			<desc>check initial stp status on cisco</desc>
			<log-file>cisco_show_stp-1.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 1"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
		<step no="check-cisco-stp-2">
			<desc>check initial stp status on cisco</desc>
			<log-file>cisco_show_stp-2.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 2001"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
	</stage>
	
	<!-- lldp check-->

	<stage no="check_lldp">
		<step no="dut1_check_lldp">
			<desc>check dut1 lldp neighbor</desc>
			<log-file>dut1_check_lldp.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
			-v "show lldp neighbor"
			</console>
			<log-match>-i "LLDP neighbor table: Total number = 3" </log-match>
			<log-match bin="${bin.dir}/mlinesearch.pl">
				-l 'Incoming Port: ${dut1.port1}' \
				-l 'Chassis ID\(mac address\): ${dut4.mac}' \
				-l 'Port ID\(interface name\): ${dut4.port1}' \
				-f ${log.dir}/${log.file} \
			</log-match>
			<log-match bin="${bin.dir}/mlinesearch.pl">
				-l 'Incoming Port: ${dut1.agg1.port1}' \
				-l 'Chassis ID\(mac address\): ${dut3.mac}' \
				-l 'Port ID\(interface name\): ${dut3.agg1.port1}' \
				-f ${log.dir}/${log.file} \
			</log-match>
			<log-match bin="${bin.dir}/mlinesearch.pl">
				-l 'Incoming Port: ${dut1.agg1.port2}' \
				-l 'Chassis ID\(mac address\): ${dut3.mac}' \
				-l 'Port ID\(interface name\): ${dut3.agg1.port2}' \
				-f ${log.dir}/${log.file} \
			</log-match>
		</step>
		<step no="dut2_check_lldp">
			<desc>check dut2 lldp neighbor</desc>
			<log-file>dut2_check_lldp.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
			-v "show lldp neighbor"
			</console>
			<log-match>-i "LLDP neighbor table: Total number = 5" </log-match>
			<log-match bin="${bin.dir}/mlinesearch.pl">
				-l 'Incoming Port: ${dut2.port1}' \
				-l 'Chassis ID\(mac address\): ${dut3.mac}' \
				-l 'Port ID\(interface name\): ${dut3.port1}' \
				-f ${log.dir}/${log.file} \
			</log-match>
			<log-match bin="${bin.dir}/mlinesearch.pl">
				-l 'Incoming Port: ${dut2.agg1.port1}' \
				-l 'Chassis ID\(mac address\): ${dut4.mac}' \
				-l 'Port ID\(interface name\): ${dut4.agg1.port1}' \
				-f ${log.dir}/${log.file} \
			</log-match>
			<log-match bin="${bin.dir}/mlinesearch.pl">
				-l 'Incoming Port: ${dut2.agg1.port2}' \
				-l 'Chassis ID\(mac address\): ${dut4.mac}' \
				-l 'Port ID\(interface name\): ${dut4.agg1.port2}' \
				-f ${log.dir}/${log.file} \
			</log-match>
			<log-match bin="${bin.dir}/mlinesearch.pl">
				-l 'Incoming Port: ${dut2.agg1.port3}' \
				-l 'Chassis ID\(mac address\): ${dut4.mac}' \
				-l 'Port ID\(interface name\): ${dut4.agg1.port3}' \
				-f ${log.dir}/${log.file} \
			</log-match>
			<log-match bin="${bin.dir}/mlinesearch.pl">
				-l 'Incoming Port: ${dut2.agg1.port4}' \
				-l 'Chassis ID\(mac address\): ${dut4.mac}' \
				-l 'Port ID\(interface name\): ${dut4.agg1.port4}' \
				-f ${log.dir}/${log.file} \
			</log-match>
		</step>
		<step no="dut3_check_lldp">
			<desc>check dut3 lldp neighbor</desc>
			<log-file>dut3_check_lldp.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
			-v "show lldp neighbor"
			</console>
			<log-match>-i "LLDP neighbor table: Total number = 7" </log-match>
			<log-match bin="${bin.dir}/mlinesearch.pl">
				-l 'Incoming Port: ${dut3.port1}' \
				-l 'Chassis ID\(mac address\): ${dut2.mac}' \
				-l 'Port ID\(interface name\): ${dut2.port1}' \
				-f ${log.dir}/${log.file} \
			</log-match>
			<log-match bin="${bin.dir}/mlinesearch.pl">
				-l 'Incoming Port: ${dut3.agg1.port1}' \
				-l 'Chassis ID\(mac address\): ${dut1.mac}' \
				-l 'Port ID\(interface name\): ${dut1.agg1.port1}' \
				-f ${log.dir}/${log.file} \
			</log-match>
			<log-match bin="${bin.dir}/mlinesearch.pl">
				-l 'Incoming Port: ${dut3.agg1.port2}' \
				-l 'Chassis ID\(mac address\): ${dut1.mac}' \
				-l 'Port ID\(interface name\): ${dut1.agg1.port2}' \
				-f ${log.dir}/${log.file} \
			</log-match>
			<log-match bin="${bin.dir}/mlinesearch.pl">
				-l 'Incoming Port: ${dut3.agg29.port1}' \
				-l 'Chassis ID\(mac address\): ${cisco.mac}' \
				-l 'Port ID\(interface name\): ${cisco.po2.port1}' \
				-f ${log.dir}/${log.file} \
			</log-match>
			<log-match bin="${bin.dir}/mlinesearch.pl">
				-l 'Incoming Port: ${dut3.agg29.port2}' \
				-l 'Chassis ID\(mac address\): ${cisco.mac}' \
				-l 'Port ID\(interface name\): ${cisco.po2.port2}' \
				-f ${log.dir}/${log.file} \
			</log-match>
			<log-match bin="${bin.dir}/mlinesearch.pl">
				-l 'Incoming Port: ${dut3.agg30.port1}' \
				-l 'Chassis ID\(mac address\): ${dut4.mac}' \
				-l 'Port ID\(interface name\): ${dut4.agg3.port1}' \
				-f ${log.dir}/${log.file} \
			</log-match>
			<log-match bin="${bin.dir}/mlinesearch.pl">
				-l 'Incoming Port: ${dut3.agg30.port2}' \
				-l 'Chassis ID\(mac address\): ${dut4.mac}' \
				-l 'Port ID\(interface name\): ${dut4.agg3.port2}' \
				-f ${log.dir}/${log.file} \
			</log-match>
		</step>
		<step no="dut4_check_lldp">
			<desc>check dut4 lldp neighbor</desc>
			<log-file>dut4_check_lldp.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
			-v "show lldp neighbor"
			</console>
			<log-match>-i "LLDP neighbor table: Total number = 9" </log-match>
			<log-match bin="${bin.dir}/mlinesearch.pl">
				-l 'Incoming Port: ${dut4.port1}' \
				-l 'Chassis ID\(mac address\): ${dut1.mac}' \
				-l 'Port ID\(interface name\): ${dut1.port1}' \
				-f ${log.dir}/${log.file} \
			</log-match>
			<log-match bin="${bin.dir}/mlinesearch.pl">
				-l 'Incoming Port: ${dut4.agg1.port1}' \
				-l 'Chassis ID\(mac address\): ${dut2.mac}' \
				-l 'Port ID\(interface name\): ${dut2.agg1.port1}' \
				-f ${log.dir}/${log.file} \
			</log-match>
			<log-match bin="${bin.dir}/mlinesearch.pl">
				-l 'Incoming Port: ${dut4.agg1.port2}' \
				-l 'Chassis ID\(mac address\): ${dut2.mac}' \
				-l 'Port ID\(interface name\): ${dut2.agg1.port2}' \
				-f ${log.dir}/${log.file} \
			</log-match>
			<log-match bin="${bin.dir}/mlinesearch.pl">
				-l 'Incoming Port: ${dut4.agg1.port3}' \
				-l 'Chassis ID\(mac address\): ${dut2.mac}' \
				-l 'Port ID\(interface name\): ${dut2.agg1.port3}' \
				-f ${log.dir}/${log.file} \
			</log-match>
			<log-match bin="${bin.dir}/mlinesearch.pl">
				-l 'Incoming Port: ${dut4.agg1.port4}' \
				-l 'Chassis ID\(mac address\): ${dut2.mac}' \
				-l 'Port ID\(interface name\): ${dut2.agg1.port4}' \
				-f ${log.dir}/${log.file} \
			</log-match>
			<log-match bin="${bin.dir}/mlinesearch.pl">
				-l 'Incoming Port: ${dut4.agg2.port1}' \
				-l 'Chassis ID\(mac address\): ${cisco.mac}' \
				-l 'Port ID\(interface name\): ${cisco.po1.port1}' \
				-f ${log.dir}/${log.file} \
			</log-match>
			<log-match bin="${bin.dir}/mlinesearch.pl">
				-l 'Incoming Port: ${dut4.agg2.port2}' \
				-l 'Chassis ID\(mac address\): ${cisco.mac}' \
				-l 'Port ID\(interface name\): ${cisco.po1.port2}' \
				-f ${log.dir}/${log.file} \
			</log-match>
			<log-match bin="${bin.dir}/mlinesearch.pl">
				-l 'Incoming Port: ${dut4.agg3.port1}' \
				-l 'Chassis ID\(mac address\): ${dut3.mac}' \
				-l 'Port ID\(interface name\): ${dut3.agg30.port1}' \
				-f ${log.dir}/${log.file} \
			</log-match>
			<log-match bin="${bin.dir}/mlinesearch.pl">
				-l 'Incoming Port: ${dut4.agg3.port2}' \
				-l 'Chassis ID\(mac address\): ${dut3.mac}' \
				-l 'Port ID\(interface name\): ${dut3.agg30.port2}' \
				-f ${log.dir}/${log.file} \
			</log-match>
		</step>	
		<step no="cisco_check_lldp">
			<desc>check cisco lldp neighbor</desc>
			<log-file>cisco_check_lldp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show lldp neighbors "
			</console>
			<log-match>-p 1 -i "${dut4.hostname}" -p 2 -i "Gi0/1" -p 5 -i "${dut4.agg2.port1}"</log-match>
			<log-match>-p 1 -i "${dut4.hostname}" -p 2 -i "Gi0/2" -p 5 -i "${dut4.agg2.port2}"</log-match>
			<log-match>-p 1 -i "${dut3.hostname}" -p 2 -i "Gi0/3" -p 5 -i "${dut3.agg29.port1}"</log-match>
			<log-match>-p 1 -i "${dut3.hostname}" -p 2 -i "Gi0/4" -p 5 -i "${dut3.agg29.port2}"</log-match>
		</step>
	</stage>

	<!--cdp check -->

	<stage>
		<step no="dut1_check_cdp">
			<desc>check dut1 cdp neighbor</desc>
			<log-file>dut1_check_cdp.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show cdp neighbor"
			</console>
			<log-match>-i "CDP neighbor table: Total number = 0"</log-match>
		</step>
		<step no="dut2_check_cdp">
			<desc>check dut2 cdp neighbor</desc>
			<log-file>dut2_check_cdp.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "show cdp neighbor"
			</console>
			<log-match>-i "CDP neighbor table: Total number = 0"</log-match>
		</step>
		<step no="dut3_check_cdp">
			<desc>check dut3 cdp neighbor</desc>
			<log-file>dut3_check_cdp.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show cdp neighbor"
			</console>
			<log-match>-i "Device-ID: AH-079000"</log-match>
			<log-match>-i "Incoming interface: ${dut3.agg29.port2}"</log-match>
			<log-match>-i "Incoming interface: ${dut3.agg29.port1}"</log-match>
		</step>
		<step no="dut4_check_cdp">
			<desc>check dut4 cdp neighbor</desc>
			<log-file>dut4_check_cdp.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show cdp neighbor"
			</console>
			<log-match>-i "Device-ID: AH-079000"</log-match>
			<log-match>-i "Incoming interface: ${dut4.agg2.port2}"</log-match>
			<log-match>-i "Incoming interface: ${dut4.agg2.port1}"</log-match>
		</step>
	</stage>

	<!--3. broadcast verification-->
	<stage no="clear_mac_3.0">
		<step no="3.0.1_dut1">
			<desc>clear mac-address on dut1</desc>
			<log-file>step3.0.1_dut1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}" timeout="200">
				-v "mac-address idle-timeout 0"
			</console>
		</step>
		<step no="3.0.2_dut2">
			<desc>clear mac-address on dut2</desc>
			<log-file>step3.0.2_dut2.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}" timeout="200">
				-v "mac-address idle-timeout 0"
			</console>
		</step>
		<step no="3.0.3_dut3">
			<desc>clear mac-address on dut3</desc>
			<log-file>step3.0.3_dut3.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}" timeout="200">
				-v "mac-address idle-timeout 0"
			</console>
		</step>
		<step no="3.0.4_dut4">
			<desc>clear mac-address on dut4</desc>
			<log-file>step3.0.4_dut4.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}" timeout="200">
				-v "mac-address idle-timeout 0"
			</console>
		</step>
	</stage>
	
	<stage no="broadcast_verification_3.1">
		<step no="3.1.1_send_frames">
			<desc>ixia4 send broadcast traffic</desc>
			<log-file>step3.1.1_log.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200">
			-v "tclsh8.5"
			-v "package req ixia"
			-v "ah_ixia_connect -chassisIP ${pub.chassis1.ip} 
				-userName ${job.user}${job.sid} 
				-tclServerIP ${pri.tclserver.ip} 
				-portList ${sw1.port1.ixia_port},${sw1.port2.ixia_port},${sw1.port3.ixia_port},${sw1.port4.ixia_port}
				-phyList ${sw1.port1.phytype},${sw1.port2.phytype},${sw1.port3.phytype},${sw1.port4.phytype}"
			-v ""

			-v "traffic_configure_eth2 -portListIn ${ixia.port4}
				-mac_dst ffff.ffff.ffff
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src ${ixia.port4.mac}
				-mac_src_count 1024
				-mac_src_step 0.0.0.0.0.1
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port1},${ixia.port2},${ixia.port3}
				-mac_dst ffff.ffff.ffff
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src ${ixia.port1.mac}
				-mac_src_count 1
				-mac_src_step 0.0.0.0.0.1
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 128	
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			-v "stream_transmit_method_set -portList ${ixia.port4} -streamId 1 -transmitMethod stopStream -numBursts 8 -numFrames 128"
			
			-v "after 60000"
			-v "start_transmit -portList ${ixia.port4} -firstTryFlag false"
			-v "after 12000"
			
			-v "get_statistic -txPortList ${ixia.port4} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3}"
			
			-v "check_equal_tx_with_rx -oneTxPort ${ixia.port4} -oneRxPort ${ixia.port1}"
			-v "check_equal_tx_with_rx -oneTxPort ${ixia.port4} -oneRxPort ${ixia.port2}"
			-v "check_equal_tx_with_rx -oneTxPort ${ixia.port4} -oneRxPort ${ixia.port3}"
			-v "ctrl-c"

			</ssh>	
		</step>
		
		<step no="3.1.2_check_frames">
			<desc>check tx and rx result</desc>
			<log-file>step3.1.1_log.log</log-file>
			<log-match>-e "checkEqualTxWithRX ${ixia.port4} ${ixia.port1} framesSent userDefinedStat2 result is equal"</log-match>
			<log-match>-e "checkEqualTxWithRX ${ixia.port4} ${ixia.port2} framesSent userDefinedStat2 result is equal"</log-match>
			<log-match>-e "checkEqualTxWithRX ${ixia.port4} ${ixia.port3} framesSent userDefinedStat2 result is equal"</log-match>
		</step>
	</stage>

	<stage type="child-process" no="3.1.3_show_mac_dut1">
		<step no="3.1.3_show_mac_dut1">
			<desc>show mac address after send broadcast on dut1</desc>
			<log-file>3.1.3_mac_1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}" timeout="120">
				-v "show mac-address all"
			</console>
		</step>
	</stage>
	<stage type="child-process" no="3.1.4_show_mac_dut2">
		<step no="3.1.4_show_mac_dut2">
			<desc>show mac address after send broadcast on dut2</desc>
			<log-file>3.1.4_mac_2.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}" timeout="120">
				-v "show mac-address all"
			</console>
		</step>
	</stage>
	<stage type="child-process" no="3.1.5_show_mac_dut3">
		<step no="3.1.5_show mac dut3">
			<desc>show mac address after send broadcast on dut2</desc>
			<log-file>3.1.5_mac_3.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}" timeout="120">
				-v "show mac-address all"
			</console>
		</step>
	</stage>
	<stage type="child-process" no="3.1.6_show_mac_dut4">
		<step no="3.1.6_show mac_dut4">
			<desc>show mac address after send broadcast on dut3</desc>
			<log-file>3.1.6_mac_4.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}" timeout="120">
				-v "show mac-address all"
			</console>
		</step>
	</stage>
	
	<stage type="check-point"/>

	<stage type="child-process" no="3.1.7_check_mac">
		<step no="3.1.7_check_mac">
			<desc>check mac address learned on dut1</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port4.mac} 1024 1 1 ${log.dir} ${case.name} 3.1.3_mac_1.log 3.1.7
			</script>
			<log-file>checkmac-3.1.7.log</log-file>
		</step>
	</stage>

	<stage type="child-process" no="3.1.8_check_mac">
		<step no="3.1.8_check_mac">
			<desc>check mac address learned on dut2</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port4.mac} 1024 1 1 ${log.dir} ${case.name} 3.1.4_mac_2.log 3.1.8
			</script>
			<log-file>checkmac-3.1.8.log</log-file>
		</step>
	</stage>
	<stage type="child-process" no="3.1.9_check_mac">
		<step no="3.1.9_check_mac">
			<desc>check mac address leared on dut3</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port4.mac} 1024 1 1 ${log.dir} ${case.name} 3.1.5_mac_3.log 3.1.9
			</script>
			<log-file>checkmac-3.1.9.log</log-file>
		</step>
	</stage>
	<stage type="child-process" no="3.1.10_check_mac">
		<step no="3.1.10_check_mac">
			<desc>check mac address learned on dut4</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port4.mac} 1024 1 1 ${log.dir} ${case.name} 3.1.6_mac_4.log 3.1.10
			</script>
			<log-file>checkmac-3.1.10.log</log-file>
		</step>
	</stage>
	
	<stage type="check-point"/>

	<stage no="broadcast_verification_3.2">
		<step no="3.2.1_send_frames">
			<desc>ixia.port3 send broadcast traffic</desc>
			<log-file>step3.2.1_1_log.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-new="${job.user}-${job.sid}-1">
			-v "tclsh8.5"
			-v "package req ixia"
			-v "ah_ixia_connect -chassisIP ${pub.chassis1.ip}
				-userName ${job.user}${job.sid} 
				-tclServerIP ${pri.tclserver.ip} 
				-portList ${sw1.port1.ixia_port},${sw1.port2.ixia_port},${sw1.port3.ixia_port},${sw1.port4.ixia_port}
				-phyList ${sw1.port1.phytype},${sw1.port2.phytype},${sw1.port3.phytype},${sw1.port4.phytype}"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port3}
				-mac_dst ffff.ffff.ffff
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src ${ixia.port3.mac}
				-mac_src_count 1
				-mac_src_step 0.0.0.0.0.1
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""

			-v "traffic_configure_eth2 -portListIn ${ixia.port3}
				-mac_dst ffff.ffff.ffff
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src 0000.0400.0002
				-mac_src_count 1
				-mac_src_step 0.0.0.0.0.1
				-vlan enable
				-vlan_id ${vlan.group1.start}
				-vlan_repeatCount 128
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port3}
				-mac_dst ffff.ffff.ffff
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src ${ixia.port3.mac}
				-mac_src_count 2048
				-mac_src_step 0.0.0.0.0.1
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port3}
				-mac_dst ffff.ffff.ffff
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src ${ixia.port3.mac}
				-mac_src_count 2048
				-mac_src_step 0.0.0.0.0.1
				-vlan enable
				-vlan_id ${vlan.group1.start}
				-vlan_repeatCount 128
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port1},${ixia.port2},${ixia.port4}
				-mac_dst ffff.ffff.ffff
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src ${ixia.port1.mac}
				-mac_src_count 1
				-mac_src_step 0.0.0.0.0.1
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "stream_transmit_method_set -portList ${ixia.port3} -streamId 1 -transmitMethod advance -numBursts 8 -numFrames 256"
			-v "stream_transmit_method_set -portList ${ixia.port3} -streamId 2 -transmitMethod advance -numBursts 8 -numFrames 256"
			-v "stream_transmit_method_set -portList ${ixia.port3} -streamId 3 -transmitMethod advance -numBursts 8 -numFrames 256"
			-v "stream_transmit_method_set -portList ${ixia.port3} -streamId 4 -transmitMethod stopStream -numBursts 8 -numFrames 256"
			
			-v "after 60000"
			-v "start_transmit -portList ${ixia.port3} -firstTryFlag false"
			-v "after 40000"
			
			-v "get_statistic -txPortList ${ixia.port3} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port4}"
			
			</ssh>	
		</step>
		
		<step no="3.2.2_1_check_frames">
			<desc>check tx and rx result on rxport1</desc>
			<log-file>step3.2.2_1_log.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-1">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port3} -oneRxPort ${ixia.port1}"
			</ssh>
			<log-match>-e "cmp2 is 5120"</log-match>	
		</step>
		
		<step no="3.2.2_2_check_frames">
			<desc>check tx and rx result on report2</desc>
			<log-file>step3.2.2_2_log.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-1">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port3} -oneRxPort ${ixia.port2}"
			</ssh>
			<log-match>-e "cmp2 is 6144"</log-match>
		</step>
		
		<step no="3.2.2_3_check_frames">
			<desc>check tx and rx result on report3</desc>
			<log-file>step3.2.2_3_log.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-close="${job.user}-${job.sid}-1">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port3} -oneRxPort ${ixia.port4}"
			</ssh>
			<log-match>-e "cmp2 is 7168"</log-match>
		</step>
		
	</stage>	
	
	<stage type="child-process" no="show_mac_3.2.3_dut1">
		<step no="3.2.3_mac">
			<desc>show mac-address on dut1</desc>
			<log-file>step3.2.3_dut1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}" timeout="800">
				-v "show mac-address all"
			</console>
		</step>
	</stage>
	<stage type="child-process" no="show_mac_3.2.4_dut2">
		<step no="3.2.4_mac">
			<desc>show mac-address on dut2</desc>
			<log-file>step3.2.4_dut2.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}" timeout="800">
				-v "show mac-address all"
			</console>
		</step>
	</stage>
	<stage type="child-process" no="show_mac_3.2.5_dut3">
		<step no="3.2.5_mac">
			<desc>show mac-address on dut3</desc>
			<log-file>step3.2.5_dut3.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}" timeout="800">
				-v "show mac-address all"
			</console>
		</step>
	</stage>
	<stage type="child-process" no="show_mac_3.2.6_dut4">
		<step no="3.2.6_mac">
			<desc>show mac-address on dut4</desc>
			<log-file>step3.2.6_dut4.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}" timeout="800">
				-v "show mac-address all"
			</console>
		</step>
	</stage>
	
	<stage type="check-point"/>
	
	<stage type="child-process" no="check_mac_3.2.3">
		<step no="3.2.3_script1">
			<desc>check mac address on dut1</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port3.mac} 1 1 1 ${log.dir} ${case.name} step3.2.3_dut1.log 3.2.3_1
			</script>
			<log-file>checkmac-3.2.3_1.log</log-file>
		</step>
	</stage>
	<stage type="child-process" no="check_mac_3.2.3">
		<step no="3.2.3_script2">
			<desc>check mac address on dut2</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh 0000:0400:0002 1 2033 96 ${log.dir} ${case.name} step3.2.3_dut1.log 3.2.3_2
			</script>
			<log-file>checkmac-3.2.3_2.log</log-file>
		</step>
	</stage>	
	<stage type="child-process" no="check_mac_3.2.3">	
		<step no="3.2.3_script3">
			<desc>check mac address on dut3</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port3.mac} 2048 1 1 ${log.dir} ${case.name} step3.2.3_dut1.log 3.2.3_3
			</script>
			<log-file>checkmac-3.2.3_3.log</log-file>
		</step>
	</stage>
	<stage type="child-process" no="check_mac_3.2.3">
		<step no="3.2.3_script4">
			<desc>check mac address on dut4</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh 0000:0400:0021 96 2033 96 ${log.dir} ${case.name} step3.2.3_dut1.log 3.2.3_4
			</script>
			<log-file>checkmac-3.2.3_4.log</log-file>
		</step>
	</stage>
	
	<stage type="check-point"/>
	
	<stage no="clear_mac_3.2.4">
		<step no="3.2.4_dut1">
			<desc>clear mac-address on dut1</desc>
			<log-file>step3.2.4_dut1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}" timeout="200">
				-v "clear mac-address all"
			</console>
		</step>
		<step no="3.2.4_dut2">
			<desc>clear mac-address on dut2</desc>
			<log-file>step3.2.4_dut2.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}" timeout="200">
				-v "clear mac-address all"
			</console>
		</step>
		<step no="3.2.4_dut3">
			<desc>clear mac-address on dut3</desc>
			<log-file>step3.2.4_dut3.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}" timeout="200">
				-v "clear mac-address all"
			</console>
		</step>
		<step no="3.2.4_dut4">
			<desc>clear mac-address on dut4</desc>
			<log-file>step3.2.4_dut4.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}" timeout="200">
				-v "clear mac-address all"
			</console>
		</step>
	</stage>

	<stage no="broadcast_verification_3.3">
		<step no="3.3.1_send_frames">
			<desc>ixia.port1 and port2 send broadcast traffic</desc>
			<log-file>step3.3.1_log.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-new="${job.user}-${job.sid}-2">
			-v "tclsh8.5"
			-v "package req ixia"
			-v "ah_ixia_connect -chassisIP ${pub.chassis1.ip} 
				-userName ${job.user}${job.sid} 
				-tclServerIP ${pri.tclserver.ip} 
				-portList ${sw1.port1.ixia_port},${sw1.port2.ixia_port},${sw1.port3.ixia_port},${sw1.port4.ixia_port}
				-phyList ${sw1.port1.phytype},${sw1.port2.phytype},${sw1.port3.phytype},${sw1.port4.phytype}"
			-v ""

			-v "traffic_configure_eth2 -portListIn ${ixia.port1}
				-mac_dst ffff.ffff.ffff
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src ${ixia.port4.mac}
				-mac_src_count 1024
				-mac_src_step 0.0.0.0.0.1
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""

			-v "traffic_configure_eth2 -portListIn ${ixia.port1}
				-mac_dst ffff.ffff.ffff
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src 0000.0400.0002
				-mac_src_count 1024
				-mac_src_step 0.0.0.0.0.1
				-vlan enable
				-vlan_id ${vlan.group1.start}
				-vlan_repeatCount 64
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port2}
				-mac_dst ffff.ffff.ffff
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src ${ixia.port4.mac}
				-mac_src_count 1024
				-mac_src_step 0.0.0.0.0.1
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port2}
				-mac_dst ffff.ffff.ffff
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src ${ixia.port4.mac}
				-mac_src_count 1024
				-mac_src_step 0.0.0.0.0.1
				-vlan enable
				-vlan_id ${vlan.group2.start}
				-vlan_repeatCount 64
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port3},${ixia.port4}
				-mac_dst ffff.ffff.ffff
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src ${ixia.port1.mac}
				-mac_src_count 1
				-mac_src_step 0.0.0.0.0.1
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 1 -transmitMethod advance -numBursts 8 -numFrames 128"
			-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 2 -transmitMethod stopStream -numBursts 8 -numFrames 128"
			-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 1 -transmitMethod advance -numBursts 8 -numFrames 128"
			-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 2 -transmitMethod stopStream -numBursts 8 -numFrames 128"
	        -v ""
			
			-v "after 60000"
			
			-v "start_transmit -portList ${ixia.port1},${ixia.port2} -firstTryFlag false"
			-v "after 20000"
			
			-v "get_statistic -txPortList ${ixia.port1},${ixia.port2} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4}"
			
			-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent -rxPortList ${ixia.port1} -rxStParaList userDefinedStat2"
			-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent -rxPortList ${ixia.port2} -rxStParaList userDefinedStat2"
			-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent -rxPortList ${ixia.port3} -rxStParaList userDefinedStat2"
			-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent -rxPortList ${ixia.port4} -rxStParaList userDefinedStat2"
			</ssh>	
		</step>
		
		<step no="3.3.2_1_check_frames">
			<desc>check tx and rx result on port1</desc>
			<log-file>check3.3.2_1.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-2">
			-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent 
				-rxPortList ${ixia.port1} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port1} is 1536"</log-match>
		</step>
		
		<step no="3.3.2_2_check_frames">
			<desc>check tx and rx result on port2</desc>
			<log-file>check3.3.2_2.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-2">
			-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent 
				-rxPortList ${ixia.port2} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port2} is 1536"</log-match>
		</step>
		
		<step no="3.3.2_3_check_frames">
			<desc>check tx and rx result on port3</desc>
			<log-file>check3.3.2_3.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-2">
			-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent 
				-rxPortList ${ixia.port3} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port3} is 3584"</log-match>
		</step>
		
		<step no="3.3.2_4_check_frames">
			<desc>check tx and rx result on port4</desc>
			<log-file>check3.3.2_4.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-close="${job.user}-${job.sid}-2">
			-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent 
				-rxPortList ${ixia.port4} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port4} is 4096"</log-match>
		</step>
		
		<step no="3.3.3_show_mac">
			<desc>show mac-address on dut1</desc>
			<log-file>step3.3.3_dut1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}" timeout="600">
				-v "show mac-address all"
			</console>
		</step>
		<step no="3.3.4_show_mac">
			<desc>show mac-address on dut2</desc>
			<log-file>step3.3.4_dut2.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}" timeout="600">
				-v "show mac-address all"
			</console>
		</step>
		<step no="3.3.5_show_mac">
			<desc>show mac-address on dut3</desc>
			<log-file>step3.3.5_dut3.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}" timeout="600">
				-v "show mac-address all"
			</console>
		</step>
		<step no="3.3.6_show_mac">
			<desc>show mac-address on dut4</desc>
			<log-file>step3.3.6_dut4.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}" timeout="600">
				-v "show mac-address all"
			</console>
		</step>
	</stage>
	
	<stage no="3.4_clearmac">
		<step no="3.4.1_dut1_clearmac">
			<desc>clear mac-address all and check mac-address table on dut1</desc>
			<log-file>clearmac_3.4.1_log.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}" timeout="200">
				-v "clear mac-address all"
				-v "show mac-address all"
			</console>
			<log-match>-n -i "0000:0100:" </log-match>
			<log-match>-n -i "0000:0200:" </log-match>
		</step>
		<step no="3.4.2_dut2_clearmac">
			<desc>clear mac-address all and check mac-address table on dut2</desc>
			<log-file>clearmac_3.4.2_log.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}" timeout="200">
				-v "clear mac-address all"
				-v "show mac-address all"
			</console>
			<log-match>-n -i "0000:0100:"</log-match>
			<log-match>-n -i "0000:0200:"</log-match>
		</step>
		<step no="3.4.3_dut3_clearmac">
			<desc>clear mac-address all and check mac-address table on dut3</desc>
			<log-file>clearmac_3.4.3_log.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}" timeout="200">
				-v "clear mac-address all"
				-v "show mac-address all"
			</console>
			<log-match>-n -i "0000:0100:"</log-match>
			<log-match>-n -i "0000:0200:"</log-match>
		</step>	
		<step no="3.4.4_dut4_clearmac">
			<desc>clear mac-address all and check mac-address table on dut4</desc>
			<log-file>clearmac_3.4.4_log.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}" timeout="200">
				-v "clear mac-address all"
				-v "show mac-address all"
			</console>
			<log-match>-n -i "0000:0100:"</log-match>
			<log-match>-n -i "0000:0200:"</log-match>			
		</step>		
	</stage>

	<!--multicast verification-->

	<stage no="multicast_verification_4.1">
		<step no="4.1.1_send_frames">
			<desc>ixia.port3 send multicast traffic</desc>
			<log-file>step4.1.1_log.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200">
			-v "tclsh8.5"
			-v "package req ixia"
			-v "ah_ixia_connect -chassisIP ${pub.chassis1.ip} 
				-userName ${job.user}${job.sid} 
				-tclServerIP ${pri.tclserver.ip} 
				-portList ${sw1.port1.ixia_port},${sw1.port2.ixia_port},${sw1.port3.ixia_port},${sw1.port4.ixia_port}
				-phyList ${sw1.port1.phytype},${sw1.port2.phytype},${sw1.port3.phytype},${sw1.port4.phytype}"
			-v ""

			-v "traffic_configure_eth2 -portListIn ${ixia.port3}
				-mac_dst ${mac.multicast}
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src ${ixia.port3.mac}
				-mac_src_count 1024
				-mac_src_step 0.0.0.0.0.1
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port1},${ixia.port2},${ixia.port4}
				-mac_dst ${mac.multicast}
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src ${ixia.port1.mac}
				-mac_src_count 1
				-mac_src_step 0.0.0.0.0.1
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256	
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			-v "stream_transmit_method_set -portList ${ixia.port3} -streamId 1 -transmitMethod stopStream -numBursts 8 -numFrames 128"
			
			-v "after 60000"
			-v "start_transmit -portList ${ixia.port3} -firstTryFlag false"
			-v "after 10000"
			
			-v "get_statistic -txPortList ${ixia.port3} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4}"
			
			-v "check_equal_tx_with_rx -oneTxPort ${ixia.port3} -oneRxPort ${ixia.port1}"
			-v "check_equal_tx_with_rx -oneTxPort ${ixia.port3} -oneRxPort ${ixia.port2}"
			-v "check_equal_tx_with_rx -oneTxPort ${ixia.port3} -oneRxPort ${ixia.port4}"
			-v "ctrl-c"
			</ssh>	
		</step>
		
		<step no="4.1.2_check_frames">
			<desc>check tx and rx result</desc>
			<log-file>step4.1.1_log.log</log-file>
			<log-match>-e "checkEqualTxWithRX ${ixia.port3} ${ixia.port1} framesSent userDefinedStat2 result is equal"</log-match>
			<log-match>-e "checkEqualTxWithRX ${ixia.port3} ${ixia.port2} framesSent userDefinedStat2 result is equal"</log-match>
			<log-match>-e "checkEqualTxWithRX ${ixia.port3} ${ixia.port4} framesSent userDefinedStat2 result is equal"</log-match>
		</step>
	</stage>
	
	<stage type="child-process" no="4.1.3_show_mac_dut1">
		<step no="4.1.3_show_mac_dut1">
		<desc>show and clear mac address on dut1</desc>
		<log-file>4.1.3_mac_1.log</log-file>
		<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}" timeout="120">
			-v "show mac-address all"
			-v "clear mac-address all"
		</console>
		</step>
	</stage>
	<stage type="child-process" no="4.1.4_show_mac_dut2">
		<step no="4.1.4_show_mac_dut2">
		<desc>show and clear mac address on dut2</desc>
		<log-file>4.1.4_mac_2.log</log-file>
		<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}" timeout="120">
			-v "show mac-address all"
			-v "clear mac-address all"
		</console>
		</step>
	</stage>
	<stage type="child-process" no="4.1.5_show mac dut3">
		<step no="4.1.5_show mac dut3">
		<desc>show and clear mac address on dut3</desc>
		<log-file>4.1.5_mac_3.log</log-file>
		<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}" timeout="120">
			-v "show mac-address all"
			-v "clear mac-address all"
		</console>
		</step>
	</stage>
	<stage type="child-process" no="4.1.6_show mac_dut4">
		<step no="4.1.6_show mac dut4">
		<desc>show and clear mac address on dut4</desc>
		<log-file>4.1.6_mac_4.log</log-file>
		<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}" timeout="120">
			-v "show mac-address all"
			-v "clear mac-address all"
		</console>
		</step>
	</stage>
	
	<stage type="check-point"/>
	
	<stage no="4.1.7_check_mac">
		<step no="4.1.7_check_mac">
			<desc>check mac address on dut1</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port3.mac} 1024 1 1 ${log.dir} ${case.name} 4.1.3_mac_1.log 4.1.7
			</script>
			<log-file>checkmac-4.1.7.log</log-file>
		</step>
	</stage>
	<stage type="child-process" no="4.1.8_check_mac">
		<step no="4.1.8_check_mac">
			<desc>check mac address on dut2</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port3.mac} 1024 1 1 ${log.dir} ${case.name} 4.1.4_mac_2.log 4.1.8
			</script>
			<log-file>checkmac-4.1.8.log</log-file>
		</step>
	</stage>
	<stage type="child-process" no="4.1.9_check_mac">
		<step no="4.1.9_check_mac">
			<desc>check mac address on dut3</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port3.mac} 1024 1 1 ${log.dir} ${case.name} 4.1.5_mac_3.log 4.1.9
			</script>
			<log-file>checkmac-4.1.9.log</log-file>
		</step>
	</stage>
	<stage type="child-process" no="4.1.10_check_mac">
		<step no="4.1.10_check_mac">
			<desc>check mac address on dut4</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port3.mac} 1024 1 1 ${log.dir} ${case.name} 4.1.6_mac_4.log 4.1.10
			</script>
			<log-file>checkmac-4.1.10.log</log-file>
		</step>
	</stage>
	
	<stage type="check-point"/>

	<stage no="multicast_verification_4.2">
		<step no="4.2.1_send_frames">
			<desc>ixia.port4 send multicast traffic</desc>
			<log-file>step4.2.1_1_log.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-new="${job.user}-${job.sid}-1">
			-v "tclsh8.5"
			-v "package req ixia"
			-v "ah_ixia_connect -chassisIP ${pub.chassis1.ip} 
				-userName ${job.user}${job.sid} 
				-tclServerIP ${pri.tclserver.ip} 
				-portList ${sw1.port1.ixia_port},${sw1.port2.ixia_port},${sw1.port3.ixia_port},${sw1.port4.ixia_port}
				-phyList ${sw1.port1.phytype},${sw1.port2.phytype},${sw1.port3.phytype},${sw1.port4.phytype}"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port4}
				-mac_dst ${mac.multicast}
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src ${ixia.port4.mac}
				-mac_src_count 1
				-mac_src_step 0.0.0.0.0.1
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""

			-v "traffic_configure_eth2 -portListIn ${ixia.port4}
				-mac_dst ${mac.multicast}
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src 0000.0300.0002
				-mac_src_count 1
				-mac_src_step 0.0.0.0.0.1
				-vlan enable
				-vlan_id ${vlan.group1.start}
				-vlan_repeatCount 128
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port4}
				-mac_dst ${mac.multicast}
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src ${ixia.port4.mac}
				-mac_src_count 2048
				-mac_src_step 0.0.0.0.0.1
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port4}
				-mac_dst ${mac.multicast}
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src ${ixia.port4.mac}
				-mac_src_count 2048
				-mac_src_step 0.0.0.0.0.1
				-vlan enable
				-vlan_id ${vlan.group1.start}
				-vlan_repeatCount 128
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port1},${ixia.port2},${ixia.port3}
				-mac_dst ${mac.multicast}
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src ${ixia.port1.mac}
				-mac_src_count 1
				-mac_src_step 0.0.0.0.0.1
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "stream_transmit_method_set -portList ${ixia.port4} -streamId 1 -transmitMethod advance -numBursts 8 -numFrames 256"
			-v "stream_transmit_method_set -portList ${ixia.port4} -streamId 2 -transmitMethod advance -numBursts 8 -numFrames 256"
			-v "stream_transmit_method_set -portList ${ixia.port4} -streamId 3 -transmitMethod advance -numBursts 8 -numFrames 256"
			-v "stream_transmit_method_set -portList ${ixia.port4} -streamId 4 -transmitMethod stopStream -numBursts 8 -numFrames 256"
			
			-v "after 60000"
			-v "start_transmit -portList ${ixia.port4} -firstTryFlag false"
			-v "after 40000"
			
			-v "get_statistic -txPortList ${ixia.port4} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3}"
			
			</ssh>	
		</step>
		
		<step no="4.2.2_1_check_frames">
			<desc>check tx and rx result on rxport1</desc>
			<log-file>step4.2.2_1_log.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-1">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port4} -oneRxPort ${ixia.port1}"
			</ssh>			
			<log-match>-e "cmp2 is 6144"</log-match>	
		</step>
		<step no="4.2.2_2_check_frames">
			<desc>check tx and rx result on rxport2</desc>
			<log-file>step4.2.2_2_log.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-1">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port4} -oneRxPort ${ixia.port2}"
			</ssh>
			<log-match>-e "cmp2 is 6144"</log-match>
		</step>
		<step no="4.2.2_3_check_frames">
			<desc>check tx and rx result on rxport3</desc>
			<log-file>step4.2.2_3_log.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-close="${job.user}-${job.sid}-1">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port4} -oneRxPort ${ixia.port3}"
			</ssh>
			<log-match>-e "cmp2 is 7168"</log-match>
		</step>
	</stage>
	
	<stage type="child-process" no="check_mac_4.2.3_dut1">
		<step no="4.2.3_show_mac">
			<desc>show mac-address on dut1</desc>
			<log-file>step4.2.3_dut1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}" timeout="600">
				-v "show mac-address all"
			</console>
		</step>
		<step no="4.2.3_checkmac_1">
			<desc>check mac-address on dut1</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port4.mac} 1 1 1 ${log.dir} ${case.name} step4.2.3_dut1.log 4.2.3_1
			</script>
			<log-file>checkmac-4.2.3_1.log</log-file>
		</step>
		<step no="4.2.3_checkmac_2">
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh 0000:0300:0002 1 2001 128 ${log.dir} ${case.name} step4.2.3_dut1.log 4.2.3_2
			</script>
			<log-file>checkmac-4.2.3_2.log</log-file>
		</step>
		<step no="4.2.3_checkmac_3">
			<script timeout="1500">
				${case.dir}/bin/maccheck.sh ${ixia.port4.mac} 2048 1 1 ${log.dir} ${case.name} step4.2.3_dut1.log 4.2.3_3
			</script>
			<log-file>checkmac-4.2.3_3.log</log-file>
		</step>
		<step no="4.2.3_checkmac_4">
			<script timeout="1500">
				${case.dir}/bin/maccheck.sh ${ixia.port4.mac} 2048 2001 128 ${log.dir} ${case.name} step4.2.3_dut1.log 4.2.3_4
			</script>
			<log-file>checkmac-4.2.3_4.log</log-file>
		</step>
	</stage>
	<stage type="child-process" no="check_mac_4.2.4_dut2">
		<step no="4.2.4_show_mac">
			<desc>show mac-address on dut2</desc>
			<log-file>step4.2.4_dut2.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}" timeout="600">
				-v "show mac-address all"
			</console>
		</step>
		<step no="4.2.4_checkmac_1">
			<desc>check mac-address on dut2</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port4.mac} 1 1 1 ${log.dir} ${case.name} step4.2.4_dut2.log 4.2.4_1
			</script>
			<log-file>checkmac-4.2.4_1.log</log-file>
		</step>
		<step no="4.2.4_checkmac_2">
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh 0000:0300:0002 1 2001 128 ${log.dir} ${case.name} step4.2.4_dut2.log 4.2.4_2
			</script>
			<log-file>checkmac-4.2.4_2.log</log-file>
		</step>
		<step no="4.2.4_checkmac_3">
			<script timeout="1500">
				${case.dir}/bin/maccheck.sh ${ixia.port4.mac} 2048 1 1 ${log.dir} ${case.name} step4.2.4_dut2.log 4.2.4_3
			</script>
			<log-file>checkmac-4.2.4_3.log</log-file>
		</step>
		<step no="4.2.4_checkmac_4">
			<script timeout="1500">
				${case.dir}/bin/maccheck.sh ${ixia.port4.mac} 2048 2001 128 ${log.dir} ${case.name} step4.2.4_dut2.log 4.2.4_4
			</script>
			<log-file>checkmac-4.2.4_4.log</log-file>
		</step>
	</stage>
	
	<stage type="child-process" no="check_mac_4.2.5_dut3">
		<step no="4.2.5_show_mac">
			<desc>show mac-address on dut3</desc>
			<log-file>step4.2.5_dut3.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}" timeout="600">
				-v "show mac-address all"
			</console>
		</step>
		<step no="4.2.5_checkmac_1">
			<desc>check mac-address on dut3</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port4.mac} 1 1 1 ${log.dir} ${case.name} step4.2.5_dut3.log 4.2.5_1
			</script>
			<log-file>checkmac-4.2.5_1.log</log-file>
		</step>
		<step no="4.2.5_checkmac_2">
			<script tiemout="1000">
				${case.dir}/bin/maccheck.sh 0000:0300:0002 1 2001 128 ${log.dir} ${case.name} step4.2.5_dut3.log 4.2.5_2
			</script>
			<log-file>checkmac-4.2.5_2.log</log-file>
		</step>
		<step no="4.2.5_checkmac_3">
			<script timeout="1500">
				${case.dir}/bin/maccheck.sh ${ixia.port4.mac} 2048 1 1 ${log.dir} ${case.name} step4.2.5_dut3.log 4.2.5_3
			</script>
			<log-file>checkmac-4.2.5_3.log</log-file>
		</step>
		<step no="4.2.5_checkmac_4">
			<script timeout="1500">
				${case.dir}/bin/maccheck.sh ${ixia.port4.mac} 2048 2001 128 ${log.dir} ${case.name} step4.2.5_dut3.log 4.2.5_4
			</script>
			<log-file>checkmac-4.2.5_4.log</log-file>
		</step>
	</stage>
	
	<stage type="child-process" no="check_mac_4.2.6_dut4">
		<step no="4.2.6_show_mac">
			<desc>show mac-address on dut4</desc>
			<log-file>step4.2.6_dut4.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}" timeout="600">
				-v "show mac-address all"
			</console>
		</step>
		<step no="4.2.6_checkmac_1">
			<desc>check mac-address on dut4</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port4.mac} 1 1 1 ${log.dir} ${case.name} step4.2.6_dut4.log 4.2.6_1
			</script>
			<log-file>checkmac-4.2.6_1.log</log-file>
		</step>
		<step no="4.2.6_checkmac_1">
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh 0000:0300:0002 1 2001 128 ${log.dir} ${case.name} step4.2.6_dut4.log 4.2.6_2
			</script>
			<log-file>checkmac-4.2.6_2.log</log-file>
		</step>
		<step no="4.2.6_checkmac_1">
			<script timeout="1500">
				${case.dir}/bin/maccheck.sh ${ixia.port4.mac} 2048 1 1 ${log.dir} ${case.name} step4.2.6_dut4.log 4.2.6_3
			</script>
			<log-file>checkmac-4.2.6_3.log</log-file>
		</step>
		<step no="4.2.6_checkmac_1">
			<script timeout="1500">
				${case.dir}/bin/maccheck.sh ${ixia.port4.mac} 2048 2001 128 ${log.dir} ${case.name} step4.2.6_dut4.log 4.2.6_4
			</script>
			<log-file>checkmac-4.2.6_4.log</log-file>
		</step>
	</stage>
	
	<stage type="check-point"/>
	
	<stage no="4.2.7_clear_mac">
		<step no="4.2.7_clearmac_dut1">
			<desc>clear mac on dut1</desc>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}" timeout="60">
				-v "clear mac-address all"
			</console>
		</step>
		<step no="4.2.7_clearmac_dut2">
			<desc>clear mac on dut2</desc>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}" timeout="60">
				-v "clear mac-address all"
			</console>
		</step>
		<step no="4.2.7_clearmac_dut3">
			<desc>clear mac on dut3</desc>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}" timeout="60">
				-v "clear mac-address all"
			</console>
		</step>
		<step no="4.2.7_clearmac_dut4">
			<desc>clear mac on dut4</desc>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}" timeout="60">
				-v "clear mac-address all"
			</console>
		</step>
	</stage>
	
	<stage no="multicast_verification_4.3">
		<step no="4.3.1_send_frames">
			<desc>ixiaport1 and ixiaport2 send multicast traffic</desc>
			<log-file>step4.3.1_log.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-new="${job.user}-${job.sid}-2">
			-v "tclsh8.5"
			-v "package req ixia"
			-v "ah_ixia_connect -chassisIP ${pub.chassis1.ip} 
				-userName ${job.user}${job.sid} 
				-tclServerIP ${pri.tclserver.ip} 
				-portList ${sw1.port1.ixia_port},${sw1.port2.ixia_port},${sw1.port3.ixia_port},${sw1.port4.ixia_port}
				-phyList ${sw1.port1.phytype},${sw1.port2.phytype},${sw1.port3.phytype},${sw1.port4.phytype}"
			-v ""

			-v "traffic_configure_eth2 -portListIn ${ixia.port1}
				-mac_dst ${mac.multicast}
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src ${ixia.port1.mac}
				-mac_src_count 1024
				-mac_src_step 0.0.0.0.0.1
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 64
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""

			-v "traffic_configure_eth2 -portListIn ${ixia.port1}
				-mac_dst ${mac.multicast}
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src 0000:0100:1002
				-mac_src_count 1024
				-mac_src_step 0.0.0.0.0.1
				-vlan enable
				-vlan_id ${vlan.group1.start}
				-vlan_repeatCount 64
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 64
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port2}
				-mac_dst ${mac.multicast}
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src ${ixia.port2.mac}
				-mac_src_count 1024
				-mac_src_step 0.0.0.0.0.1
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 64
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port2}
				-mac_dst ${mac.multicast}
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src 0000:0200:2002
				-mac_src_count 1024
				-mac_src_step 0.0.0.0.0.1
				-vlan enable
				-vlan_id ${vlan.group2.start}
				-vlan_repeatCount 64
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 64
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port3},${ixia.port4}
				-mac_dst ${mac.multicast}
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src ${ixia.port3.mac}
				-mac_src_count 1
				-mac_src_step 0.0.0.0.0.1
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 64
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 1 -transmitMethod advance -numBursts 16 -numFrames 64"
			-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 2 -transmitMethod stopStream -numBursts 16 -numFrames 64"
			-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 1 -transmitMethod advance -numBursts 16 -numFrames 64"
			-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 2 -transmitMethod stopStream -numBursts 16 -numFrames 64"
	        -v ""
			
			-v "after 60000"
			-v "start_transmit -portList ${ixia.port1},${ixia.port2} -firstTryFlag false"
			-v "after 40000"
			-v "start_transmit -portList ${ixia.port1},${ixia.port2} -firstTryFlag false"
			-v "after 40000"
			
			-v "get_statistic -txPortList ${ixia.port1},${ixia.port2} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4}"
			</ssh>	
		</step>
		
		<step no="4.3.2_1_check_frames">
			<desc>check tx and rx result on ixia.port1</desc>
			<log-file>check4.3.2_1.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" session-get="${job.user}-${job.sid}-2">
			-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent 
				-rxPortList ${ixia.port1} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port1} is 3072"</log-match>
		</step>
		
		<step no="4.3.2_2_check_frames">
			<desc>check tx and rx result on ixia.port2</desc>
			<log-file>check4.3.2_2.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" session-get="${job.user}-${job.sid}-2">
			-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent 
				-rxPortList ${ixia.port2} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port2} is 3072"</log-match>
		</step>
		
		<step no="4.3.2_3_check_frames">
			<desc>check tx and rx result on ixia.port3</desc>
			<log-file>check4.3.2_3.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" session-get="${job.user}-${job.sid}-2">
			-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent 
				-rxPortList ${ixia.port3} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port3} is 7168"</log-match>
		</step>
		
		<step no="4.3.2_4_check_frames">
			<desc>check tx and rx result on ixia.port4</desc>
			<log-file>check4.3.2_4.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" session-close="${job.user}-${job.sid}-2">
			-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent 
				-rxPortList ${ixia.port4} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port4} is 8192"</log-match>
		</step>
	</stage>
	
	<stage type="child-process" no="4.3.4_1_check_mac">
		<step no="4.3.4_1_show_mac">
			<desc>show mac-address on dut1</desc>
			<log-file>step4.3.4_dut1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}" timeout="500">
				-v "show mac-address all"
			</console>
		</step>
		<step no="4.3.4_1_1_check_mac">
			<desc>check mac-address on dut1 part1</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port1.mac} 1024 1 1 ${log.dir} ${case.name} step4.3.4_dut1.log 4.3.4_1_1
			</script>
			<log-file>checkmac-4.3.4_1_1.log</log-file>
		</step>
		<step no="4.3.4_1_2_check_mac">
			<desc>check mac-address on dut1 part2</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh 0000:0100:1002 1024 2001 64 ${log.dir} ${case.name} step4.3.4_dut1.log 4.3.4_1_2
			</script>
			<log-file>checkmac-4.3.4_1_2.log</log-file>
		</step>
	</stage>

	<stage type="child-process" no="4.3.4_2_check_mac">
		<step no="4.3.4_2_show_mac">
			<desc>show mac-address on dut2</desc>
			<log-file>step4.3.4_dut2.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}" timeout="500">
				-v "show mac-address all"
			</console>
		</step>
		<step no="4.3.4_2_1_check_mac">
			<desc>check mac-address on dut2 part1</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port1.mac} 1024 1 1 ${log.dir} ${case.name} step4.3.4_dut2.log 4.3.4_2_1
			</script>
			<log-file>checkmac-4.3.4_2_1.log</log-file>
		</step>
		<step no="4.3.4_2_2_check_mac">
			<desc>check mac-address on dut2 part2</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh 0000:0100:1002 1024 2001 64 ${log.dir} ${case.name} step4.3.4_dut2.log 4.3.4_2_2
			</script>
			<log-file>checkmac-4.3.4_2_2.log</log-file>
		</step>
	</stage>
	<stage type="child-process" no="4.3.4_3_check_mac">
		<step no="4.3.4_3_show_mac">
			<desc>show mac-address on dut3</desc>
			<log-file>step4.3.4_dut3.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}" timeout="500">
				-v "show mac-address all"
			</console>
		</step>
		<step no="4.3.4_3_1_check_mac">
			<desc>check mac-address on dut3 part1</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port1.mac} 1024 1 1 ${log.dir} ${case.name} step4.3.4_dut3.log 4.3.4_3_1
			</script>
			<log-file>checkmac-4.3.4_3_1.log</log-file>
		</step>
		<step no="4.3.4_3_2_check_mac">
			<desc>check mac-address on dut3 part2</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh 0000:0100:1002 1024 2001 64 ${log.dir} ${case.name} step4.3.4_dut3.log 4.3.4_3_2
			</script>
			<log-file>checkmac-4.3.4_3_2.log</log-file>
		</step>
	</stage>		
	<stage type="child-process" no="4.3.4_4_check_mac">
		<step no="4.3.4_4_show_mac">
			<desc>show mac-address on dut4</desc>
			<log-file>step4.3.4_dut4.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}" timeout="500">
				-v "show mac-address all"
			</console>
		</step>
		<step no="4.3.4_4_1_check_mac">
			<desc>check mac-address on dut4</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port2.mac} 1024 1 1 ${log.dir} ${case.name} step4.3.4_dut4.log 4.3.4_4_1
			</script>
			<log-file>checkmac-4.3.4_4_1.log</log-file>
		</step>
		<!--mac地址没有学全
		<step no="4.3.4_4_2_check_mac">
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh 0000:0200:2002 1024 2001 64 ${log.dir} ${case.name} step4.3.4_dut4.log 4.3.4_4_2
			</script>
			<log-file>checkmac-4.3.4_4_2.log</log-file>
		</step>
		-->

	</stage>
	
	<stage type="check-point"/>

	<stage type="child-process" no="4.4_clear_mac">
		<step no="4.4.1_clear_mac_dut1">
			<desc>clear mac address on dut1</desc>
			<log-file>step4.4.1_dut1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}" timeout="60">
				-v "clear mac-address all"
				-v "show mac-address all"
			</console>
			<log-match>-n -i "0000:0100:"</log-match>
			<log-match>-n -i "0000:0200:"</log-match>
		</step>
		<step no="4.4.2_clear_mac_dut2">
			<desc>clear mac address on dut2</desc>
			<log-file>step4.4.2_dut2.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}" timeout="60">
				-v "clear mac-address all"
				-v "show mac-address all"
			</console>
			<log-match>-n -i "0000:0100:"</log-match>
			<log-match>-n -i "0000:0200:"</log-match>
		</step>
		<step no="4.4.3_clear_mac_dut3">
			<desc>clear mac address on dut3</desc>
			<log-file>step4.4.3_dut3.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}" timeout="60">
				-v "clear mac-address all"
				-v "show mac-address all"
			</console>
			<log-match>-n -i "0000:0100:"</log-match>
			<log-match>-n -i "0000:0200:"</log-match>
		</step>
		<step no="4.4.4_clear_mac_dut4">
			<desc>clear mac address on dut4</desc>
			<log-file>step4.4.4_dut4.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}" timeout="60">
				-v "clear mac-address all"
				-v "show mac-address all"
			</console>
			<log-match>-n -i "0000:0100:"</log-match>
			<log-match>-n -i "0000:0200:"</log-match>
		</step>
	</stage>

	<stage no="unknown_verification_5.1">
		<step no="5.1.1_send_frames">
			<desc>ixia3 send unknown unicast traffic</desc>
			<log-file>step5.1.1_log.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200">
			-v "tclsh8.5"
			-v "package req ixia"
			-v "ah_ixia_connect -chassisIP ${pub.chassis1.ip} 
				-userName ${job.user}${job.sid} 
				-tclServerIP ${pri.tclserver.ip} 
				-portList ${sw1.port1.ixia_port},${sw1.port2.ixia_port},${sw1.port3.ixia_port},${sw1.port4.ixia_port}
				-phyList ${sw1.port1.phytype},${sw1.port2.phytype},${sw1.port3.phytype},${sw1.port4.phytype}"
			-v ""

			-v "traffic_configure_eth2 -portListIn ${ixia.port3}
				-mac_dst ${mac.unknown}
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src ${ixia.port3.mac}
				-mac_src_count 1024
				-mac_src_step 0.0.0.0.0.1
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port1},${ixia.port2},${ixia.port4}
				-mac_dst ${mac.multicast}
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src ${ixia.port1.mac}
				-mac_src_count 1
				-mac_src_step 0.0.0.0.0.1
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256	
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			-v "stream_transmit_method_set -portList ${ixia.port3} -streamId 1 -transmitMethod stopStream -numBursts 4 -numFrames 256"
			
			-v "after 60000"
			-v "start_transmit -portList ${ixia.port3} -firstTryFlag false"
			-v "after 6000"
			
			-v "get_statistic -txPortList ${ixia.port3} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port4}"
			
			-v "check_equal_tx_with_rx -oneTxPort ${ixia.port3} -oneRxPort ${ixia.port1}"
			-v "check_equal_tx_with_rx -oneTxPort ${ixia.port3} -oneRxPort ${ixia.port2}"
			-v "check_equal_tx_with_rx -oneTxPort ${ixia.port3} -oneRxPort ${ixia.port4}"
			-v "ctrl-c"
			</ssh>	
		</step>
		
		<step no="5.1.2_check_frames">
			<desc>check tx and rx result</desc>
			<log-file>step5.1.1_log.log</log-file>
			<log-match>-e "checkEqualTxWithRX ${ixia.port3} ${ixia.port1} framesSent userDefinedStat2 result is equal"</log-match>
			<log-match>-e "checkEqualTxWithRX ${ixia.port3} ${ixia.port2} framesSent userDefinedStat2 result is equal"</log-match>
			<log-match>-e "checkEqualTxWithRX ${ixia.port3} ${ixia.port4} framesSent userDefinedStat2 result is equal"</log-match>
		</step>
	</stage>

	<stage type="child-process" no="5.1.3_show_mac_dut1">
		<step no="5.1.3_show_mac_dut1">
			<desc>show and clear mac address on dut1</desc>
			<log-file>5.1.3_mac_1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}" timeout="500">
				-v "show mac-address all"
				-v "clear mac-address all"
			</console>
		</step>
		<step no="5.1.3_check_mac">
			<desc>check mac address on dut1</desc>
			<script timeout="4000">
				${case.dir}/bin/maccheck.sh ${ixia.port3.mac} 1024 1 1 ${log.dir} ${case.name} 5.1.3_mac_1.log 5.1.3
			</script>
			<log-file>checkmac-5.1.3.log</log-file>
		</step>
	</stage>
	<stage type="child-process" no="5.1.4_show_mac_dut2">
		<step no="5.1.4_show_mac_dut2">
			<desc>show and clear mac address on dut2</desc>
			<log-file>5.1.4_mac_2.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}" timeout="500">
				-v "show mac-address all"
				-v "clear mac-address all"
			</console>
		</step>
		<step no="5.1.4_check_mac">
			<desc>check mac address on dut2</desc>
			<script timeout="4000">
				${case.dir}/bin/maccheck.sh ${ixia.port3.mac} 1024 1 1 ${log.dir} ${case.name} 5.1.4_mac_2.log 5.1.4
			</script>
			<log-file>checkmac-5.1.4.log</log-file>
		</step>
	</stage>
	<stage type="child-process" no="5.1.5_show mac dut3">
		<step no="5.1.5_show mac dut3">
			<desc>show and clear mac address on dut3</desc>
			<log-file>5.1.5_mac_3.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}" timeout="500">
				-v "show mac-address all"
				-v "clear mac-address all"
			</console>
		</step>
		<step no="5.1.5_check_mac">
			<desc>check mac address on dut3</desc>
			<script timeout="4000">
				${case.dir}/bin/maccheck.sh ${ixia.port3.mac} 1024 1 1 ${log.dir} ${case.name} 5.1.5_mac_3.log 5.1.5
			</script>
			<log-file>checkmac-5.1.5.log</log-file>
		</step>
	</stage>
	<stage type="child-process" no="5.1.6_show mac_dut4">
		<step no="5.1.6_show mac dut4">
			<desc>show and clear mac address on dut4</desc>
			<log-file>5.1.6_mac_4.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}" timeout="500">
				-v "show mac-address all"
				-v "clear mac-address all"
			</console>
		</step>
		<step no="5.1.6_check_mac">
			<desc>check mac address on dut4</desc>
			<script timeout="4000">
				${case.dir}/bin/maccheck.sh ${ixia.port3.mac} 1024 1 1 ${log.dir} ${case.name} 5.1.6_mac_4.log 5.1.6
			</script>
			<log-file>checkmac-5.1.6.log</log-file>
		</step>
	</stage>
	
	<stage type="check-point"/>
	
	<stage no="unknown_verification_5.2">
		<step no="5.2.1_send_frames">
			<desc>ixia1 send unknown unicast traffic</desc>
			<log-file>step5.2.1.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-new="${job.user}-${job.sid}-3">
			-v "tclsh8.5"
			-v "package req ixia"
			-v "ah_ixia_connect -chassisIP ${pub.chassis1.ip} 
				-userName ${job.user}${job.sid} 
				-tclServerIP ${pri.tclserver.ip} 
				-portList ${sw1.port1.ixia_port},${sw1.port2.ixia_port},${sw1.port3.ixia_port},${sw1.port4.ixia_port}
				-phyList ${sw1.port1.phytype},${sw1.port2.phytype},${sw1.port3.phytype},${sw1.port4.phytype}"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port1}
				-mac_dst ${mac.unknown}
				-mac_src ${ixia.port1.mac}
				-mac_src_count 1
				-mac_src_step 0.0.0.0.0.1
				-vlan enable
				-vlan_id ${vlan.group1.start}
				-vlan_repeatCount 64
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""

			-v "traffic_configure_eth2 -portListIn ${ixia.port1}
				-mac_dst ${mac.unknown}
				-mac_src 0000.0100.1002
				-mac_src_count 1
				-mac_src_step 0.0.0.0.0.1
				-vlan enable
				-vlan_id ${vlan.group1.start}
				-vlan_repeatCount 64
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port1}
				-mac_dst ${mac.unknown}
				-mac_src ${ixia.port1.mac}
				-mac_src_count 2048
				-mac_src_step 0.0.0.0.0.1
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port2},${ixia.port3},${ixia.port4}
				-mac_dst ${mac.unknown}
				-mac_src ${ixia.port1.mac}
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 1 -transmitMethod advance -numBursts 1 -numFrames 128 "
			-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 2 -transmitMethod advance -numBursts 8 -numFrames 256 "
			-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 3 -transmitMethod stopStream -numBursts 8 -numFrames 256 "
			
			-v "after 60000"
			-v "start_transmit -portList ${ixia.port1} -firstTryFlag false"
			-v "after 20000"
			
			-v "get_statistic -txPortList ${ixia.port1} -rxPortList ${ixia.port2},${ixia.port3},${ixia.port4}"
			
			</ssh>	
		</step>
		
		<step no="5.2.2_1_check_frames">
			<desc>check tx and rx result_rxport1</desc>
			<log-file>step5.2.2_1.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-3">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port2}"
			</ssh>			
			<log-match>-e "cmp2 is 3136"</log-match>	
		</step>
		<step no="5.2.2_2_check_frames">
			<desc>check tx and rx result_report2</desc>
			<log-file>step5.2.2_2.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-3">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port3}"
			</ssh>
			<log-match>-e "cmp2 is 3136"</log-match>
		</step>
		<step no="5.2.2_3_check_frames">
			<desc>check tx and rx result_report3</desc>
			<log-file>step5.2.2_3.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-close="${job.user}-${job.sid}-3">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port4}"
			</ssh>
			<log-match>-e "cmp2 is 4224"</log-match>
		</step>
	</stage>
	
	<stage type="child-process" no="check_mac_5.2.3_dut1">
		<step no="5.2.3_show_mac">
			<desc>show mac-address on dut1</desc>
			<log-file>step5.2.3_dut1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}" timeout="600">
				-v "show mac-address all"
			</console>
		</step>
		<step no="5.2.3_1_check_mac">
			<desc>check mac-address on dut1</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port1.mac} 1 2001 64 ${log.dir} ${case.name} step5.2.3_dut1.log 5.2.3_1
			</script>
			<log-file>checkmac-5.2.3_1.log</log-file>
		</step>
		<step no="5.2.3_2_check_mac">
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh 0000:0100:1002 1 2001 64 ${log.dir} ${case.name} step5.2.3_dut1.log 5.2.3_2
			</script>
			<log-file>checkmac-5.2.3_2.log</log-file>
		</step>
		<step no="5.2.3_3_check_mac">
			<script timeout="4000">
				${case.dir}/bin/maccheck.sh ${ixia.port1.mac} 2048 1 1 ${log.dir} ${case.name} step5.2.3_dut1.log 5.2.3_3
			</script>
			<log-file>checkmac-5.2.3_3.log</log-file>
		</step>
	</stage>
	<stage type="child-process" no="check_mac_5.2.4_dut2">
		<step no="5.2.4_mac">
			<desc>show mac-address on dut2</desc>
			<log-file>step5.2.4_dut2.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}" timeout="600">
				-v "show mac-address all"
			</console>
		</step>
		<step no="5.2.4_1_check_mac">
			<desc>check mac-address on dut2</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port1.mac} 1 2001 64 ${log.dir} ${case.name} step5.2.4_dut2.log 5.2.4_1
			</script>
			<log-file>checkmac-5.2.4_1.log</log-file>
		</step>
		<step no="5.2.4_2_check_mac">
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh 0000:0100:1002 1 2001 64 ${log.dir} ${case.name} step5.2.4_dut2.log 5.2.4_2
			</script>
			<log-file>checkmac-5.2.4_2.log</log-file>
		</step>
		<step no="5.2.4_3_check_mac">
			<script timeout="4000">
				${case.dir}/bin/maccheck.sh ${ixia.port1.mac} 2048 1 1 ${log.dir} ${case.name} step5.2.4_dut2.log 5.2.4_3
			</script>
			<log-file>checkmac-5.2.4_3.log</log-file>
		</step>
	</stage>
	<stage type="child-process" no="check_mac_5.2.5_dut3">
		<step no="5.2.5_mac">
			<desc>show mac-address on dut3</desc>
			<log-file>step5.2.5_dut3.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}" timeout="600">
				-v "show mac-address all"
			</console>
		</step>
		<step no="5.2.5_1_check_mac">
			<desc>check mac-address on dut3</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port1.mac} 1 2001 64 ${log.dir} ${case.name} step5.2.5_dut3.log 5.2.5_1
			</script>
			<log-file>checkmac-5.2.5_1.log</log-file>
		</step>
		<step no="5.2.5_2_check_mac">
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh 0000:0100:1002 1 2001 64 ${log.dir} ${case.name} step5.2.5_dut3.log 5.2.5_2
			</script>
			<log-file>checkmac-5.2.5_2.log</log-file>
		</step>
		<step no="5.2.5_3_check_mac">
			<script timeout="4000">
				${case.dir}/bin/maccheck.sh ${ixia.port1.mac} 2048 1 1 ${log.dir} ${case.name} step5.2.5_dut3.log 5.2.5_3
			</script>
			<log-file>checkmac-5.2.5_3.log</log-file>
		</step>
	</stage>
	
	<stage type="child-process" no="check_mac_5.2.6_dut4">
		<step no="5.2.6_mac">
			<desc>show mac-address on dut4</desc>
			<log-file>step5.2.6_dut4.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}" timeout="600">
				-v "show mac-address all"
			</console>
		</step>
		<step no="5.2.6_1_check_mac">
			<desc>check mac-address on dut4</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port1.mac} 1 2001 64 ${log.dir} ${case.name} step5.2.6_dut4.log 5.2.6_1
			</script>
			<log-file>checkmac-5.2.6_1.log</log-file>
		</step>
		<step no="5.2.6_2_check_mac">
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh 0000:0100:1002 1 2001 64 ${log.dir} ${case.name} step5.2.6_dut4.log 5.2.6_2
			</script>
			<log-file>checkmac-5.2.6_2.log</log-file>
		</step>
		<step no="5.2.6_3_check_mac">
			<script timeout="4000">
				${case.dir}/bin/maccheck.sh ${ixia.port1.mac} 2048 1 1 ${log.dir} ${case.name} step5.2.6_dut4.log 5.2.6_3
			</script>
			<log-file>checkmac-5.2.6_3.log</log-file>
		</step>
	</stage>
	
	<stage type="check-point"/>
	
	<stage no="5.2.7_clear_mac">
		<step no="5.2.7_clearmac_dut1">
			<desc>clear mac on dut1</desc>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}" timeout="60">
				-v "clear mac-address all"
			</console>
		</step>
		<step no="5.2.7_clearmac_dut2">
			<desc>clear mac on dut2</desc>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}" timeout="60">
				-v "clear mac-address all"
			</console>
		</step>
		<step no="5.2.7_clearmac_dut3">
			<desc>clear mac on dut3</desc>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}" timeout="60">
				-v "clear mac-address all"
			</console>
		</step>
		<step no="5.2.7_clearmac_dut4">
			<desc>clear mac on dut4</desc>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}" timeout="60">
				-v "clear mac-address all"
			</console>
		</step>
	</stage>
	
	<stage no="unknown_verification_5.3">
		<step no="5.3.1_send_frames">
			<desc>ixiaport1 and ixiaport2 send unknown unicast traffic</desc>
			<log-file>step5.3.1_log.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-new="${job.user}-${job.sid}-2">
			-v "tclsh8.5"
			-v "package req ixia"
			-v "ah_ixia_connect -chassisIP ${pub.chassis1.ip} 
				-userName ${job.user}${job.sid} 
				-tclServerIP ${pri.tclserver.ip} 
				-portList ${sw1.port1.ixia_port},${sw1.port2.ixia_port},${sw1.port3.ixia_port},${sw1.port4.ixia_port}
				-phyList ${sw1.port1.phytype},${sw1.port2.phytype},${sw1.port3.phytype},${sw1.port4.phytype}"
			-v ""

			-v "traffic_configure_eth2 -portListIn ${ixia.port2}
				-mac_dst ${mac.unknown}
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src ${ixia.port2.mac}
				-mac_src_count 2048
				-mac_src_step 0.0.0.0.0.1
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""

			-v "traffic_configure_eth2 -portListIn ${ixia.port2}
				-mac_dst ${mac.unknown}
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src ${ixia.port2.mac}
				-mac_src_count 1
				-mac_src_step 0.0.0.0.0.1
				-vlan enable
				-vlan_id ${vlan.group2.start}
				-vlan_repeatCount 64
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port3}
				-mac_dst ${mac.unknown}
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src ${ixia.port3.mac}
				-mac_src_count 2048
				-mac_src_step 0.0.0.0.0.1
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port3}
				-mac_dst ${mac.unknown}
				-mac_dst_count 1
				-mac_dst_step 0.0.0.0.0.1
				-mac_src ${ixia.port3.mac}
				-mac_src_count 1
				-mac_src_step 0.0.0.0.0.1
				-vlan enable
				-vlan_id ${vlan.group2.start}
				-vlan_repeatCount 96
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port1},${ixia.port4}
				-mac_dst ${mac.multicast}
				-mac_src ${ixia.port1.mac}
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 1 -transmitMethod advance -numFrames 128 -numBursts 16"
			-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 2 -transmitMethod stopStream -numFrames 128 -numBursts 16"
			-v "stream_transmit_method_set -portList ${ixia.port3} -streamId 1 -transmitMethod advance -numFrames 128 -numBursts 16"
			-v "stream_transmit_method_set -portList ${ixia.port3} -streamId 2 -transmitMethod stopStream -numFrames 128 -numBursts 16"
	        -v ""
			-v "after 60000"
			
			-v "start_transmit -portList ${ixia.port2},${ixia.port3} -firstTryFlag false"
			-v "after 40000"
			
			-v "get_statistic -txPortList ${ixia.port2},${ixia.port3} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4}"

			</ssh>	
		</step>
		
		<step no="5.3.2_1_check_frames">
			<desc>check tx and rx result on rxport:ixia.port1</desc>
			<log-file>check5.3.2_1.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-2">
			-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port2},${ixia.port3} -txStParaList framesSent,framesSent 
				-rxPortList ${ixia.port1} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port1} is 5824"</log-match>
		</step>
		
		<step no="5.3.2_2_check_frames">
			<desc>check tx and rx result on rxport:ixia.port2</desc>
			<log-file>check5.3.2_2.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-2">
			-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port2},${ixia.port3} -txStParaList framesSent,framesSent 
				-rxPortList ${ixia.port2} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port2} is 3424"</log-match>
		</step>
		
		<step no="5.3.2_3_check_frames">
			<desc>check tx and rx result on rxport:ixia.port3</desc>
			<log-file>check5.3.2_3.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-2">
			-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port2},${ixia.port3} -txStParaList framesSent,framesSent 
				-rxPortList ${ixia.port3} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port3} is 4096"</log-match>
		</step>
		
		<step no="5.3.2_4_check_frames">
			<desc>check tx and rx result on rxport:ixia.port4</desc>
			<log-file>check5.3.2_4.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-close="${job.user}-${job.sid}-2">
			-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port2},${ixia.port3} -txStParaList framesSent,framesSent 
				-rxPortList ${ixia.port4} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port4} is 8192"</log-match>
		</step>
	</stage>

	<!--set timeout0 for next step-->
	<stage no="5.3.3_show_mac">
		<step no="5.3.3_1_idle">
			<desc>set mac-address idle-timeout on dut1</desc>
			<log-file>step5.3.3_1_dut1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}" timeout="800">
				-v "show mac-address all"
			</console>
		</step>
		<step no="5.3.3_2_idle">
			<desc>set mac-address idle-timeout on dut2</desc>
			<log-file>step5.3.3_2_dut2.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}" timeout="800">
				-v "show mac-address all"
			</console>
		</step>
		<step no="5.3.3_3_idle">
			<desc>set mac-address idle-timeout on dut3</desc>
			<log-file>step5.3.3_3_dut3.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}" timeout="800">
				-v "show mac-address all"
			</console>
		</step>
		<step no="5.3.3_4_idle">
			<desc>set mac-address idle-timeout on dut4</desc>
			<log-file>step5.3.3_4_dut4.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}" timeout="800">
				-v "show mac-address all"
			</console>
		</step>
	</stage>

	<stage no="5.3.4_show_mac">
		<step no="5.3.4_show_mac">
			<desc>show mac-address on dut1</desc>
			<log-file>step5.3.4_dut1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}" timeout="800">
				-v "mac-address idle-timeout 600"
			</console>
		</step>
		<step no="5.3.5_show_mac">
			<desc>show mac-address on dut2</desc>
			<log-file>step5.3.5_dut2.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}" timeout="800">
				-v "mac-address idle-timeout 600"
			</console>
		</step>
		<step no="5.3.6_show_mac">
			<desc>show mac-address on dut3</desc>
			<log-file>step5.3.6_dut3.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}" timeout="800">
				-v "mac-address idle-timeout 600"
			</console>
		</step>
		<step no="5.3.7_show_mac">
			<desc>show mac-address on dut4</desc>
			<log-file>step5.3.7_dut4.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}" timeout="800">
				-v "mac-address idle-timeout 600"
			</console>
		</step>
	</stage>

	<!--5.3.4 to 5.3.7-->

	<stage type="child-process" no="5.4.1_clear_mac">
		<step no="5.4.1_clear_mac_dut1">
			<desc>clear mac address on dut1</desc>
			<log-file>step5.4.1_dut1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}" timeout="60">
				-v "clear mac-address all"
				-v "show mac-address all"
			</console>
			<log-match>-n -i "0000:0100:"</log-match>
			<log-match>-n -i "0000:0200:"</log-match>
		</step>
	</stage>
	<stage type="child-process" no="5.4.2_clear_mac">
		<step no="5.4.2_clear_mac_dut2">
			<desc>clear mac address on dut2</desc>
			<log-file>step5.4.2_dut2.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}" timeout="60">
				-v "clear mac-address all"
				-v "show mac-address all"
			</console>
			<log-match>-n -i "0000:0100:"</log-match>
			<log-match>-n -i "0000:0200:"</log-match>
		</step>
	</stage>
	<stage type="child-process" no="5.4.3_clear_mac">
		<step no="5.4.3_clear_mac_dut3">
			<desc>clear mac address on dut3</desc>
			<log-file>step5.4.3_dut3.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}" timeout="60">
				-v "clear mac-address all"
				-v "show mac-address all"
			</console>
			<log-match>-n -i "0000:0100:"</log-match>
			<log-match>-n -i "0000:0200:"</log-match>
		</step>
	</stage>
	<stage type="child-process" no="5.4.4_clear_mac">
		<step no="5.4.4_clear_mac_dut4">
			<desc>clear mac address on dut4</desc>
			<log-file>step5.4.4_dut4.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}" timeout="60">
				-v "clear mac-address all"
				-v "show mac-address all"
			</console>
			<log-match>-n -i "0000:0100:"</log-match>
			<log-match>-n -i "0000:0200:"</log-match>
		</step>
	</stage>
	
	<stage type="check-point"/>	
	
	<stage no="unicast_verification_6.1">
		<step no="6.1.1_send_frames">
			<desc>ixia1-4  send broadcast learning traffic</desc>
			<log-file>step6.1.1_log.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-new="${job.user}-${job.sid}-6">
			-v "tclsh8.5"
			-v "package req ixia"
			-v "ah_ixia_connect -chassisIP ${pub.chassis1.ip} 
				-userName ${job.user}${job.sid} 
				-tclServerIP ${pri.tclserver.ip} 
				-portList ${sw1.port1.ixia_port},${sw1.port2.ixia_port},${sw1.port3.ixia_port},${sw1.port4.ixia_port}
				-phyList ${sw1.port1.phytype},${sw1.port2.phytype},${sw1.port3.phytype},${sw1.port4.phytype}"
			-v ""
			<!--ixia1.id1-->
			-v "traffic_configure_eth2 -portListIn ${ixia.port1}
				-mac_dst ffff.ffff.ffff
				-mac_src ${ixia.port1.mac}
				-vlan enable
				-vlan_id ${vlan.group1.start}
				-vlan_repeatCount 64
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			<!--ixia1.id2-->
			-v "traffic_configure_eth2 -portListIn ${ixia.port1}
				-mac_dst ffff.ffff.ffff
				-mac_src ${ixia.port1.mac}
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			<!--ixia2.id1-->
			-v "traffic_configure_eth2 -portListIn ${ixia.port2}
				-mac_dst ffff.ffff.ffff
				-mac_src ${ixia.port2.mac}
				-vlan enable
				-vlan_id ${vlan.group2.start}
				-vlan_repeatCount 64
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			<!--ixia2.id2-->
			-v "traffic_configure_eth2 -portListIn ${ixia.port2}
				-mac_dst ffff.ffff.ffff
				-mac_src ${ixia.port2.mac}
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			<!--ixia3.id1-->
			-v "traffic_configure_eth2 -portListIn ${ixia.port3}
				-mac_dst ffff.ffff.ffff
				-mac_src ${ixia.port3.mac}
				-vlan enable
				-vlan_id ${vlan.group2.start}
				-vlan_repeatCount 96
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			<!--ixia1.id2-->
			-v "traffic_configure_eth2 -portListIn ${ixia.port3}
				-mac_dst ffff.ffff.ffff
				-mac_src ${ixia.port3.mac}
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			<!--ixia4.id1-->
			-v "traffic_configure_eth2 -portListIn ${ixia.port4}
				-mac_dst ffff.ffff.ffff
				-mac_src ${ixia.port4.mac}
				-vlan enable
				-vlan_id ${vlan.group1.start}
				-vlan_repeatCount 128
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD	
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			<!--ixia4.id2-->
			-v "traffic_configure_eth2 -portListIn ${ixia.port4}
				-mac_dst ffff.ffff.ffff
				-mac_src ${ixia.port4.mac}
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 1 -transmitMethod advance -numFrames 128 -numBursts 8"
			-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 2 -transmitMethod stopStream -numFrames 128 -numBursts 8"
			-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 1 -transmitMethod advance -numFrames 128 -numBursts 8"
			-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 2 -transmitMethod stopStream -numFrames 128 -numBursts 8"
			-v "stream_transmit_method_set -portList ${ixia.port3} -streamId 1 -transmitMethod advance -numFrames 128 -numBursts 8"
			-v "stream_transmit_method_set -portList ${ixia.port3} -streamId 2 -transmitMethod stopStream -numFrames 128 -numBursts 8"
			-v "stream_transmit_method_set -portList ${ixia.port4} -streamId 1 -transmitMethod advance -numFrames 128 -numBursts 8"
			-v "stream_transmit_method_set -portList ${ixia.port4} -streamId 2 -transmitMethod stopStream -numFrames 128 -numBursts 8"
			
			-v "after 60000"
			
			-v "start_transmit -portList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4} -firstTryFlag false"
			-v "after 20000"
			
			-v "get_statistic -txPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4}"
			</ssh>	
		</step>
	</stage>
	
	<stage type="child-process" no="6.1.3_show_mac_dut1">
		<step no="6.1.3_show_mac_dut1">
			<desc>show and clear mac address on dut1</desc>
			<log-file>6.1.3_mac_1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}" timeout="300">
				-v "mac-address-table idle-timeout 0"
				-v "show mac-address all"
			</console>
			<log-match>-p 2 -i "1" -p 3 -i "0000:0100:0001"</log-match>
			<log-match>-p 2 -i "1" -p 3 -i "0000:0200:0001"</log-match>
			<log-match>-p 2 -i "1" -p 3 -i "0000:0300:0001"</log-match>
			<log-match>-p 2 -i "1" -p 3 -i "0000:0400:0001"</log-match>
		</step>
	</stage>
	<stage type="child-process" no="6.1.4_show_mac_dut2">
		<step no="6.1.4_show_mac_dut2">
			<desc>show and clear mac address on dut2</desc>
			<log-file>6.1.4_mac_2.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}" timeout="300">
				-v "mac-address-table idle-timeout 0"
				-v "show mac-address all"
			</console>
			<log-match>-p 2 -i "1" -p 3 -i "0000:0100:0001" </log-match>
			<log-match>-p 2 -i "1" -p 3 -i "0000:0200:0001" </log-match>
			<log-match>-p 2 -i "1" -p 3 -i "0000:0300:0001" </log-match>
			<log-match>-p 2 -i "1" -p 3 -i "0000:0400:0001" </log-match>
		</step>
	</stage>
	<stage type="child-process" no="6.1.5_show mac dut3">
		<step no="6.1.5_show mac dut3">
			<desc>show and clear mac address on dut3</desc>
			<log-file>6.1.5_mac_3.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}" timeout="300">
				-v "mac-address-table idle-timeout 0"
				-v "show mac-address all"
			</console>
			<log-match>-p 2 -i "1" -p 3 -i "0000:0100:0001"</log-match>
			<log-match>-p 2 -i "1" -p 3 -i "0000:0200:0001" </log-match>
			<log-match>-p 2 -i "1" -p 3 -i "0000:0300:0001" </log-match>
			<log-match>-p 2 -i "1" -p 3 -i "0000:0400:0001" </log-match>
		</step>
	</stage>
	<stage type="child-process" no="6.1.6_show mac_dut4">
		<step no="6.1.6_show mac dut4">
			<desc>show and clear mac address on dut4</desc>
			<log-file>6.1.6_mac_4.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}" timeout="300">
				-v "mac-address-table idle-timeout 0"
				-v "show mac-address all"
			</console>
			<log-match>-p 2 -i "1" -p 3 -i "0000:0100:0001" </log-match>
			<log-match>-p 2 -i "1" -p 3 -i "0000:0200:0001" </log-match>
			<log-match>-p 2 -i "1" -p 3 -i "0000:0300:0001" </log-match>
			<log-match>-p 2 -i "1" -p 3 -i "0000:0400:0001" </log-match>
		</step>
	</stage>
	
	<stage type="check-point"/>
	
	<stage type="child-process" no="6.1.7_check_mac">
		<step no="6.1.7_check_mac">
			<desc>check mac address on dut1</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port1.mac} 1 ${vlan.group1.start} 64 ${log.dir} ${case.name} 6.1.3_mac_1.log 6.1.7
			</script>
			<log-file>checkmac-6.1.7.log</log-file>
		</step>
	</stage>
	<stage type="child-process" no="6.1.8_check_mac">
		<step no="6.1.8_check_mac">
			<desc>check mac address on dut2</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port2.mac} 1 ${vlan.group2.start} 64 ${log.dir} ${case.name} 6.1.4_mac_2.log 6.1.8
			</script>
			<log-file>checkmac-6.1.8.log</log-file>
		</step>
	</stage>
	<stage type="child-process" no="6.1.9_check_mac">
		<step no="6.1.9_check_mac">
			<desc>check mac address on dut3</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port3.mac} 1 ${vlan.group2.start} 96 ${log.dir} ${case.name} 6.1.5_mac_3.log 6.1.9
			</script>
			<log-file>checkmac-6.1.9.log</log-file>
		</step>
	</stage>
	<stage type="child-process" no="6.1.10_check_mac">
		<step no="6.1.10_check_mac">
			<desc>check mac address on dut4</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port4.mac} 1 ${vlan.group1.start} 128 ${log.dir} ${case.name} 6.1.6_mac_4.log 6.1.10
			</script>
			<log-file>checkmac-6.1.10.log</log-file>
		</step>
	</stage>
	
	<stage type="check-point"/>
	
	<stage no="unicast_verification_6.2">
		<step no="6.2.1_send_frames">
			<desc>ixia1 send unicast traffic</desc>
			<log-file>step6.2.1_1.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
			-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp disable"
			<!--ixia1.id3-->
			-v "traffic_configure_eth2 -portListIn ${ixia.port1}
				-mac_dst ${ixia.port2.mac}
				-mac_src ${ixia.port1.mac}
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 1024
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "stream_percent_rate_set -portList ${ixia.port1} -streamId 3 -percentRate 80"
			
			-v "start_trans_getstats -txPortList ${ixia.port1} -rxPortList ${ixia.port2},${ixia.port3},${ixia.port4} -duration 10"
			-v ""
			</ssh>	
		</step>
		
		<step no="6.2.2_1_check_frames">
			<desc>check tx and rx result_rxport1</desc>
			<log-file>step6.2.1_1.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port2}"
			</ssh>			
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port2} framesSent userDefinedStat2 result is equal"</log-match>	
		</step>
		<step no="6.2.2_2_check_frames">
			<desc>check tx and rx result_report2</desc>
			<log-file>step6.2.1_2.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port3}"
			</ssh>
			<log-match>-e "cmp2 is 0"</log-match>
		</step>
		<step no="6.2.2_3_check_frames">
			<desc>check tx and rx result_report3</desc>
			<log-file>step6.2.1_3.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port4}"
			</ssh>
			<log-match>-e "cmp2 is 0"</log-match>
		</step>
	</stage>
	
	<stage no="unicast_verification_6.3">
		<step no="6.3.1_send_frames">
			<desc>ixia1 send unicast traffic</desc>
			<log-file>step6.3.1_1.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
			-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp disable"
			<!--ixia1.id4-->
			-v "traffic_configure_eth2 -portListIn ${ixia.port1}
				-mac_dst ${ixia.port3.mac}
				-mac_src ${ixia.port1.mac}
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 1024
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "stream_percent_rate_set -portList ${ixia.port1} -streamId 4 -percentRate 80"
			
			-v "after 60000"
			-v "start_trans_getstats -txPortList ${ixia.port1} -rxPortList ${ixia.port2},${ixia.port3},${ixia.port4} -duration 10"
			-v ""
			</ssh>	
		</step>
		
		<step no="6.3.2_1_check_frames">
			<desc>check tx and rx result_rxport1</desc>
			<log-file>step6.3.1_1.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port2}"
			</ssh>			
			<log-match>-e "cmp2 is 0"</log-match>	
		</step>
		<step no="6.3.2_2_check_frames">
			<desc>check tx and rx result_report2</desc>
			<log-file>step6.3.1_2.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port3}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port3} framesSent userDefinedStat2 result is equal"</log-match>
		</step>
		<step no="6.3.2_3_check_frames">
			<desc>check tx and rx result_report3</desc>
			<log-file>step6.3.1_3.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port4}"
			</ssh>
			<log-match>-e "cmp2 is 0"</log-match>
		</step>
	</stage>
	
	<stage no="unicast_verification_6.4">
		<step no="6.4.1_send_frames">
			<desc>ixia1 send frames to ixia4</desc>
			<log-file>step6.4.1.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp disable"
				<!--ixia1.id5-->
				-v "traffic_configure_eth2 -portListIn ${ixia.port1}
				-mac_dst ${ixia.port4.mac}
				-mac_src ${ixia.port1.mac}
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 1024
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "stream_percent_rate_set -portList ${ixia.port1} -streamId 5 -percentRate 80"
			
			-v "start_trans_getstats -txPortList ${ixia.port1} -rxPortList ${ixia.port2},${ixia.port3},${ixia.port4} -duration 10"
			-v ""
			</ssh>
		</step>
		<step no="6.4.2_check_result">
			<desc>check result with ixia port1 and port2</desc>
			<log-file>step6.4.2.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port2}"
			</ssh>
			<log-match>-e "cmp2 is 0"</log-match>
		</step>
		<step no="6.4.3_check_result">
			<desc>check result with ixia port1 and port3</desc>
			<log-file>step6.4.3.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port3}"
			</ssh>
			<log-match>-e "cmp2 is 0"</log-match>
		</step>
		<step no="6.4.4_check_result">
			<desc>check result with ixia port1 and port4</desc>
			<log-file>step6.4.4.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port4}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port4} framesSent userDefinedStat2 result is equal"</log-match>
		</step>		
	</stage>
	<!--pass-->
	<stage no="unicast_verification_6.5">
		<step no="6.5.1_send_frames">
			<desc>ixia2 send frames to ixia1</desc>
			<log-file>step6.5.1_log.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
			-v "stream_maintance -onePort ${ixia.port2} -streamId all -maintanceOp disable"
			<!--ixia2.id3-->
			-v "traffic_configure_eth2 -portListIn ${ixia.port2}
				-mac_dst ${ixia.port1.mac}
				-mac_src ${ixia.port2.mac}
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 1024
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "stream_percent_rate_set -portList ${ixia.port2} -streamId 3 -percentRate 80"
			
			-v "start_trans_getstats -txPortList ${ixia.port2} -rxPortList ${ixia.port1},${ixia.port3},${ixia.port4} -duration 10"
			-v ""
			</ssh>
		</step>
		<step no="6.5.2_check_result">
			<desc>check result with ixia port2 and port1</desc>
			<log-file>step6.5.2.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port2} -oneRxPort ${ixia.port1}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port2} ${ixia.port1} framesSent userDefinedStat2 result is equal"</log-match>
		</step>
		<step no="6.5.3_check_result">
			<desc>check result with ixia port2 and port3</desc>
			<log-file>step6.5.3.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port2} -oneRxPort ${ixia.port3}"
			</ssh>
			<log-match>-e "cmp2 is 0"</log-match>
		</step>
		<step no="6.5.4_check_result">
			<desc>check result with ixia port2 and port4</desc>
			<log-file>step6.5.4.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port2} -oneRxPort ${ixia.port4}"
			</ssh>
			<log-match>-e "cmp2 is 0"</log-match>
		</step>		
	</stage>
	
	<stage no="unicast_verification_6.6">
		<step no="6.6.1_send_frames">
			<desc>ixia2 send frames to ixia3</desc>
			<log-file>step6.6.1.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
			-v "stream_maintance -onePort ${ixia.port2} -streamId all -maintanceOp disable"
			<!--ixia2.id4-->
			-v "traffic_configure_eth2 -portListIn ${ixia.port2}
				-mac_dst ${ixia.port3.mac}
				-mac_src ${ixia.port2.mac}
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 1024
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			<!--ixia2.id5-->
			-v "traffic_configure_eth2 -portListIn ${ixia.port2}
				-mac_dst ${ixia.port4.mac}
				-mac_src ${ixia.port2.mac}
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 1024
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 4 -transmitMethod advance -numFrames 5000000"
			-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 5 -transmitMethod stopStream -numFrames 5000000"
			
			-v "stream_percent_rate_set -portList ${ixia.port2} -streamId 4 -percentRate 80"
			-v "stream_percent_rate_set -portList ${ixia.port2} -streamId 5 -percentRate 80"
			
			-v "start_trans_getstats -txPortList ${ixia.port2} -rxPortList ${ixia.port1},${ixia.port3},${ixia.port4} -duration 20"
			-v ""
			</ssh>
		</step>
		<step no="6.6.2_check_result">
			<desc>check result with ixia port2 and port1</desc>
			<log-file>step6.6.2.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port2} -oneRxPort ${ixia.port1}"
			</ssh>
			<log-match>-e "cmp2 is 0"</log-match>
		</step>
		<step no="6.6.3_1_check_result">
			<desc>check result with ixia port2 and port3</desc>
			<log-file>step6.6.3.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port2} -oneRxPort ${ixia.port3}"
			</ssh>
		</step>
		<step no="6.6.3_2_check_result">
			<desc>get the number of frames</desc>
			<multi-setvar>
				echo sendall=$(/opt/Mainline/bin/getbyrexp.py -f ${log.dir}/step6.6.3.log -p 'cmp1 is (\d+)' -t str)
				echo receive=$(/opt/Mainline/bin/getbyrexp.py -f ${log.dir}/step6.6.3.log -p 'cmp2 is (\d+)' -t str)
			</multi-setvar>	
		</step>
		<step no="6.6.3_3_check_result">
			<desc>calculate send packages</desc>
			<setvar name="send">
				echo "${sendall}/2"|bc
			</setvar>
		</step>
		<step no="6.6.3_4_check_result">
			<desc>receive shoud equal with send</desc>
			<script>
				echo ${send} ${receive} | awk '{
				if ( $1 == $2)
				{exit(0);}
				else
				{exit(1);}
				}'
			</script>
		</step>
		
		<step no="6.6.4_check_result">
			<log-file>step6.6.4_log.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port2} -oneRxPort ${ixia.port4}"
			</ssh>
			<log-match>-e "cmp2 is 5000000"</log-match>
		</step>	
		
	</stage>

	<stage no="unicast_verification_6.7">
		<step no="6.7.1_send_frames">
			<desc>ixia3 send frames to ixia1,2</desc>
			<log-file>step6.7.1_sf.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
				-v "stream_maintance -onePort ${ixia.port3} -streamId all -maintanceOp disable"
				<!--ixia3.id3-->
				-v "traffic_configure_eth2 -portListIn ${ixia.port3}
					-mac_dst ${ixia.port1.mac}
					-mac_src ${ixia.port3.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 32
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				<!--ixia3.id4-->
				-v "traffic_configure_eth2 -portListIn ${ixia.port3}
					-mac_dst ${ixia.port2.mac}
					-mac_src ${ixia.port3.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 64
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				-v "stream_maintance -onePort ${ixia.port3} -streamId all -streamId 3 -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port3} -streamId all -streamId 4 -maintanceOp enable"
				
				-v "stream_transmit_method_set -portList ${ixia.port3} -streamId 3 -transmitMethod advance -numFrames 5000000"
				-v "stream_transmit_method_set -portList ${ixia.port3} -streamId 4 -transmitMethod stopStream -numFrames 5000000"
				
				-v "stream_percent_rate_set -portList ${ixia.port3} -streamId 3 -percentRate 80"
				-v "stream_percent_rate_set -portList ${ixia.port3} -streamId 4 -percentRate 80"
				
				-v "start_trans_getstats -txPortList ${ixia.port3} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port4} -duration 10"
				-v ""
			</ssh>
		</step>
		<step no="6.7.2_check_result">
			<desc>check result with ixia port3 and port1</desc>
			<log-file>step6.7.2_cr.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port3} -oneRxPort ${ixia.port1}"
			</ssh>
			<log-match>-e "cmp2 is 5000000"</log-match>
		</step>
		<step no="6.7.3_check_result">
			<desc>check result with ixia port3 and port2</desc>
			<log-file>step6.7.3_cr.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port3} -oneRxPort ${ixia.port2}"
			</ssh>
			<log-match>-e "cmp2 is 5000000"</log-match>
		</step>
		<step no="6.7.4_check_result">
			<desc>check result with ixia port3 and port4</desc>
			<log-file>step6.7.4_cr.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port3} -oneRxPort ${ixia.port4}"
			</ssh>
			<log-match>-e "cmp2 is 0"</log-match>
		</step>		
	</stage>
	
	<stage no="unicast_verification_6.8">
		<step no="6.8.1_send_frames">
			<desc>ixia4 send frames to ixia1,2</desc>
			<log-file>step6.8.1.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
				-v "stream_maintance -onePort ${ixia.port4} -streamId all -maintanceOp disable"
				<!--ixia4.id3-->
				-v "traffic_configure_eth2 -portListIn ${ixia.port4}
					-mac_dst ${ixia.port1.mac}
					-mac_src ${ixia.port4.mac}
					-vlan enable
					-vlan_id ${vlan.group1.start}
					-vlan_repeatCount 64
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				<!--ixia4.id4-->
				-v "traffic_configure_eth2 -portListIn ${ixia.port4}
					-mac_dst ${ixia.port2.mac}
					-mac_src ${ixia.port4.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-frame_length 64
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				
				-v "stream_transmit_method_set -portList ${ixia.port4} -streamId 3 -transmitMethod advance -numFrames 5000000"
				-v "stream_transmit_method_set -portList ${ixia.port4} -streamId 4 -transmitMethod stopStream -numFrames 5000000"
				
				-v "stream_percent_rate_set -portList ${ixia.port4} -streamId 3 -percentRate 80"
				-v "stream_percent_rate_set -portList ${ixia.port4} -streamId 4 -percentRate 80"
				
				-v "start_trans_getstats -txPortList ${ixia.port4} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3} -duration 10"
				-v ""
			</ssh>
		</step>
		<step no="6.8.2_check_result">
			<desc>check result with ixia port4 and port1</desc>
			<log-file>step6.8.2_cr.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port4} -oneRxPort ${ixia.port1}"
			</ssh>
			<log-match>-e "cmp2 is 5000000"</log-match>
		</step>
		<step no="6.8.3_check_result">
			<desc>check result with ixia port4 and port2</desc>
			<log-file>step6.8.3_cr.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-6">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port4} -oneRxPort ${ixia.port2}"
			</ssh>
			<log-match>-e "cmp2 is 5000000"</log-match>
		</step>
		<step no="6.8.4_check_result">
			<desc>check result with ixia port4 and port3</desc>
			<log-file>step6.8.4_cr.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-close="${job.user}-${job.sid}-6">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port4} -oneRxPort ${ixia.port3}"
			</ssh>
			<log-match>-e "cmp2 is 0"</log-match>
		</step>		
	</stage>
	
	<stage no="unicast_verification_6.9">
		<step no="6.9.1_cg-idle-timeout">
			<desc>set mac idle timeout with default</desc>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "no mac-address-table idle-timeout"
			</console>
		</step>
		<step no="6.9.2_cg-idle-timeout">
			<desc>set mac idle timeout with default</desc>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "no mac-address-table idle-timeout"
			</console>
		</step>
		<step no="6.9.3_cg-idle-timeout">
			<desc>set mac idle timeout with default</desc>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "no mac-address-table idle-timeout"
			</console>
		</step>
		<step no="6.9.4_cg-idle-timeout">
			<desc>set mac idle timeout with default</desc>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "no mac-address-table idle-timeout"
			</console>
		</step>
	</stage>

	<stage no="mac_idle-timeout_7.1">
		<step no="7.1.1_send_LearningFrame">
			<desc>ixia.port4 send learning frames</desc>
			<log-file>step7.1.1_log.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-new="${job.user}-${job.sid}-7">
			-v "tclsh8.5"
			-v "package req ixia"
			-v "ah_ixia_connect -chassisIP ${pub.chassis1.ip} 
				-userName ${job.user}${job.sid} 
				-tclServerIP ${pri.tclserver.ip} 
				-portList ${sw1.port1.ixia_port},${sw1.port2.ixia_port},${sw1.port3.ixia_port},${sw1.port4.ixia_port}
				-phyList ${sw1.port1.phytype},${sw1.port2.phytype},${sw1.port3.phytype},${sw1.port4.phytype}"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port4}
				-mac_dst ffff.ffff.ffff
				-mac_src ${ixia.port4.mac}
				-vlan enable
				-vlan_id ${vlan.group1.start}
				-vlan_repeatCount 128
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 1024
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port4}
				-mac_dst ffff.ffff.ffff
				-mac_src ${ixia.port4.mac}
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 1024
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "after 60000"
			-v "start_trans_getstats -txPortList ${ixia.port4} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3}" 
			-v ""
			</ssh>
		</step>
		<step no="7.1.2_sf">
			<desc>ixia1 send frames to ixia4 for 5 minutes</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="400" session-get="${job.user}-${job.sid}-7">
			-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp disable"
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port1}
				-mac_dst ${ixia.port4.mac}
				-mac_src ${ixia.port1.mac}
				-vlan enable
				-vlan_id ${vlan.group1.start}
				-vlan_repeatCount 64
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD	
				-rate_pps 1024
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			-v "traffic_configure_eth2 -portListIn ${ixia.port1}
				-mac_dst ${ixia.port4.mac}
				-mac_src ${ixia.port1.mac}
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD	
				-rate_pps 1024
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			<!-- drop
			-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 1 -transmitMethod advance -numFrames 128"
			-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 2 -transmitMethod stopStream -numFrames 1024"
			-->
			-v "start_trans_getstats -txPortList ${ixia.port1} -rxPortList ${ixia.port4},${ixia.port2},${ixia.port3} -duration 290"
			</ssh>
		</step>
		<step no="7.1.3_cr">
			<desc>check result with ixia port1 and port2</desc>
			<log-file>step7.1.3_cr.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-7">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port2}"
			</ssh>
			<log-match>-e "cmp2 is 0"</log-match>
		</step>
		<step no="7.1.4_cr">
			<desc>check result with ixia port1 and port3</desc>
			<log-file>step7.1.4_cr.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-7">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port3}"
			</ssh>
			<log-match>-e "cmp2 is 0"</log-match>
		</step>
		<!--  this step need to run-->
		<step no="7.1.5_cr">
			<desc>check result with ixia port1 and port4</desc>
			<log-file>step7.1.5_log.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-7">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port4}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port4} framesSent userDefinedStat2 result is equal"</log-match>
		</step>
		
		<step no="7.1.6_sf">
			<desc>ixia1 send frames to ixia4 after mac aged out</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="600" session-get="${job.user}-${job.sid}-7">
			-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp disable"
			<!-- need to run this flow-->
			-v "traffic_configure_eth2 -portListIn ${ixia.port1}
				-mac_dst ${ixia.port4.mac}
				-mac_src ${ixia.port1.mac}
				-vlan enable
				-vlan_id ${vlan.group2.start}
				-vlan_repeatCount 32
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD	
				-rate_pps 1024
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port1}
				-mac_dst ${ixia.port4.mac}
				-mac_src ${ixia.port1.mac}
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD	
				-rate_pps 1024
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
				
			-v "traffic_configure_eth2 -portListIn ${ixia.port2},${ixia.port3},${ixia.port4}
				-mac_dst ffff.ffff.ffff
				-mac_src ${ixia.port2.mac}
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 1024
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "after 330000"
			-v "start_trans_getstats -txPortList ${ixia.port1} -rxPortList ${ixia.port2},${ixia.port3},${ixia.port4}"
			</ssh>
		</step>
		<step no="7.1.7_cr">
			<desc>check result with ixia port1 and port2</desc>
			<log-file>step7.1.3_cr.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-7">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port2}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port2} framesSent userDefinedStat2 result is equal"</log-match>
		</step>
		<step no="7.1.8_cr">
			<desc>check result with ixia port1 and port3</desc>
			<log-file>step7.1.4_cr.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-7">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port3}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port3} framesSent userDefinedStat2 result is equal"</log-match>
		</step>
		<step no="7.1.9_cr">
			<desc>check result with ixia port1 and port4</desc>
			<log-file>step7.1.5_cr.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-close="${job.user}-${job.sid}-7">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port4}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port4} framesSent userDefinedStat2 result is equal"</log-match>
		</step>
	</stage>
	
	<stage type="child-process" no="7.2_show_mac_dut1">
		<step no="7.2.1_show_mac_dut1">
			<desc>show and clear mac address on dut1</desc>
			<log-file>7.2.1_mac_1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}" timeout="300">
				-v "clear mac-address all"
				-v "show mac-address all"
			</console>
		</step>
	</stage>
	<stage type="child-process" no="7.2_show_mac_dut2">
		<step no="7.2.2_show_mac_dut2">
			<desc>show and clear mac address on dut2</desc>
			<log-file>7.2.2mac_2.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}" timeout="300">
				-v "clear mac-address all"
				-v "show mac-address all"
			</console>
		</step>
	</stage>
	<stage type="child-process" no="7.2_show mac dut3">
		<step no="7.2.3_show mac dut3">
			<desc>show and clear mac address on dut3</desc>
			<log-file>7.2.3_mac_3.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}" timeout="300">
				-v "clear mac-address all"
				-v "show mac-address all"
			</console>
		</step>
	</stage>
	<stage type="child-process" no="7.2_show mac_dut4">
		<step no="7.2.4_show mac dut4">
			<desc>show and clear mac address on dut4</desc>
			<log-file>7.2.4_mac_4.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}" timeout="300">
				-v "clear mac-address all"
				-v "show mac-address all"
			</console>
		</step>
	</stage>
	
	<stage type="check-point"/>
	
	<stage no="Specific_MAC_multicast_8.1">
		<step no="send_src_multicast_8.1.1">
			<desc>src-mac is multicast, shouldn't be learned</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-new="${job.user}-${job.sid}-8">
			-v "tclsh8.5"
			-v "package req ixia"
			-v "ah_ixia_connect -chassisIP ${pub.chassis1.ip} 
				-userName ${job.user}${job.sid} 
				-tclServerIP ${pri.tclserver.ip} 
				-portList ${sw1.port1.ixia_port},${sw1.port2.ixia_port},${sw1.port3.ixia_port},${sw1.port4.ixia_port}
				-phyList ${sw1.port1.phytype},${sw1.port2.phytype},${sw1.port3.phytype},${sw1.port4.phytype}"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port1}
				-mac_dst ffff:ffff:ffff
				-mac_src 0180:c200:0000
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 1024
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			-v "traffic_configure_eth2 -portListIn ${ixia.port2},${ixia.port3},${ixia.port4}
				-mac_dst ffff:ffff:ffff
				-mac_src 0180:c200:0000
				-vlan enable
				-vlan_id ${vlan.group1.start}
				-vlan_repeatCount 128
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD	
				-rate_pps 1024
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 2 -transmitMethod advance -numFrames 1024"
			-v "stream_percent_rate_set -portList ${ixia.port4} -streamId 2  -percentRate 80"
			
			-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port4} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4}"
			</ssh>
		</step>
		<step no="check_src_multicast_8.1.2">
			<desc>check frames result</desc>
			<log-file>step8.1.2_log.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-8">
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent -rxPortList ${ixia.port1} -rxStParaList userDefinedStat2,userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent -rxPortList ${ixia.port2} -rxStParaList userDefinedStat2,userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent -rxPortList ${ixia.port3} -rxStParaList userDefinedStat2,userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent -rxPortList ${ixia.port4} -rxStParaList userDefinedStat2,userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port1} is 0"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port2} is 0"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port3} is 0"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port4} is 0"</log-match>
		</step>
		<step no="show mac_8.1.3_1">
			<desc>show mac on dut1</desc>
			<log-file>step8.1.3_1_log.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show mac-address all"
			</console>
			<log-match>-n -i "0180:c200:0000"</log-match>
		</step>
		<step no="show mac_8.1.3_2">
			<desc>show mac on dut2</desc>
			<log-file>step8.1.3_2_log.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "show mac-address all"
			</console>
			<log-match>-n -i "0180:c200:0000"</log-match>
		</step>
		<step no="show mac_8.1.3_3">
			<desc>show mac on dut3</desc>
			<log-file>step8.1.3_3_log.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show mac-address all"
			</console>
			<log-match>-n -i "0180:c200:0000"</log-match>
		</step>
		<step no="show mac_8.1.3_4">
			<desc>show mac on dut4</desc>
			<log-file>step8.1.3_4_log.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show mac-address all"
			</console>
			<log-match>-n -i "0180:c200:0000"</log-match>
		</step>
	</stage>
	
	<stage no="Specific_MAC_broadcast_8.2">
		<step no="send_src_broadcast_8.2.1">
			<desc>src-mac is broadcast, shouldn't be learned</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-8">
			-v "traffic_configure_eth2 -portListIn ${ixia.port1}
				-mac_dst 0100:5e00:0001
				-mac_src ffff:ffff:ffff
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD	
				-rate_pps 1024
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			-v "traffic_configure_eth2 -portListIn ${ixia.port4}
				-mac_dst 0100:5e00:0001
				-mac_src 0180:c200:0000
				-vlan enable
				-vlan_id ${vlan.group1.start}
				-vlan_repeatCount 128
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD	
				-rate_pps 1024
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 1 -transmitMethod advance -numFrames 1024"
			-v "stream_percent_rate_set -portList ${ixia.port4} -streamId 1  -percentRate 80"
			
			-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port4} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4}"
			</ssh>
		</step>
		<step no="check_src_broadticast_8.2.2">
			<desc>check frames result</desc>
			<log-file>step8.2.2_log.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-8">
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent -rxPortList ${ixia.port1} -rxStParaList userDefinedStat2,userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent -rxPortList ${ixia.port2} -rxStParaList userDefinedStat2,userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent -rxPortList ${ixia.port3} -rxStParaList userDefinedStat2,userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent -rxPortList ${ixia.port4} -rxStParaList userDefinedStat2,userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port1} is 0"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port2} is 0"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port3} is 0"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port4} is 0"</log-match>
		</step>
		<step no="show mac_8.2.3_1">
			<desc>show mac on dut1</desc>
			<log-file>step8.2.3_1_log.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show mac-address all"
			</console>
			<log-match>-n -i "ffff:ffff:ffff"</log-match>
		</step>
		<step no="show mac_8.2.3_2">
			<desc>show mac on dut2</desc>
			<log-file>step8.2.3_2_log.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "show mac-address all"
			</console>
			<log-match>-n -i "ffff:ffff:ffff"</log-match>
		</step>
		<step no="show mac_8.2.3_3">
			<desc>show mac on dut3</desc>
			<log-file>step8.2.3_3_log.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show mac-address all"
			</console>
			<log-match>-n -i "ffff:ffff:ffff"</log-match>
		</step>
		<step no="show mac_8.2.3_4">
			<desc>show mac on dut4</desc>
			<log-file>step8.2.3_4_log.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show mac-address all"
			</console>
			<log-match>-n -i "ffff:ffff:ffff"</log-match>
		</step>
	</stage>
	
	<stage no="Specific_MAC_allzero_8.3">
		<step no="send_src_multicast_8.3.1">
			<desc>src-mac is allzero, shouldn't be learned</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-8">
			-v "traffic_configure_eth2 -portListIn ${ixia.port1}
				-mac_dst 0180:c200:0000
				-mac_src 0000:0000:0000
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-rate_pps 1024
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			-v "traffic_configure_eth2 -portListIn ${ixia.port4}
				-mac_dst 0180:c200:0000
				-mac_src 0000:0000:0000
				-vlan enable
				-vlan_id ${vlan.group1.start}
				-vlan_repeatCount 128
				-eth2_protocol ${stream1.etype}
				-frame_length 64
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD	
				-rate_pps 1024
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 1 -transmitMethod advance -numFrames 1024"
			-v "stream_percent_rate_set -portList ${ixia.port4} -streamId 1  -percentRate 80"
			
			-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port4} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4}"
			</ssh>
		</step>
		<step no="check_src_multicast_8.3.2">
			<desc>check frames result</desc>
			<log-file>step8.3.2_log.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-8">
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent -rxPortList ${ixia.port1} -rxStParaList userDefinedStat2,userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent -rxPortList ${ixia.port2} -rxStParaList userDefinedStat2,userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent -rxPortList ${ixia.port3} -rxStParaList userDefinedStat2,userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent -rxPortList ${ixia.port4} -rxStParaList userDefinedStat2,userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port1} is 0"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port2} is 0"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port3} is 0"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port4} is 0"</log-match>
		</step>
		<step no="show mac_8.3.3_1">
			<desc>show mac on dut1</desc>
			<log-file>step8.3.3_1_log.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show mac-address all"
			</console>
			<log-match>-n -i "0000:0000:0000"</log-match>
		</step>
		<step no="show mac_8.3.3_2">
			<desc>show mac on dut2</desc>
			<log-file>step8.3.3_2_log.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "show mac-address all"
			</console>
			<log-match>-n -i "0000:0000:0000"</log-match>
		</step>
		<step no="show mac_8.3.3_3">
			<desc>show mac on dut3</desc>
			<log-file>step8.3.3_3_log.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show mac-address all"
			</console>
			<log-match>-n -i "0000:0000:0000"</log-match>
		</step>
		<step no="show mac_8.3.3_4">
			<desc>show mac on dut4</desc>
			<log-file>step8.3.3_4_log.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show mac-address all"
			</console>
			<log-match>-n -i "0000:0000:0000"</log-match>
		</step>
	</stage>

	<stage no="src_dst_equal_8.4">
		<step no="send_src_dst_equal_8.4.1">
			<desc>src-mac is dst-mac, mac should be learned, flood first frame</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-8">
			-v "tclsh8.5"
			-v "package req ixia"
			-v "ah_ixia_connect -chassisIP ${pub.chassis1.ip} 
				-userName ${job.user}${job.sid} 
				-tclServerIP ${pri.tclserver.ip} 
				-portList ${sw1.port1.ixia_port},${sw1.port2.ixia_port},${sw1.port3.ixia_port},${sw1.port4.ixia_port}
				-phyList ${sw1.port1.phytype},${sw1.port2.phytype},${sw1.port3.phytype},${sw1.port4.phytype}"
			-v ""
			
			-v "traffic_configure_eth2 -portListIn ${ixia.port1}
				-mac_dst ${ixia.port1.mac}
				-mac_src ${ixia.port1.mac}
				-vlan disable
				-eth2_protocol ${stream1.etype}
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-frame_length 64
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			-v "traffic_configure_eth2 -portListIn ${ixia.port2},${ixia.port3},${ixia.port4}
				-mac_dst ${ixia.port4.mac}
				-mac_src ${ixia.port4.mac}
				-vlan enable
				-vlan_id ${vlan.group1.start}
				-vlan_repeatCount 128
				-eth2_protocol ${stream1.etype}
				-udf_offset ${stream1.UDFoffset}
				-udf_value 0xBDBDBDBD
				-frame_length 64
				-rate_pps 256
				-patternOffset2 ${stream1.patternOffset2}
				-rxPattern 0xBDBDBDBD"
			-v ""
			
			-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 1 -transmitMethod stopStream -numBursts 4 -numFrames 256"
			-v "stream_transmit_method_set -portList ${ixia.port4} -streamId 1 -transmitMethod stopStream -numBursts 4 -numFrames 256"
			
			-v "after 60000"
			
			-v "start_transmit -portList ${ixia.port1},${ixia.port4} -firstTryFlag false"
			-v "after 6000"
			
			-v "get_statistic -txPortList ${ixia.port1},${ixia.port4} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4}"
			-v ""
			</ssh>
		</step>
		<step no="check_src_multicast_8.4.2">
			<desc>check frames result</desc>
			<log-file>step8.4.2_log.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-close="${job.user}-${job.sid}-8">
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent -rxPortList ${ixia.port1} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent -rxPortList ${ixia.port2} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent -rxPortList ${ixia.port3} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent -rxPortList ${ixia.port4} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port1} is 64"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port2} is 65"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port3} is 97"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port4} is 1"</log-match>
		</step>
		<step no="show_mac_8.4.3_1">
			<desc>show mac on dut1</desc>
			<log-file>step8.4.3_1_log.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show mac-address all"
			</console>
			<log-match>-p 3 -i "${ixia.port1.mac}"</log-match>
		</step>
		<step no="check_mac_8.4.3_2">
			<desc>check mac on dut1</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port4.mac} 1 2033 96 ${log.dir} ${case.name} step8.4.3_1_log.log 8.4.3_2
			</script>
			<log-file>checkmac-8.4.3_2.log</log-file>
		</step>
		<step no="show_mac_8.4.4_1">
			<desc>show mac on dut2</desc>
			<log-file>step8.4.4_1_log.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "show mac-address all"
			</console>
			<log-match>-p 3 -i "${ixia.port1.mac}"</log-match>
		</step>
		<step no="check_mac_8.4.4_2">
			<desc>check mac on dut2</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port4.mac} 1 2033 96 ${log.dir} ${case.name} step8.4.4_1_log.log 8.4.4_2
			</script>
			<log-file>checkmac-8.4.4_2.log</log-file>
		</step>
		<step no="show_mac_8.4.5_1">
			<desc>show mac on dut3</desc>
			<log-file>step8.4.5_1_log.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show mac-address all"
			</console>
			<log-match>-p 3 -i "${ixia.port1.mac}"</log-match>
		</step>
		<step no="check_mac_8.4.5_2">
			<desc>check mac on dut3</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port4.mac} 1 2033 96 ${log.dir} ${case.name} step8.4.5_1_log.log 8.4.5_2
			</script>
			<log-file>checkmac-8.4.5_2.log</log-file>
		</step>
		<step no="show_mac_8.4.6_1">
			<desc>show mac on dut4</desc>
			<log-file>step8.4.6_1_log.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show mac-address all"
			</console>
			<log-match>-p 3 -i "${ixia.port1.mac}"</log-match>
		</step>
		<step no="check_mac_8.4.6_2">
			<desc>check mac on dut4</desc>
			<script timeout="1000">
				${case.dir}/bin/maccheck.sh ${ixia.port4.mac} 1 2033 96 ${log.dir} ${case.name} step8.4.6_1_log.log 8.4.6_2
			</script>
			<log-file>checkmac-8.4.6_2.log</log-file>
		</step>
	</stage>

	<stage no="clear_mac_8.5">
		<step no="clear_mac_8.5.1">
			<desc>clear mac_address on dut1</desc>
			<log-file>step8.5.1_log.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "clear mac-address all"
				-v "show mac-address all"
			</console>
			<log-match>-n -i "${ixia.port4.mac}"</log-match>
		</step>
		<step no="clear_mac_8.5.2">
			<desc>clear mac_address on dut2</desc>
			<log-file>step8.5.2_log.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "clear mac-address all"
				-v "show mac-address all"
			</console>
			<log-match>-n -i "${ixia.port4.mac}"</log-match>
		</step>
		<step no="clear_mac_8.5.3">
			<desc>clear mac_address on dut3</desc>
			<log-file>step8.5.3_log.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "clear mac-address all"
				-v "show mac-address all"
			</console>
			<log-match>-n -i "${ixia.port4.mac}"</log-match>
		</step>
		<step no="clear_mac_8.5.4">
			<desc>clear mac_address on dut4</desc>
			<log-file>step8.5.4_log.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "clear mac-address all"
				-v "show mac-address all"
			</console>
			<log-match>-n -i "${ixia.port4.mac}"</log-match>
		</step>
	</stage>	

	<stage no="STP_Verification_9.1">
		<!--delay-->
		<step no="9.1.1_ini_stp_dut1" delay="50">
			<desc>check initial stp status on dut1</desc>
			<log-file>9.1.1_stp_dut1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut1.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut1.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
		</step>
		<step no="9.1.2_ini_stp_dut2">
			<desc>check initial stp status on dut2</desc>
			<log-file>9.1.2_stp_dut2.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut2.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut2.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
		</step>
		<step no="9.1.3_ini_stp_dut3">
			<desc>check initial stp status on dut3</desc>
			<log-file>9.1.3_stp_dut3.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut3.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut3.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg29" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg30" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.1.4_ini_stp_dut4">
			<desc>check initial stp status on dut4</desc>
			<log-file>9.1.4_stp_dut4.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut4.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut4.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
			<log-match>-p 1 -i "agg2" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg3" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.1.5_ini_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.1.5_stp_cisco.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 1"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
		<step no="9.1.6_ini_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.1.6_stp_cisco.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 2010"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
	</stage>

<!--shutdown SR2024 agg1 -->
	<stage no="STP_Verification_9.2">
		<step no="new_session">
			<desc>new a session</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-new="${job.user}-${job.sid}-9">
				-v "tclsh8.5"
				-v "package req ixia"
				-v "ah_ixia_connect -chassisIP ${pub.chassis1.ip} 
					-userName ${job.user}${job.sid} 
					-tclServerIP ${pri.tclserver.ip} 
					-portList ${sw1.port1.ixia_port},${sw1.port2.ixia_port},${sw1.port3.ixia_port},${sw1.port4.ixia_port}
					-phyList ${sw1.port1.phytype},${sw1.port2.phytype},${sw1.port3.phytype},${sw1.port4.phytype}"
				-v ""
			</ssh>
		</step>
	</stage>
	
	<stage type="child-process" no="STP_Verification_9.2_1">
		<step no="9.2.1_bg_traffic">
			<desc>start background traffic</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-9">
				-v "traffic_configure_eth2 -portListIn ${ixia.port1}
					-mac_dst ffff:ffff:ffff
					-mac_src ${ixia.port1.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				-v "traffic_configure_eth2 -portListIn ${ixia.port2}
					-mac_dst ffff:ffff:ffff
					-mac_src ${ixia.port2.mac}
					-vlan disable
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				
				-v "stream_percent_rate_set -portList ${ixia.port1} -streamId 1  -percentRate 80"
				-v "stream_percent_rate_set -portList ${ixia.port2} -streamId 1  -percentRate 80"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port2} -rxPortList ${ixia.port1},${ixia.port2} -duration 90"
			</ssh>
		</step>
	</stage>
	<stage type="child-process" no="STP_Verification_9.2_2">
		<step no="9.2.2_shut_agg1" delay="30">
			<desc>shutdown sr2024 agg1</desc>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "interface agg1 shutdown"
			</console>
		</step>
		<step no="9.2.3_1_stp_dut1" delay="50">
			<desc>check initial status on dut1</desc>
			<log-file>9.2.3_1_show_stp.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut1.port1}" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut1.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
		</step>
		<step no="9.2.3_2_stp_dut2">
			<desc>check initial stp status on dut2</desc>
			<log-file>9.2.3_2_show_stp.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut2.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut2.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
		</step>
		<step no="9.2.3_3_stp_dut3">
			<desc>check initial stp status on dut3</desc>
			<log-file>9.2.3_3_show_stp.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut3.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut3.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg29" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg30" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.2.3_4_stp_dut4">
			<desc>check initial stp status on dut4</desc>
			<log-file>9.2.3_4_show_stp.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut4.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut4.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
			<log-match>-p 1 -i "agg2" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg3" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.2.3_5_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.2.3_5_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 1"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
		<step no="9.2.3_6_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.2.3_6_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 2023"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
	</stage>
	
	<stage type="check-point"/>

	<stage no="STP_Verification_9.2_3">
		<step no="9.2.4_check_frames">
			<desc>check frames result</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-9">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port2}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port2} framesSent userDefinedStat2 result is not equal"</log-match>
		</step>
		<step no="9.2.5_test_traffic">
			<desc>check frames result</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-9">
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port2} -rxPortList ${ixia.port1},${ixia.port2}"
				
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId all -maintanceOp disable"
			
				-v "traffic_configure_eth2 -portListIn ${ixia.port1}
					-mac_dst ${ixia.port2.mac}
					-mac_src ${ixia.port1.mac}
					-vlan disable
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				-v "traffic_configure_eth2 -portListIn ${ixia.port1}
					-mac_dst 0000:0300:0002
					-mac_src ${ixia.port1.mac}
					-vlan disable
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				-v "traffic_configure_eth2 -portListIn ${ixia.port2}
					-mac_dst ${ixia.port1.mac}
					-mac_src ${ixia.port2.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				-v "traffic_configure_eth2 -portListIn ${ixia.port2},${ixia.port3},${ixia.port4}
					-mac_dst 0000:0300:0002
					-mac_src ${ixia.port2.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 3 -transmitMethod stopStream -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 3 -transmitMethod stopStream -numFrames 100"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port2} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4} -duration 10"
				
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port1} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port2} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port3} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port4} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port1} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port2} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port3} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port4} is 200"</log-match>
		</step>
	</stage>

	<!-- no showdown SR2024 agg1-->
	<stage type="child-process" no="STP_Verification_9.3_1">
		<step no="9.3.1_bg_traffic">
			<desc>start background traffic</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId 1 -maintanceOp enable"
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 1 -transmitMethod contPacket"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 1 -transmitMethod contPacket"
				
				-v "stream_percent_rate_set -portList ${ixia.port1} -streamId 1  -percentRate 80"
				-v "stream_percent_rate_set -portList ${ixia.port2} -streamId 1  -percentRate 80"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port2} -rxPortList ${ixia.port1},${ixia.port2} -duration 90"
			</ssh>
		</step>
	</stage>
	<stage type="child-process" no="STP_Verification_9.3_2">
		<step no="9.3.2_noshut_agg1" delay="30">
			<desc>NO shutdown sr2024 agg1</desc>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "no interface agg1 shutdown"
			</console>
		</step>
		<step no="9.3.3_1_stp_dut1" delay="50" >
			<desc>check status on dut1</desc>
			<log-file>9.3.3_1_show_stp.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut1.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut1.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
		</step>
		<step no="9.3.3_2_stp_dut2" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut2</desc>
			<log-file>9.3.3_2_show_stp.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut2.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut2.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
		</step>
		<step no="9.3.3_3_stp_dut3" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut3</desc>
			<log-file>9.3.3_3_show_stp.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut3.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut3.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg29" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg30" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.3.3_4_stp_dut4" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut4</desc>
			<log-file>9.3.3_4_show_stp.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut4.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut4.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
			<log-match>-p 1 -i "agg2" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg3" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.3.3_5_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.3.3_5_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 1"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
		<step no="9.3.3_6_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.3.3_6_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 2034"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
		<step no="9.3.4_check_frames" delay="60">
			<desc>check frames result</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-9">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port2}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port2} framesSent userDefinedStat2 result is not equal"</log-match>
		</step>
		<!--delete
		<step no="added_1">
			<desc>check initial stp status on cisco</desc>
			<log-file>added.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show mac-address all | in 0000:0100:0001"
				-v "show mac-address all | in 0000:0200:0001"
				-v "mac-address idle-timeout 0"
			</console>
		</step>
		<step no="added_2">
			<desc>check initial stp status on cisco</desc>
			<log-file>added.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show mac-address all | in 0000:0100:0001"
				-v "show mac-address all | in 0000:0200:0001"
				-v "mac-address idle-timeout 0"
			</console>
		</step>
		-->
	</stage>

	<stage type="check-point"/>	

	<stage no="STP_Verification_9.3_3">
		<step no="9.3.5_test_traffic">
			<desc>send test frames</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="600" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId all -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId 1 -maintanceOp disable"
				
				-v "traffic_configure_eth2 -portListIn ${ixia.port3},${ixia.port4}
					-mac_dst 0000:0300:0002
					-mac_src ${ixia.port2.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 3 -transmitMethod stopStream -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 3 -transmitMethod stopStream -numFrames 100"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port2} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4} -duration 10"
				
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port1} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port2} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port3} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port4} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port1} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port2} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port3} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port4} is 200"</log-match>
		</step>
	</stage>

	<!--shutdown SR2024p agg1-->
	<stage type="child-process" no="STP_Verification_9.4_1">
		<step no="9.4.1_bg_traffic">
			<desc>start background traffic</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId 1 -maintanceOp enable"
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 1 -transmitMethod contPacket"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 1 -transmitMethod contPacket"
				
				-v "stream_percent_rate_set -portList ${ixia.port1} -streamId 1  -percentRate 80"
				-v "stream_percent_rate_set -portList ${ixia.port2} -streamId 1  -percentRate 80"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port2} -rxPortList ${ixia.port1},${ixia.port2} -duration 90"
			</ssh>
		</step>
	</stage>
	<stage type="child-process" no="STP_Verification_9.4_2">
		<step no="9.4.2_shut_agg1" delay="30">
			<desc>shutdown sr2024p agg1</desc>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "interface agg1 shutdown"
			</console>
		</step>
		<step no="9.4.3_1_stp_dut1" delay="50">
			<desc>check initial status on dut1</desc>
			<log-file>9.4.3_1_show_stp.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut1.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut1.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
		</step>
		<step no="9.4.3_2_stp_dut2" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut2</desc>
			<log-file>9.4.3_2_show_stp.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut2.port1}" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut2.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
		</step>
		<step no="9.4.3_3_stp_dut3" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut3</desc>
			<log-file>9.4.3_3_show_stp.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut3.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut3.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg29" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg30" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.4.3_4_stp_dut4" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut4</desc>
			<log-file>9.4.3_4_show_stp.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut4.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut4.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg2" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg3" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.4.3_5_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.4.3_5_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 1"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
		<step no="9.4.3_6_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.4.3_6_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 2110"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
		<step no="9.4.4_check_frames" delay="60">
			<desc>check frames result</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-9">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port2}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port2} framesSent userDefinedStat2 result is not equal"</log-match>
		</step>
	</stage>	

	<stage type="check-point"/>

	<stage no="STP_Verification_9.4_3">
		<step no="9.4.5_test_traffic">
			<desc>send test frames</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="600" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId all -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId 1 -maintanceOp disable"
				
				-v "traffic_configure_eth2 -portListIn ${ixia.port3},${ixia.port4}
					-mac_dst 0000:0300:0002
					-mac_src ${ixia.port2.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 3 -transmitMethod stopStream -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 3 -transmitMethod stopStream -numFrames 100"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port2} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4} -duration 10"
			
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port1} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port2} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port3} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port4} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port1} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port2} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port3} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port4} is 200"</log-match>
		</step>
	</stage>

	<!--no shutdown SR2024p agg1-->
	<stage type="child-process" no="STP_Verification_9.5_1">
		<step no="9.5.1_bg_traffic">
			<desc>start background traffic</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId 1 -maintanceOp enable"
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 1 -transmitMethod contPacket"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 1 -transmitMethod contPacket"
				
				-v "stream_percent_rate_set -portList ${ixia.port1} -streamId 1  -percentRate 80"
				-v "stream_percent_rate_set -portList ${ixia.port2} -streamId 1  -percentRate 80"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port2} -rxPortList ${ixia.port1},${ixia.port2} -duration 90"
			</ssh>
		</step>
	</stage>
	<stage type="child-process" no="STP_Verification_9.5_2">
		<step no="9.5.2_noshut_agg1" delay="30">
			<desc>NO shutdown sr2024p agg1</desc>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "no interface agg1 shutdown"
			</console>
		</step>
		<step no="9.5.3_1_stp_dut1" delay="50">
			<desc>check status on dut1</desc>
			<log-file>9.5.3_1_show_stp.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut1.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut1.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
		</step>
		<step no="9.5.3_2_stp_dut2" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut2</desc>
			<log-file>9.5.3_2_show_stp.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut2.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut2.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
		</step>
		<step no="9.5.3_3_stp_dut3" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut3</desc>
			<log-file>9.5.3_3_show_stp.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut3.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut3.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg29" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg30" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.5.3_4_stp_dut4" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut4</desc>
			<log-file>9.5.3_4_show_stp.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut4.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut4.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
			<log-match>-p 1 -i "agg2" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg3" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.5.3_5_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.5.3_5_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 1"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
		<step no="9.5.3_6_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.5.3_6_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 2069"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
		<step no="9.5.4_check_frames" delay="60">
			<desc>check frames result</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-9">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port2}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port2} framesSent userDefinedStat2 result is not equal"</log-match>
		</step>
	</stage>
	<stage type="check-point"/>

	<stage no="STP_Verification_9.5_3">
		<step no="9.5.5_test_traffic">
			<desc>send test frames</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="600" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId all -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId 1 -maintanceOp disable"
				
				-v "traffic_configure_eth2 -portListIn ${ixia.port3},${ixia.port4}
					-mac_dst 0000:0300:0002
					-mac_src ${ixia.port2.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 3 -transmitMethod stopStream -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 3 -transmitMethod stopStream -numFrames 100"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port2} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4} -duration 10"
				
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port1} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port2} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port3} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port4} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port1} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port2} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port3} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port4} is 200"</log-match>
		</step>
	</stage>

	<!--shutdown SR2124P agg29-->
	<stage no="STP_Verification_9.6_1">
		<step no="9.6.1_create_bg_traffic">
			<desc>start background traffic</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-9">
				-v "ah_ixia_connect -chassisIP ${pub.chassis1.ip} 
					-userName ${job.user}${job.sid} 
					-tclServerIP ${pri.tclserver.ip} 
					-portList ${sw1.port1.ixia_port},${sw1.port2.ixia_port},${sw1.port3.ixia_port},${sw1.port4.ixia_port}
					-phyList ${sw1.port1.phytype},${sw1.port2.phytype},${sw1.port3.phytype},${sw1.port4.phytype}"
				-v ""
				
				-v "traffic_configure_eth2 -portListIn ${ixia.port2}
					-mac_dst ffff:ffff:ffff
					-mac_src ${ixia.port2.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				-v "traffic_configure_eth2 -portListIn ${ixia.port3}
					-mac_dst ffff:ffff:ffff
					-mac_src ${ixia.port3.mac}
					-vlan disable
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				
				-v "stream_percent_rate_set -portList ${ixia.port2} -streamId 1  -percentRate 80"
				-v "stream_percent_rate_set -portList ${ixia.port3} -streamId 1  -percentRate 80"
			</ssh>
		</step>
	</stage>

	<stage type="child-process" no="STP_Verification_9.6_1.1">
		<step no="9.6.1_start_bg_traffic">
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-9">
				-v "after 60000"
				-v "start_trans_getstats -txPortList ${ixia.port2},${ixia.port3} -rxPortList ${ixia.port2},${ixia.port3} -duration 90"
			</ssh>
		</step>
	</stage>
	<stage type="child-process" no="STP_Verification_9.6_2">
		<step no="9.6.2_shut_agg29" delay="90" timeout="120">
			<desc>shutdown sr2124p agg29</desc>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "interface agg29 shutdown"
			</console>
		</step>
		<step no="9.6.3_1_stp_dut1" delay="50">
			<desc>check initial status on dut1</desc>
			<log-file>9.6.3_1_show_stp.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut1.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut1.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
		</step>
		<step no="9.6.3_2_stp_dut2" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut2</desc>
			<log-file>9.6.3_2_show_stp.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut2.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut2.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
		</step>
		<step no="9.6.3_3_stp_dut3" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut3</desc>
			<log-file>9.6.3_3_show_stp.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut3.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut3.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg30" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.6.3_4_stp_dut4" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut4</desc>
			<log-file>9.6.3_4_show_stp.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut4.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut4.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
			<log-match>-p 1 -i "agg2" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg3" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.6.3_5_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.6.3_5_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 1"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
		<step no="9.6.3_6_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.6.3_6_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 2121"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
	</stage>
	<stage type="check-point"/>

	<stage no="STP_Verification_9.6_3">
		<step no="9.6.4_check_frames">
			<desc>check frames result</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-9">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port2} -oneRxPort ${ixia.port3}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port2} ${ixia.port3} framesSent userDefinedStat2 result is not equal"</log-match>
		</step>
		<step no="9.6.5_test_traffic">
			<desc>send test frames</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="600" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port2} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port3} -streamId all -maintanceOp disable"
				
				-v "traffic_configure_eth2 -portListIn ${ixia.port2}
					-mac_dst ${ixia.port3.mac}
					-mac_src ${ixia.port2.mac}
					-vlan disable
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				-v "traffic_configure_eth2 -portListIn ${ixia.port2}
					-mac_dst 0000:0300:0002
					-mac_src ${ixia.port2.mac}
					-vlan disable
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				-v "traffic_configure_eth2 -portListIn ${ixia.port3}
					-mac_dst ${ixia.port2.mac}
					-mac_src ${ixia.port3.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				-v "traffic_configure_eth2 -portListIn ${ixia.port1},${ixia.port3},${ixia.port4}
					-mac_dst 0000:0200:0002
					-mac_src ${ixia.port3.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 3 -transmitMethod stopStream -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port3} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port3} -streamId 3 -transmitMethod stopStream -numFrames 100"
				
				-v "start_trans_getstats -txPortList ${ixia.port2},${ixia.port3} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4} -duration 10"
				
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port2},${ixia.port3} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port1} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port2},${ixia.port3} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port2} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port2},${ixia.port3} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port3} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port2},${ixia.port3} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port4} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port1} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port2} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port3} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port4} is 200"</log-match>
		</step>
	</stage>

	<!--no shutdown sR2124p agg29-->
	<stage type="child-process" no="STP_Verification_9.7_1">
		<step no="9.7.1_bg_traffic">
			<desc>start background traffic</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port2} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port3} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId 1 -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port3} -streamId 1 -maintanceOp enable"
				
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 1 -transmitMethod contPacket"
				-v "stream_transmit_method_set -portList ${ixia.port3} -streamId 1 -transmitMethod contPacket"
				
				-v "stream_percent_rate_set -portList ${ixia.port2} -streamId 1  -percentRate 80"
				-v "stream_percent_rate_set -portList ${ixia.port3} -streamId 1  -percentRate 80"
				
				-v "start_trans_getstats -txPortList ${ixia.port2},${ixia.port3} -rxPortList ${ixia.port2},${ixia.port3} -duration 90"
			</ssh>
		</step>
	</stage>
	<stage type="child-process" no="STP_Verification_9.7_2">
		<step no="9.7.2_noshut_agg29" delay="30">
			<desc>NO shutdown sr2124p agg1</desc>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "no interface agg29 shutdown"
			</console>
		</step>
		<step no="9.7.3_1_stp_dut1" delay="50">
			<desc>check initial status on dut1</desc>
			<log-file>9.7.3_1_show_stp.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut1.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut1.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
		</step>
		<step no="9.7.3_2_stp_dut2" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut2</desc>
			<log-file>9.7.3_2_show_stp.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut2.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut2.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
		</step>
		<step no="9.7.3_3_stp_dut3" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut3</desc>
			<log-file>9.7.3_3_show_stp.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut3.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut3.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg29" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg30" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.7.3_4_stp_dut4" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut4</desc>
			<log-file>9.7.3_4_show_stp.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut4.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut4.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
			<log-match>-p 1 -i "agg2" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg3" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.7.3_5_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.7.3_5_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 1"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
		<step no="9.7.3_6_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.7.3_6_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 2075"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
	</stage>
	<stage type="check-point"/>

	<stage no="STP_Verification_9.7_3">	
		<step no="9.7.4_check_frames">
			<desc>check frames result</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-9">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port2} -oneRxPort ${ixia.port3}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port2} ${ixia.port3} framesSent userDefinedStat2 result is not equal"</log-match>
		</step>
		<step no="9.7.5_test_traffic">
			<desc>send test frames</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="600" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port2} -streamId all -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port3} -streamId all -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId 1 -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port3} -streamId 1 -maintanceOp disable"
				
				-v "traffic_configure_eth2 -portListIn ${ixia.port1},${ixia.port4}
					-mac_dst 0000:0300:0002
					-mac_src ${ixia.port1.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 3 -transmitMethod stopStream -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port3} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port3} -streamId 3 -transmitMethod stopStream -numFrames 100"
				
				-v "start_trans_getstats -txPortList ${ixia.port2},${ixia.port3} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4} -duration 10"
				
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port2},${ixia.port3} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port1} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port2},${ixia.port3} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port2} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port2},${ixia.port3} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port3} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port2},${ixia.port3} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port4} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port1} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port2} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port3} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port4} is 200"</log-match>
		</step>
	</stage>

	<!--shutdown SR2148p agg2-->
	<stage type="child-process" no="STP_Verification_9.8_1">
		<step no="9.8.1_bg_traffic">
			<desc>start background traffic</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-9">
				-v "ah_ixia_connect -chassisIP ${pub.chassis1.ip} 
					-userName ${job.user}${job.sid} 
					-tclServerIP ${pri.tclserver.ip} 
					-portList ${sw1.port1.ixia_port},${sw1.port2.ixia_port},${sw1.port3.ixia_port},${sw1.port4.ixia_port}
					-phyList ${sw1.port1.phytype},${sw1.port2.phytype},${sw1.port3.phytype},${sw1.port4.phytype}"
				-v ""
				-v "traffic_configure_eth2 -portListIn ${ixia.port1}
					-mac_dst ffff:ffff:ffff
					-mac_src ${ixia.port1.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				-v "traffic_configure_eth2 -portListIn ${ixia.port4}
					-mac_dst ffff:ffff:ffff
					-mac_src ${ixia.port4.mac}
					-vlan disable
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				-v "after 60000"
				-v "stream_percent_rate_set -portList ${ixia.port1} -streamId 1  -percentRate 80"
				-v "stream_percent_rate_set -portList ${ixia.port4} -streamId 1  -percentRate 80"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port4} -rxPortList ${ixia.port1},${ixia.port4} -duration 90"
			</ssh>
		</step>
	</stage>
	<stage type="child-process" no="STP_Verification_9.8_2">
		<step no="9.8.2_shut_agg2" delay="90" timeout="120">
			<desc>shutdown sr2148p agg2</desc>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "interface agg2 shutdown"
			</console>
		</step>
		<step no="9.8.3_1_stp_dut1" delay="50">
			<desc>check status on dut1</desc>
			<log-file>9.8.3_1_show_stp.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut1.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut1.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
		</step>
		<step no="9.8.3_2_stp_dut2" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut2</desc>
			<log-file>9.8.3_2_show_stp.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut2.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut2.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
		</step>
		<step no="9.8.3_3_stp_dut3" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut3</desc>
			<log-file>9.8.3_3_show_stp.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut3.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut3.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg29" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg30" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.8.3_4_stp_dut4" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut4</desc>
			<log-file>9.8.3_4_show_stp.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut4.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut4.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
			<log-match>-p 1 -i "agg3" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.8.3_5_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.8.3_5_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 1"
			</console>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
		<step no="9.8.3_6_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.8.3_6_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 2097"
			</console>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
	</stage>	
	<stage type="check-point"/>

	<stage no="STP_Verification_9.8_3">
		<step no="9.8.4_check_frame">
			<desc>check frames result</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-9">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port4}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port4} framesSent userDefinedStat2 result is not equal"</log-match>
		</step>
		<step no="9.8.5_test_traffic">
			<desc>send test frames</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="600" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port4} -streamId all -maintanceOp disable"
				
				-v "traffic_configure_eth2 -portListIn ${ixia.port1}
					-mac_dst ${ixia.port4.mac}
					-mac_src ${ixia.port1.mac}
					-vlan disable
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				-v "traffic_configure_eth2 -portListIn ${ixia.port1}
					-mac_dst 0000:0400:0002
					-mac_src ${ixia.port1.mac}
					-vlan disable
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				-v "traffic_configure_eth2 -portListIn ${ixia.port4}
					-mac_dst ${ixia.port1.mac}
					-mac_src ${ixia.port4.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				-v "traffic_configure_eth2 -portListIn ${ixia.port2},${ixia.port3},${ixia.port4}
					-mac_dst 0000:0100:0002
					-mac_src ${ixia.port4.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 3 -transmitMethod stopStream -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port4} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port4} -streamId 3 -transmitMethod stopStream -numFrames 100"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port4} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4} -duration 10"
				
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port1} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port2} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port3} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port4} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port1} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port2} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port3} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port4} is 200"</log-match>
		</step>
	</stage>

	<!--no shutdown sr2148p agg2-->
	<stage type="child-process" no="STP_Verification_9.9_1">
		<step no="9.9.1_bg_traffic">
			<desc>start background traffic</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port4} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port4} -streamId 1 -maintanceOp enable"
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 1 -transmitMethod contPacket"
				-v "stream_transmit_method_set -portList ${ixia.port4} -streamId 1 -transmitMethod contPacket"
				
				-v "stream_percent_rate_set -portList ${ixia.port1} -streamId 1  -percentRate 80"
				-v "stream_percent_rate_set -portList ${ixia.port4} -streamId 1  -percentRate 80"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port4} -rxPortList ${ixia.port1},${ixia.port4} -duration 90"
			</ssh>
		</step>
	</stage>
	<stage type="child-process" no="STP_Verification_9.9_2">
		<step no="9.9.2_noshut_agg2" delay="30">
			<desc>NO shutdown sr2148p agg2</desc>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "no interface agg2 shutdown"
			</console>
		</step>
		<step no="9.9.3_1_stp_dut1" delay="50">
			<desc>check status on dut1</desc>
			<log-file>9.9.3_1_show_stp.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut1.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut1.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
		</step>
		<step no="9.9.3_2_stp_dut2" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut2</desc>
			<log-file>9.9.3_2_show_stp.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut2.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut2.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
		</step>
		<step no="9.9.3_3_stp_dut3" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut3</desc>
			<log-file>9.9.3_3_show_stp.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut3.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut3.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg29" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg30" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.9.3_4_stp_dut4" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut4</desc>
			<log-file>9.9.3_4_show_stp.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut4.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut4.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
			<log-match>-p 1 -i "agg2" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg3" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.9.3_5_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.9.3_5_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 1"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
		<step no="9.9.3_6_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.9.3_6_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 2030"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
	</stage>
	<stage type="check-point"/>

	<stage no="STP_Verification_9.9_3">
		<step no="9.9.4_check_frames">
			<desc>check frames result</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-9">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port4}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port4} framesSent userDefinedStat2 result is not equal"</log-match>
		</step>
		<step no="9.9.5_test_frames">
			<desc>send test frames</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="600" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port4} -streamId all -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port4} -streamId 1 -maintanceOp disable"
				
				-v "traffic_configure_eth2 -portListIn ${ixia.port1},${ixia.port4}
					-mac_dst 0000:0300:0002
					-mac_src ${ixia.port1.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 3 -transmitMethod stopStream -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port4} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port4} -streamId 3 -transmitMethod stopStream -numFrames 100"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port4} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4} -duration 10"
				
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port1} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port2} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port3} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port4} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port1} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port2} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port3} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port4} is 200"</log-match>
		</step>
	</stage>	
	<!--shutdown cisco g0/1-->
	<stage type="child-process" no="STP_Verification_9.10_1">
		<step no="9.10.1_bg_traffic">
			<desc>start background traffic</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-9">
				-v "ah_ixia_connect -chassisIP ${pub.chassis1.ip} 
					-userName ${job.user}${job.sid} 
					-tclServerIP ${pri.tclserver.ip} 
					-portList ${sw1.port1.ixia_port},${sw1.port2.ixia_port},${sw1.port3.ixia_port},${sw1.port4.ixia_port}
					-phyList ${sw1.port1.phytype},${sw1.port2.phytype},${sw1.port3.phytype},${sw1.port4.phytype}"
				-v ""
				
				-v "traffic_configure_eth2 -portListIn ${ixia.port1}
					-mac_dst ffff:ffff:ffff
					-mac_src ${ixia.port1.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				-v "traffic_configure_eth2 -portListIn ${ixia.port2}
					-mac_dst ffff:ffff:ffff
					-mac_src ${ixia.port2.mac}
					-vlan disable
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				
				-v "after 60000"
				-v "stream_percent_rate_set -portList ${ixia.port1} -streamId 1  -percentRate 80"
				-v "stream_percent_rate_set -portList ${ixia.port2} -streamId 1  -percentRate 80"
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port2} -rxPortList ${ixia.port1},${ixia.port2} -duration 90"
			</ssh>
		</step>
	</stage>
	<stage type="child-process" no="STP_Verification_9.10_2">
		<step no="9.10.2_shut_g0-1" delay="90" timeout="120">
			<desc>shutdown cisco g0/1</desc>
			<log-file>9.10.2_cli.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}" prompt=".*#">
				-v "config ter"
				-v "interface g0/1"
				-v "shutdown"
				-v "exit"
				-v "exit"
			</console>
		</step>
		<step no="9.10.3_1_stp_dut1" delay="50">
			<desc>check status on dut1</desc>
			<log-file>9.10.3_1_show_stp.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree info"
			</console>
			<log-match>-p 1 -i "${dut1.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut1.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
		</step>
		<step no="9.10.3_2_stp_dut2" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut2</desc>
			<log-file>9.10.3_2_show_stp.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut2.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut2.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
		</step>
		<step no="9.10.3_3_stp_dut3" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut3</desc>
			<log-file>9.10.3_3_show_stp.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut3.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut3.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg29" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg30" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.10.3_4_stp_dut4" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut4</desc>
			<log-file>9.10.3_4_show_stp.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut4.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut4.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
			<log-match>-p 1 -i "agg2" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg3" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.10.3_5_stp_cisco" type="loop-check" loop-max-times="10" loop-interval="3">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.10.3_5_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 1"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
		<step no="9.10.3_6_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.10.3_6_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 2127"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
	</stage>
	<stage type="check-point"/>

	<stage no="STP_Verification_9.10_3">
		<step no="9.10.4_check_frames">
			<desc>check frames result</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-9">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port2}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port2} framesSent userDefinedStat2 result is not equal"</log-match>
		</step>
		<step no="9.10.5_test_frames">
			<desc>send test frames</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="600" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId all -maintanceOp disable"
				
				-v "traffic_configure_eth2 -portListIn ${ixia.port1}
					-mac_dst ${ixia.port2.mac}
					-mac_src ${ixia.port1.mac}
					-vlan disable
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				-v "traffic_configure_eth2 -portListIn ${ixia.port1}
					-mac_dst 0000:0300:0002
					-mac_src ${ixia.port1.mac}
					-vlan disable
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				-v "traffic_configure_eth2 -portListIn ${ixia.port2}
					-mac_dst ${ixia.port1.mac}
					-mac_src ${ixia.port2.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				-v "traffic_configure_eth2 -portListIn ${ixia.port2},${ixia.port3},${ixia.port4}
					-mac_dst 0000:0300:0002
					-mac_src ${ixia.port2.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 3 -transmitMethod stopStream -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 3 -transmitMethod stopStream -numFrames 100"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port2} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4} -duration 10"
				
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port1} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port2} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port3} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port4} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port1} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port2} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port3} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port4} is 200"</log-match>
		</step>
	</stage>

	<!--no shutdown cisco g0/1-->
	<stage type="child-process" no="STP_Verification_9.11_1">
		<step no="9.11.1_bg_traffic">
			<desc>start background traffic</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId 1 -maintanceOp enable"
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 1 -transmitMethod contPacket"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 1 -transmitMethod contPacket"
				
				-v "stream_percent_rate_set -portList ${ixia.port1} -streamId 1  -percentRate 80"
				-v "stream_percent_rate_set -portList ${ixia.port2} -streamId 1  -percentRate 80"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port2} -rxPortList ${ixia.port1},${ixia.port2} -duration 90"
			</ssh>
		</step>
	</stage>
	<stage type="child-process" no="STP_Verification_9.11_2">
		<step no="9.11.2_noshut_g0-1" delay="30">
			<desc>NO shutdown cisco g0/1</desc>
			<log-file>9.11.2_cli.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}" prompt=".*#">
				-v "config ter"
				-v "interface g0/1"
				-v "no shutdown"
				-v "exit"
				-v "exit"
			</console>
		</step>
		<step no="9.11.3_1_stp_dut1" delay="50">
			<desc>check status on dut1</desc>
			<log-file>9.11.3_1_show_stp.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree info"
			</console>
			<log-match>-p 1 -i "${dut1.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut1.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
		</step>
		<step no="9.11.3_2_stp_dut2" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut2</desc>
			<log-file>9.11.3_2_show_stp.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut2.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut2.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
		</step>
		<step no="9.11.3_3_stp_dut3" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut3</desc>
			<log-file>9.11.3_3_show_stp.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut3.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut3.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg29" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg30" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.11.3_4_stp_dut4" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut4</desc>
			<log-file>9.11.3_4_show_stp.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut4.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut4.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
			<log-match>-p 1 -i "agg2" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg3" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.11.3_5_stp_cisco" type="loop-check" loop-max-times="10" loop-interval="3">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.11.3_5_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 1"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
		<step no="9.11.3_6_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.11.3_6_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 2086"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
		<step no="9.11.4_check_frmes" delay="60">
			<desc>check frames result</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-9">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port2}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port2} framesSent userDefinedStat2 result is not equal"</log-match>
		</step>
	</stage>
	<stage type="check-point"/>

	<stage no="STP_Verification_9.11_3">
		<step no="9.11.5_test_frames">
			<desc>send test frames</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="600" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId all -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId 1 -maintanceOp disable"
				
				-v "traffic_configure_eth2 -portListIn ${ixia.port3},${ixia.port4}
					-mac_dst 0000:0300:0002
					-mac_src ${ixia.port2.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 3 -transmitMethod stopStream -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 3 -transmitMethod stopStream -numFrames 100"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port2} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4} -duration 10"
				
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port1} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port2} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port3} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port4} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port1} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port2} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port3} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port4} is 200"</log-match>
		</step>
	</stage>
	
	
		<!-- shutdown cisco all interface -->
	<stage no="STP_Verification_9.12_1">
		<step no="9.12.1_create_bg_traffic">
			<desc>start background traffic</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-9">
				-v "ah_ixia_connect 
					-chassisIP ${pub.chassis1.ip} 
					-userName ${job.user}${job.sid} 
					-tclServerIP ${pri.tclserver.ip} 
					-portList ${sw1.port1.ixia_port},${sw1.port2.ixia_port},${sw1.port3.ixia_port},${sw1.port4.ixia_port} 
					-phyList ${sw1.port1.phytype},${sw1.port2.phytype},${sw1.port3.phytype},${sw1.port4.phytype}" 
				-v "" 
				-v "traffic_configure_eth2 
					-portListIn ${ixia.port1}
					-mac_dst ffff:ffff:ffff 
					-mac_src ${ixia.port1.mac} 
					-vlan enable 
					-vlan_id ${vlan.group2.start} 
					-vlan_repeatCount 1 
					-eth2_protocol ${stream1.etype} 
					-frame_length 64 
					-udf_offset ${stream1.UDFoffset} 
					-udf_value 0xBDBDBDBD	 
					-rate_pps 1024 
					-patternOffset2 ${stream1.patternOffset2} 
					-rxPattern 0xBDBDBDBD" 
				-v "" 
				-v "traffic_configure_eth2 
					-portListIn ${ixia.port4} 
					-mac_dst ffff:ffff:ffff 
					-mac_src ${ixia.port4.mac} 
					-vlan disable 
					-eth2_protocol ${stream1.etype} 
					-frame_length 64 
					-udf_offset ${stream1.UDFoffset} 
					-udf_value 0xBDBDBDBD	 
					-rate_pps 1024 
					-patternOffset2 ${stream1.patternOffset2} 
					-rxPattern 0xBDBDBDBD" 
				-v "" 
				
				-v "stream_percent_rate_set -portList ${ixia.port1} -streamId 1 -percentRate 80" 
				-v "stream_percent_rate_set -portList ${ixia.port4} -streamId 1 -percentRate 80"
			</ssh>
		</step>
	</stage>
	<stage type="child-process" no="STP_Verification_9.12_1.1">
		<step no="9.12.1_start_bg_traffic">
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-9">
			-v "after 60000" 
			-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port4} -rxPortList ${ixia.port1},${ixia.port4} -duration 90"
			</ssh>
		</step>
	</stage>
	<stage type="child-process" no="STP_Verification_9.12_2">
		<step no="9.12.2_1_shut_po1-2" delay="90" timeout="120">
			<desc>shutdown cisco port-channel 1-2 </desc>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}" prompt=".*#">
				-v "configure terminal" 
				-v "interface port-channel 1" 
				-v "shutdown" 
				-v "exit" 
				-v "interface port-channel 2" 
				-v "shutdown" 
				-v "exit" 
				-v "exit"
			</console>
			</step>
		<step no="9.12.2_2">
			<desc>change SR2148P priority as 4096</desc>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "spanning-tree priority 4096"
			</console>
		</step>
		<step no="9.12.3_1_stp_dut1" delay="50">
			<desc>check status on dut1</desc>
			<log-file>9.12.3_1_show_stp.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut1.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut1.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
		</step>
		<step no="9.12.3_2_stp_dut2" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut2</desc>
			<log-file>9.12.3_2_show_stp.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">-v "show spanning-tree information"</console>
			<log-match>-p 1 -i "${dut2.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut2.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
		</step>
		<step no="9.12.3_3_stp_dut3" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut3</desc>
			<log-file>9.12.3_3_show_stp.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">-v "show spanning-tree information"</console>
			<log-match>-p 1 -i "${dut3.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut3.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg30" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.12.3_4_stp_dut4" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut4</desc>
			<log-file>9.12.3_4_show_stp.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut4.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut4.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
			<log-match>-p 1 -i "agg3" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.12.3_5_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.12.3_5_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 1"
			</console>
		</step>
		<step no="9.12.3_6_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.12.3_6_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 2015"
			</console>
		</step>
		<step no="add_dut4">
			<desc>check initial stp status on dut4</desc>
			<log-file>add_show_stp.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show mac-address all | in 0000:0100:0001" 
				-v "show mac-address all | in 0000:0300:0001"
			</console>
		</step>
		<step no="add_dut1">
			<desc>check initial stp status on dut4</desc>
			<log-file>add_show_stp.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show mac-address all | in 0000:0100:0001" 
				-v "show mac-address all | in 0000:0300:0001"
			</console>
		</step>
	</stage>
	<stage type="check-point"/>

	<stage no="STP_Verification_9.12_3">
		<step no="9.12.4_check_frames">
			<desc>check frames result</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-9">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port4}"
			</ssh>
			<log-match>
				-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port4} framesSent userDefinedStat2 result is not equal"
			</log-match>
		</step>
		<step no="9.12.5_test_traffic" delay="30">
			<desc>send test frames</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="600" session-get="${job.user}-${job.sid}-9">
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port4} -rxPortList ${ixia.port1},${ixia.port4}"
				
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp disable" 
				-v "stream_maintance -onePort ${ixia.port4} -streamId all -maintanceOp disable" 
				-v "traffic_configure_eth2 
					-portListIn ${ixia.port1} 
					-mac_dst ${ixia.port4.mac} 
					-mac_src ${ixia.port1.mac} 
					-vlan disable 
					-eth2_protocol ${stream1.etype} 
					-frame_length 64 
					-udf_offset ${stream1.UDFoffset} 
					-udf_value 0xBDBDBDBD	 
					-rate_pps 1024 
					-patternOffset2 ${stream1.patternOffset2} 
					-rxPattern 0xBDBDBDBD" 
				-v "" 
				-v "traffic_configure_eth2 
					-portListIn ${ixia.port1} 
					-mac_dst 0000:0400:0002 
					-mac_src ${ixia.port1.mac} 
					-vlan disable 
					-eth2_protocol ${stream1.etype} 
					-frame_length 64 
					-udf_offset ${stream1.UDFoffset} 
					-udf_value 0xBDBDBDBD	 
					-rate_pps 1024 
					-patternOffset2 ${stream1.patternOffset2} 
					-rxPattern 0xBDBDBDBD" 
				-v "" 
				-v "traffic_configure_eth2 
					-portListIn ${ixia.port4} 
					-mac_dst ${ixia.port1.mac} 
					-mac_src ${ixia.port4.mac} 
					-vlan enable 
					-vlan_id ${vlan.group2.start} 
					-vlan_repeatCount 1 
					-eth2_protocol ${stream1.etype} 
					-frame_length 64 
					-udf_offset ${stream1.UDFoffset} 
					-udf_value 0xBDBDBDBD	 
					-rate_pps 1024 
					-patternOffset2 ${stream1.patternOffset2} 
					-rxPattern 0xBDBDBDBD" 
				-v "" 
				-v "traffic_configure_eth2 -portListIn ${ixia.port2},${ixia.port3},${ixia.port4} 
					-mac_dst 0000:0100:0002 
					-mac_src ${ixia.port4.mac} 
					-vlan enable 
					-vlan_id ${vlan.group2.start} 
					-vlan_repeatCount 1 
					-eth2_protocol ${stream1.etype} 
					-frame_length 64 
					-udf_offset ${stream1.UDFoffset} 
					-udf_value 0xBDBDBDBD	 
					-rate_pps 1024 
					-patternOffset2 ${stream1.patternOffset2} 
					-rxPattern 0xBDBDBDBD" 
				-v "" 
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 2 -transmitMethod advance -numFrames 100" 
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 3 -transmitMethod stopStream -numFrames 100" 
				-v "stream_transmit_method_set -portList ${ixia.port4} -streamId 2 -transmitMethod advance -numFrames 100" 
				-v "stream_transmit_method_set -portList ${ixia.port4} -streamId 3 -transmitMethod stopStream -numFrames 100" 
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port4} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4} -duration 10" 
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent -rxPortList ${ixia.port1} -rxStParaList userDefinedStat2" 
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent -rxPortList ${ixia.port2} -rxStParaList userDefinedStat2" 
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent -rxPortList ${ixia.port3} -rxStParaList userDefinedStat2" 
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent -rxPortList ${ixia.port4} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port1} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port2} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port3} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port4} is 200"</log-match>
		</step>
	</stage>
	<!--  no shutdown cisco all interface  -->
	<stage type="child-process" no="STP_Verification_9.13_1">
		<step no="9.13.1_bg_traffic">
			<desc>start background traffic</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-9">
			-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp disable" 
			-v "stream_maintance -onePort ${ixia.port4} -streamId all -maintanceOp disable" 
			-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp enable" 
			-v "stream_maintance -onePort ${ixia.port4} -streamId 1 -maintanceOp enable" 
			
			-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 1 -transmitMethod contPacket" 
			-v "stream_transmit_method_set -portList ${ixia.port4} -streamId 1 -transmitMethod contPacket" 
			
			-v "stream_percent_rate_set -portList ${ixia.port1} -streamId 1 -percentRate 80" 
			-v "stream_percent_rate_set -portList ${ixia.port4} -streamId 1 -percentRate 80" 
			
			-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port4} -rxPortList ${ixia.port1},${ixia.port4} -duration 120"
			</ssh>
		</step>
	</stage>
	<stage type="child-process" no="STP_Verification_9.13_2">
		<step no="9.13.2_1_noshut_po1-2" delay="30">
			<desc>no shutdown cisco all port</desc>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}" prompt=".*#">
				-v "configure terminal" 
				-v "interface port-channel 1" 
				-v "no shutdown" 
				-v "exit" 
				-v "interface port-channel 2" 
				-v "no shutdown" 
				-v "exit" 
				-v "exit"
			</console>
		</step>
		<step no="9.13.2_2_dut4_priority">
			<desc>change SR2148P priority as default one</desc>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "no spanning-tree priority"
			</console>
		</step>
		<step no="9.13.3_1_stp_dut1" delay="50">
			<desc>check status on dut1</desc>
			<log-file>9.13.3_1_show_stp.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">-v "show spanning-tree information"</console>
			<log-match>-p 1 -i "${dut1.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut1.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
		</step>
		<step no="9.13.3_2_stp_dut2" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut2</desc>
			<log-file>9.13.3_2_show_stp.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">-v "show spanning-tree information"</console>
			<log-match>-p 1 -i "${dut2.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut2.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
		</step>
		<step no="9.13.3_3_stp_dut3" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut3</desc>
			<log-file>9.13.3_3_show_stp.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut3.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut3.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg29" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg30" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "1000"</log-match>
		</step>
		
		<step no="9.13.3_4_stp_dut4" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut4</desc>
			<log-file>9.13.3_4_show_stp.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">-v "show spanning-tree information"</console>
			<log-match>-p 1 -i "${dut4.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut4.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
			<log-match>-p 1 -i "agg2" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg3" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.13.3_5_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.13.3_5_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">-v "show spanning-tree vlan 1"</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
		<step no="9.13.3_6_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.13.3_6_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
			-v "show spanning-tree vlan 2014"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
	</stage>
	<stage type="check-point"/>
	<stage no="STP_Verification_9.13_3">
		<step no="9.13.4_check_frames">
			<desc>check frames result</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-9">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port4}"
			</ssh>
			<log-match>
				-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port4} framesSent userDefinedStat2 result is not equal"
			</log-match>
		</step>
		<step no="9.13.5_test_traffic" delay="30">
			<desc>send test frames</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="600" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp enable" 
				-v "stream_maintance -onePort ${ixia.port4} -streamId all -maintanceOp enable" 
				-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp disable" 
				-v "stream_maintance -onePort ${ixia.port4} -streamId 1 -maintanceOp disable" 
				
				-v "traffic_configure_eth2 
					-portListIn ${ixia.port2},${ixia.port3} 
					-mac_dst 0000:0300:0002 
					-mac_src ${ixia.port2.mac} 
					-vlan enable 
					-vlan_id ${vlan.group2.start} 
					-vlan_repeatCount 1 
					-eth2_protocol ${stream1.etype} 
					-frame_length 64 
					-udf_offset ${stream1.UDFoffset} 
					-udf_value 0xBDBDBDBD	 
					-rate_pps 1024 
					-patternOffset2 ${stream1.patternOffset2} 
					-rxPattern 0xBDBDBDBD" 
				-v "" 
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 2 -transmitMethod advance -numFrames 100" 
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 3 -transmitMethod stopStream -numFrames 100" 
				-v "stream_transmit_method_set -portList ${ixia.port4} -streamId 2 -transmitMethod advance -numFrames 100" 
				-v "stream_transmit_method_set -portList ${ixia.port4} -streamId 3 -transmitMethod stopStream -numFrames 100" 
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port4} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4} -duration 10" -v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent -rxPortList ${ixia.port1} -rxStParaList userDefinedStat2" -v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent -rxPortList ${ixia.port2} -rxStParaList userDefinedStat2" -v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent -rxPortList ${ixia.port3} -rxStParaList userDefinedStat2" -v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent -rxPortList ${ixia.port4} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port1} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port2} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port3} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port4} is 200"</log-match>
		</step>
	</stage>

	<!--change cisco bridge priority, set SR2124p as root bridge-->
	<stage type="child-process" no="STP_Verification_9.14_1">
		<step no="9.14.1_bg_traffic">
			<desc>start background traffic</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port4} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port4} -streamId 1 -maintanceOp enable"
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 1 -transmitMethod contPacket"
				-v "stream_transmit_method_set -portList ${ixia.port4} -streamId 1 -transmitMethod contPacket"
				
				-v "stream_percent_rate_set -portList ${ixia.port1} -streamId 1  -percentRate 80"
				-v "stream_percent_rate_set -portList ${ixia.port4} -streamId 1  -percentRate 80"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port4} -rxPortList ${ixia.port1},${ixia.port4} -duration 90"
			</ssh>
		</step>
	</stage>
	<stage type="child-process" no="STP_Verification_9.14_2">
		<step no="9.14.2_1_cg_cisco_priority" delay="30">
			<desc>change cisco stp priorty, change root bridge</desc>
			<log-file>step9.14.2_1.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}" prompt=".*#">
				-v "configure terminal"
				-v "spanning-tree vlan 1 priority 61440"
				-v "exit"
			</console>
		</step>
		<step no="9.14.2_2_cg_dut3_priority">
			<desc>change SR2124P work as root bridge</desc>
			<log-file>step9.14.2_2.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "spanning-tree priority 0"
			</console>
		</step>
		<step no="9.14.2_3_cg_dut4_priority">
			<desc>change SR2124P work as root bridge</desc>
			<log-file>step9.14.3_3.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "interface agg3 spanning-tree path-cost 3"
			</console>
		</step>
		<step no="9.14.3_1_stp_dut1" delay="50">
			<desc>check status on dut1</desc>
			<log-file>9.14.3_1_show_stp.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut1.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut1.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
		</step>
		<step no="9.14.3_2_stp_dut2" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut2</desc>
			<log-file>9.14.3_2_show_stp.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut2.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut2.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
		</step>
		<step no="9.14.3_3_stp_dut3" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut3</desc>
			<log-file>9.14.3_3_show_stp.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut3.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut3.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg29" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg30" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.14.3_4_stp_dut4" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut4</desc>
			<log-file>9.14.3_4_show_stp.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut4.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut4.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
			<log-match>-p 1 -i "agg2" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg3" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "3"</log-match>
		</step>
		<step no="9.14.3_5_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.14.3_5_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 1"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Altn" -p 3 -i "BLK"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Root" -p 3 -i "FWD"</log-match>
		</step>
		<step no="9.14.3_6_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.14.3_6_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 2048"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Back" -p 3 -i "BLK"</log-match>
		</step>
	</stage>
	<stage type="check-point"/>

	<stage no="STP_Verification_9.14_2">
		<step no="9.14.4_check_frames">
			<desc>check frames result</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-9">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port4}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port4} framesSent userDefinedStat2 result is not equal"</log-match>
		</step>
		<step no="9.14.5_test_traffic">
			<desc>send test frames</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="600" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port4} -streamId all -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port4} -streamId 1 -maintanceOp disable"
				
				-v "traffic_configure_eth2 -portListIn ${ixia.port2},${ixia.port3}
					-mac_dst 0000:0300:0002
					-mac_src ${ixia.port2.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 3 -transmitMethod stopStream -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port4} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port4} -streamId 3 -transmitMethod stopStream -numFrames 100"

				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port4} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4} -duration 10"
				
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port1} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port2} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port3} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port4} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port1} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port2} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port3} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port4} is 200"</log-match>
		</step>
	</stage>

	<!--change cisco bridge priority as 0, root bridge-->
	<stage type="child-process" no="STP_Verification_9.15_1">
		<step no="9.15.1_bg_traffic">
			<desc>start background traffic</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port4} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port4} -streamId 1 -maintanceOp enable"
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 1 -transmitMethod contPacket"
				-v "stream_transmit_method_set -portList ${ixia.port4} -streamId 1 -transmitMethod contPacket"
				
				-v "stream_percent_rate_set -portList ${ixia.port1} -streamId 1  -percentRate 80"
				-v "stream_percent_rate_set -portList ${ixia.port4} -streamId 1  -percentRate 80"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port4} -rxPortList ${ixia.port1},${ixia.port4} -duration 120"
			</ssh>
		</step>
	</stage>
	<stage type="child-process" no="STP_Verification_9.15_2">
		<step no="9.15.2_1_cg_cisco_priority" delay="30">
			<desc>change cisco root priority as 0</desc>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}" prompt=".*#">
				-v "configure terminal"
				-v "spanning-tree vlan 1 priority 0"
				-v "exit"
			</console>
		</step>
		<step no="9.15.2_2_cg_dut3_priority">
			<desc>no dut3 stp priority</desc>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "no spanning-tree priority"
			</console>
		</step>
		<step no="9.15.2_3_cg_dut4_priority">
			<desc>no dut3 stp priority</desc>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "no interface agg3 spanning-tree path-cost"
			</console>
		</step>
		<step no="9.15.3_1_stp_dut1" delay="50" type="loop-check" loop-max-times="10" loop-interval="3">
			<desc>check status on dut1</desc>
			<log-file>9.15.3_1_show_stp.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut1.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut1.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
		</step>
		<step no="9.15.3_2_stp_dut2" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut2</desc>
			<log-file>9.15.3_2_show_stp.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut2.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut2.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
		</step>
		<step no="9.15.3_3_stp_dut3" type="loop-check" loop-max-times="10" loop-interval="3">
			<desc>check initial stp status on dut3</desc>
			<log-file>9.15.3_3_show_stp.log</log-file>
			<setvar name="9.15.3_3_looptime">
				echo "(${loop_check.idx}-1)*${loop.interval}"|bc
			</setvar>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut3.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut3.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg29" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg30" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.15.3_4_stp_dut4" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut4</desc>
			<log-file>9.15.3_4_show_stp.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut4.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut4.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
			<log-match>-p 1 -i "agg2" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg3" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.15.3_5_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.15.3_5_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 1"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
		<step no="9.15.3_6_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.15.3_6_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 2055"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
	</stage>
	<stage type="check-point"/>

	<stage no="STP_Verification_9.15_3">
		<step no="9.15.4_check_frames">
			<desc>check frames result</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-9">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port4}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port4} framesSent userDefinedStat2 result is not equal"</log-match>
		</step>
		<step no="9.15.5_test_traffic" delay="30">
			<desc>send test frames</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="600" session-get="${job.user}-${job.sid}-9">
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port4} -rxPortList ${ixia.port1},${ixia.port4}"
				
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port4} -streamId all -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port4} -streamId 1 -maintanceOp disable"
				
				-v "traffic_configure_eth2 -portListIn ${ixia.port2},${ixia.port3}
					-mac_dst 0000:0300:0002
					-mac_src ${ixia.port2.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 3 -transmitMethod stopStream -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port4} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port4} -streamId 3 -transmitMethod stopStream -numFrames 100"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port4} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4} -duration 10"
				
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port1} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port2} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port3} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port4} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port4} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port1} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port2} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port3} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port4} is 200"</log-match>
		</step>
	</stage>
	
		<!--change SR2148p agg2 path-cost as 128-->
	<stage type="child-process" no="STP_Verification_9.16_1">
		<step no="9.16.1_bg_traffic">
			<desc>start background traffic</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-9">
				-v "ah_ixia_connect -chassisIP ${pub.chassis1.ip} 
					-userName ${job.user}${job.sid} 
					-tclServerIP ${pri.tclserver.ip} 
					-portList ${sw1.port1.ixia_port},${sw1.port2.ixia_port},${sw1.port3.ixia_port},${sw1.port4.ixia_port}
					-phyList ${sw1.port1.phytype},${sw1.port2.phytype},${sw1.port3.phytype},${sw1.port4.phytype}"
				-v ""
				
				-v "traffic_configure_eth2 -portListIn ${ixia.port1}
					-mac_dst ffff:ffff:ffff
					-mac_src ${ixia.port1.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				-v "traffic_configure_eth2 -portListIn ${ixia.port2}
					-mac_dst ffff:ffff:ffff
					-mac_src ${ixia.port2.mac}
					-vlan disable
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				
				-v "after 60000"
				-v "stream_percent_rate_set -portList ${ixia.port1} -streamId 1  -percentRate 80"
				-v "stream_percent_rate_set -portList ${ixia.port2} -streamId 1  -percentRate 80"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port2} -rxPortList ${ixia.port1},${ixia.port2} -duration 90"
			</ssh>
		</step>
	</stage>
	<stage type="child-process" no="STP_Verification_9.16_2">
		<step no="9.16.2_cg_dut4_cost" delay="90" timeout="120">
			<desc>change sr2148p </desc>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "interface agg2 spanning-tree path-cost 128"
			</console>
		</step>
		<step no="9.16.3_1_stp_dut1" delay="50">
			<desc>check status on dut1</desc>
			<log-file>9.16.3_1_show_stp.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut1.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut1.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
		</step>
		<step no="9.16.3_2_stp_dut2" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut2</desc>
			<log-file>9.16.3_2_show_stp.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut2.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut2.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
		</step>
		<step no="9.16.3_3_stp_dut3" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut3</desc>
			<log-file>9.16.3_3_show_stp.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut3.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut3.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg29" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg30" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.16.3_4_stp_dut4" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut4</desc>
			<log-file>9.16.3_4_show_stp.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut4.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut4.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
			<log-match>-p 1 -i "agg2" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "128"</log-match>
			<log-match>-p 1 -i "agg3" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.16.3_5_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.16.3_5_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 1"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
		<step no="9.16.3_6_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.16.3_6_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 2072"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
	</stage>
	<stage type="check-point"/>
	<stage no="STP_Verification_9.16_3">
		<step no="9.16.4_check_frames">
			<desc>check frames result</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-9">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port2}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port2} framesSent userDefinedStat2 result is not equal"</log-match>
		</step>
		<step no="9.16.5_test_traffic">
			<desc>send test frames</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="600" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId all -maintanceOp disable"
				
				-v "traffic_configure_eth2 -portListIn ${ixia.port1}
					-mac_dst ${ixia.port2.mac}
					-mac_src ${ixia.port1.mac}
					-vlan disable
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				-v "traffic_configure_eth2 -portListIn ${ixia.port1}
					-mac_dst 0000:0300:0002
					-mac_src ${ixia.port1.mac}
					-vlan disable
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				-v "traffic_configure_eth2 -portListIn ${ixia.port2}
					-mac_dst ${ixia.port1.mac}
					-mac_src ${ixia.port2.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				-v "traffic_configure_eth2 -portListIn ${ixia.port2},${ixia.port3},${ixia.port4}
					-mac_dst 0000:0300:0002
					-mac_src ${ixia.port2.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 3 -transmitMethod stopStream -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 3 -transmitMethod stopStream -numFrames 100"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port2} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4} -duration 10"
				
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port1} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port2} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port3} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port4} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port1} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port2} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port3} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port4} is 200"</log-match>
		</step>
	</stage>

	<!--change sr2124p agg2 path-const as 64-->
	<stage type="child-process" no="STP_Verification_9.17_1">
		<step no="9.17.1_bg_traffic">
			<desc>start background traffic</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId 1 -maintanceOp enable"
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 1 -transmitMethod contPacket"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 1 -transmitMethod contPacket"
				
				-v "stream_percent_rate_set -portList ${ixia.port1} -streamId 1  -percentRate 80"
				-v "stream_percent_rate_set -portList ${ixia.port2} -streamId 1  -percentRate 80"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port2} -rxPortList ${ixia.port1},${ixia.port2} -duration 90"
			</ssh>
		</step>
	</stage>
	<stage type="child-process" no="STP_Verification_9.17_2">
		<step no="9.17.2_cg_dut3_cost" delay="30">
			<desc>change sr2124p</desc>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "interface agg29 spanning-tree path-cost 64"
			</console>
		</step>
		<step no="9.17.3_1_stp_dut1" delay="50">
			<desc>check status on dut1</desc>
			<log-file>9.17.3_1_show_stp.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut1.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut1.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
		</step>
		<step no="9.17.3_2_stp_dut2" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut2</desc>
			<log-file>9.17.3_2_show_stp.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut2.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut2.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
		</step>
		<step no="9.17.3_3_stp_dut3" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut3</desc>
			<log-file>9.17.3_3_show_stp.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut3.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut3.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg29" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "64"</log-match>
			<log-match>-p 1 -i "agg30" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.17.3_4_stp_dut4" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut4</desc>
			<log-file>9.17.3_4_show_stp.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut4.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut4.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
			<log-match>-p 1 -i "agg2" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "128"</log-match>
			<log-match>-p 1 -i "agg3" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.17.3_5_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.17.3_5_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 1"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
		<step no="9.17.3_6_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.17.3_6_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 2083"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
	</stage>
	<stage type="check-point"/>

	<stage no="STP_Verification_9.17_3">
		<step no="9.17.4_check_frames">
			<desc>check frames result</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-9">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port2}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port2} framesSent userDefinedStat2 result is not equal"</log-match>
		</step>
		<step no="9.17.5_test_traffic" >
			<desc>send test frames</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="600" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId all -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId 1 -maintanceOp disable"
				
				-v "traffic_configure_eth2 -portListIn ${ixia.port2},${ixia.port4}
					-mac_dst 0000:0300:0002
					-mac_src ${ixia.port2.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 3 -transmitMethod stopStream -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 3 -transmitMethod stopStream -numFrames 100"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port2} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4} -duration 10"
				
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port1} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port2} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port3} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port4} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port1} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port2} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port3} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port4} is 200"</log-match>
		</step>
	</stage>

	<!--change SR2024 agg1 path-cost as 20000-->
	<stage type="child-process" no="STP_Verification_9.18_1">
		<step no="9.18.1_bg_traffic">
			<desc>start background traffic</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId 1 -maintanceOp enable"
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 1 -transmitMethod contPacket"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 1 -transmitMethod contPacket"
				
				-v "stream_percent_rate_set -portList ${ixia.port1} -streamId 1  -percentRate 80"
				-v "stream_percent_rate_set -portList ${ixia.port2} -streamId 1  -percentRate 80"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port2} -rxPortList ${ixia.port1},${ixia.port2} -duration 90"
			</ssh>
		</step>
	</stage>
	<stage type="child-process" no="STP_Verification_9.18_2">
		<step no="9.18.2_cg_dut1_cost" delay="30">
			<desc>change sr2024 agg1 path-cost</desc>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "interface agg1 spanning-tree path-cost 30000"
			</console>
		</step>
		<step no="9.18.3_1_stp_dut1" delay="50">
			<desc>check status on dut1</desc>
			<log-file>9.18.3_1_show_stp.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut1.port1}" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut1.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "30000"</log-match>
		</step>
		<step no="9.18.3_2_stp_dut2" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut2</desc>
			<log-file>9.18.3_2_show_stp.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut2.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut2.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
		</step>
		<step no="9.18.3_3_stp_dut3" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut3</desc>
			<log-file>9.18.3_3_show_stp.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut3.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut3.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg29" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "64"</log-match>
			<log-match>-p 1 -i "agg30" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.18.3_4_stp_dut4" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut4</desc>
			<log-file>9.18.3_4_show_stp.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut4.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut4.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
			<log-match>-p 1 -i "agg2" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "128"</log-match>
			<log-match>-p 1 -i "agg3" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.18.3_5_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.18.3_5_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 1"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
		<step no="9.18.3_6_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.18.3_6_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 2099"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
	</stage>
	<stage type="check-point"/>
	<stage no="STP_Verification_9.18_3">
		<step no="9.18.4_check_frames">
			<desc>check frames result</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-9">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port2}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port2} framesSent userDefinedStat2 result is not equal"</log-match>
		</step>
		<step no="9.18.5_test_traffic">
			<desc>send test frames</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="600" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId all -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId 1 -maintanceOp disable"
				
				-v "traffic_configure_eth2 -portListIn ${ixia.port2},${ixia.port4}
					-mac_dst 0000:0300:0002
					-mac_src ${ixia.port2.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 3 -transmitMethod stopStream -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 3 -transmitMethod stopStream -numFrames 100"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port2} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4} -duration 10"
				
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port1} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port2} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port3} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port4} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port1} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port2} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port3} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port4} is 200"</log-match>
		</step>
	</stage>

	<!--Change SR2024P agg1 path-cost as 20000-->
	<stage type="child-process" no="STP_Verification_9.19_1">
		<step no="9.19.1_bg_traffic">
			<desc>start background traffic</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId 1 -maintanceOp enable"
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 1 -transmitMethod contPacket"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 1 -transmitMethod contPacket"
				
				-v "stream_percent_rate_set -portList ${ixia.port1} -streamId 1  -percentRate 80"
				-v "stream_percent_rate_set -portList ${ixia.port2} -streamId 1  -percentRate 80"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port2} -rxPortList ${ixia.port1},${ixia.port2} -duration 90"
			</ssh>
		</step>
	</stage>
	<stage type="child-process" no="STP_Verification_9.19_2">
		<step no="9.19.2_cg_dut2_cost" delay="30">
			<desc>change sr2024p</desc>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "interface agg1 spanning-tree path-cost 20000"
			</console>
		</step>
		<step no="9.19.3_1_stp_dut1" delay="50">
			<desc>check status on dut1</desc>
			<log-file>9.19.3_1_show_stp.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut1.port1}" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut1.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "30000"</log-match>
		</step>
		<step no="9.19.3_2_stp_dut2" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut2</desc>
			<log-file>9.19.3_2_show_stp.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut2.port1}" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut2.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
		</step>
		<step no="9.19.3_3_stp_dut3" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut3</desc>
			<log-file>9.19.3_3_show_stp.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut3.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut3.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg29" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "64"</log-match>
			<log-match>-p 1 -i "agg30" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.19.3_4_stp_dut4" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut4</desc>
			<log-file>9.19.3_4_show_stp.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut4.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut4.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
			<log-match>-p 1 -i "agg2" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "128"</log-match>
			<log-match>-p 1 -i "agg3" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.19.3_5_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.19.3_5_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 1"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
		<step no="9.19.3_6_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.19.3_6_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 2015"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
	</stage>
	<stage type="check-point"/>

	<stage no="STP_Verification_9.19_3">
		<step no="9.19.4_check_frames">
			<desc>check frames result</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-9">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port2}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port2} framesSent userDefinedStat2 result is not equal"</log-match>
		</step>
		<step no="9.19.5_test_traffic">
			<desc>send test frames</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="600" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId all -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId 1 -maintanceOp disable"
				
				-v "traffic_configure_eth2 -portListIn ${ixia.port2},${ixia.port4}
					-mac_dst 0000:0300:0002
					-mac_src ${ixia.port2.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 3 -transmitMethod stopStream -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 3 -transmitMethod stopStream -numFrames 100"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port2} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4} -duration 10"
				
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port1} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port2} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port3} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port4} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port1} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port2} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port3} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port4} is 200"</log-match>
		</step>
	</stage>

	<!--Set the STP status as initial one, while traffic is transferring-->
	<stage type="child-process" no="STP_Verification_9.20_1">
		<step no="9.20.1_bg_traffic">
			<desc>start background traffic</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId all -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId 1 -maintanceOp enable"
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 1 -transmitMethod contPacket"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 1 -transmitMethod contPacket"
				
				-v "stream_percent_rate_set -portList ${ixia.port1} -streamId 1  -percentRate 80"
				-v "stream_percent_rate_set -portList ${ixia.port2} -streamId 1  -percentRate 80"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port2} -rxPortList ${ixia.port1},${ixia.port2} -duration 90"
			</ssh>
		</step>
	</stage>
	<stage type="child-process" no="STP_Verification_9.20_2">
		<step no="9.20.2_1_no_dut1_cost" delay="30">
			<desc>change sr2024</desc>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "no interface agg1 spanning-tree path-cost"
			</console>
		</step>
		<step no="9.20.2_2_no_dut2_cost">
			<desc>change sr2024p</desc>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "no interface agg1 spanning-tree path-cost"
			</console>
		</step>
		<step no="9.20.2_3_no_dut3_cost">
			<desc>change sr2124p</desc>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "no interface agg29 spanning-tree path-cost"
			</console>
		</step>
		<step no="9.20.2_4_no_dut4_cost">
			<desc>change sr2148p</desc>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "no interface agg2 spanning-tree  path-cost"
			</console>
		</step>
		<step no="9.20.3_1_stp_dut1" delay="50">
			<desc>check status on dut1</desc>
			<log-file>9.20.3_1_show_stp.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut1.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut1.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
		</step>
		<step no="9.20.3_2_stp_dut2" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut2</desc>
			<log-file>9.20.3_2_show_stp.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut2.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut2.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
		</step>
		<step no="9.20.3_3_stp_dut3" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut3</desc>
			<log-file>9.20.3_3_show_stp.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut3.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut3.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg29" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg30" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.20.3_4_stp_dut4" type="loop-check" loop-max-times="10" loop-interval="2">
			<desc>check initial stp status on dut4</desc>
			<log-file>9.20.3_4_show_stp.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree information"
			</console>
			<log-match>-p 1 -i "${dut4.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut4.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
			<log-match>-p 1 -i "agg2" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg3" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
		<step no="9.20.3_5_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.20.3_5_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 1"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
		<step no="9.20.3_6_stp_cisco">
			<desc>check initial stp status on cisco</desc>
			<log-file>9.20.3_6_show_stp.log</log-file>
			<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree vlan 2039"
			</console>
			<log-match>-p 1 -i "Po1" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
			<log-match>-p 1 -i "Po2" -p 2 -i "Desg" -p 3 -i "FWD"</log-match>
		</step>
	</stage>
	<stage type="check-point"/>
	<stage no="STP_Verification_9.20_3">
		<step no="9.20.4_check_frames">
			<desc>check frames result</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="200" session-get="${job.user}-${job.sid}-9">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port2}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port2} framesSent userDefinedStat2 result is not equal"</log-match>
		</step>
		<step no="9.20.5_test_traffic">
			<desc>send test frames</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="600" session-close="${job.user}-${job.sid}-9">
				-v "stream_maintance -onePort ${ixia.port1} -streamId all -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId all -maintanceOp enable"
				-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port2} -streamId 1 -maintanceOp disable"
				
				-v "traffic_configure_eth2 -portListIn ${ixia.port2},${ixia.port4}
					-mac_dst 0000:0300:0002
					-mac_src ${ixia.port2.mac}
					-vlan enable
					-vlan_id ${vlan.group2.start}
					-vlan_repeatCount 1
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 3 -transmitMethod stopStream -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 2 -transmitMethod advance -numFrames 100"
				-v "stream_transmit_method_set -portList ${ixia.port2} -streamId 3 -transmitMethod stopStream -numFrames 100"
				
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port2} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4} -duration 10"
				
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port1} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port2} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port3} -rxStParaList userDefinedStat2"
				-v "check_sum_equal_tx_with_rx -txPortList ${ixia.port1},${ixia.port2} -txStParaList framesSent,framesSent
					-rxPortList ${ixia.port4} -rxStParaList userDefinedStat2"
			</ssh>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port1} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port2} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port3} is 200"</log-match>
			<log-match>-e "cmp2 userDefinedStat2 under ${ixia.port4} is 200"</log-match>
		</step>
	</stage>
	
	<!--edge port verification-->
	<stage no="10_edge-port">
		<step no="10.1.1_edge-port">
			<desc>set dut1 sfp interface as edge-port</desc>
			<log-file>10.1.1_dut1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "interface ${dut1.port1} spanning-tree edge-port"
				-v "interface ${dut1.port1} spanning-tree bpdu-protection bpdu-guard "
			</console>
		</step>
		<step no="10.1.2_check-int" type="loop-check" loop-max-times="10" loop-interval="3">
			<desc>check result</desc>
			<log-file>10.1.2_dut1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show interface ${dut1.port1}"
			</console>
			<log-match>-e "Admin state: enable; Link status: down(ah_stpd);"</log-match>
		</step>
		<step no="10.2_recover">
			<desc>no dut sfp interface edge-port</desc>
			<log-file>10.2_dut1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "no interface ${dut1.port1} spanning-tree edge-port"
				-v "interface ${dut1.port1} shut"
				-v "no interface ${dut1.port1} shut"
			</console>
		</step>
		<step no="10.2_showstatus" type="loop-check" loop-max-times="10" loop-interval="3">
			<desc>no dut sfp interface edge-port</desc>
			<log-file>10.2_dut1_showstatus.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show interface ${dut1.port1}"
			</console>
			<log-match>-e "Admin state: enable; Link status: up;"</log-match>
		</step>
		<step no="10.3.1">
			<desc>change dut1 agg1 work as edge-port</desc>
			<log-file>10.3.1_dut1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "interface agg1 spanning-tree edge-port"
				-v "interface agg1 spanning-tree bpdu-protection bpdu-guard "
			</console>
		</step>
		<step no="10.3.2" type="loop-check" loop-max-times="10" loop-interval="3">
			<desc>change dut1 agg1 work as edge-port</desc>
			<log-file>10.3.2_dut1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show interface agg1"
			</console>
			<log-match>-e "Admin state: enable; Link status: down(ah_stpd);"</log-match>
		</step>
		<step no="10.4.1">
			<desc>no dut sfp interface edge-port</desc>
			<log-file>10.4.1_dut1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "no interface agg1 spanning-tree edge-port"
				-v "interface agg1 shut"
				-v "no interface agg1 shut"
			</console>
		</step>
		<step no="10.4.2" type="loop-check" loop-max-times="10" loop-interval="3">
			<desc>no dut sfp interface edge-port</desc>
			<log-file>10.4.2_dut1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show interface agg1"
			</console>
			<log-match>-e "Admin state: enable; Link status: up;"</log-match>
		</step>
		<step no="10.5">
			<desc>no dut sfp interface edge-port</desc>
			<log-file>10.5_dut1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "no interface ${dut1.port1} spanning-tree bpdu-protection "
				-v "no interface agg1 spanning-tree bpdu-protection"
				-v "show running-config"
			</console>
		</step>
	</stage>
	
	<stage no="11.0">
		<step no="11.0_bg_traffic">
			<desc>start background traffic</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-new="${job.user}-${job.sid}-11">
				-v "tclsh8.5"
				-v "package req ixia"
				-v "ah_ixia_connect 
					-chassisIP ${pub.chassis1.ip} 
					-userName ${job.user}${job.sid} 
					-tclServerIP ${pri.tclserver.ip} 
					-portList ${sw1.port1.ixia_port},${sw1.port2.ixia_port},${sw1.port3.ixia_port},${sw1.port4.ixia_port} 
					-phyList ${sw1.port1.phytype},${sw1.port2.phytype},${sw1.port3.phytype},${sw1.port4.phytype}" 
				-v "" 
				-v "traffic_configure_eth2 
					-portListIn ${ixia.port1}
					-mac_dst ffff:ffff:ffff 
					-mac_src ${ixia.port1.mac} 
					-vlan enable 
					-vlan_id ${vlan.group2.start} 
					-vlan_repeatCount 1 
					-eth2_protocol ${stream1.etype} 
					-frame_length 64 
					-udf_offset ${stream1.UDFoffset} 
					-udf_value 0xBDBDBDBD	 
					-rate_pps 1024 
					-patternOffset2 ${stream1.patternOffset2} 
					-rxPattern 0xBDBDBDBD" 
				-v "" 
				-v "traffic_configure_eth2 
					-portListIn ${ixia.port4} 
					-mac_dst ffff:ffff:ffff 
					-mac_src ${ixia.port4.mac} 
					-vlan disable 
					-eth2_protocol ${stream1.etype} 
					-frame_length 64 
					-udf_offset ${stream1.UDFoffset} 
					-udf_value 0xBDBDBDBD	 
					-rate_pps 1024 
					-patternOffset2 ${stream1.patternOffset2} 
					-rxPattern 0xBDBDBDBD" 
				-v "" 
				
				-v "stream_percent_rate_set -portList ${ixia.port1} -streamId 1 -percentRate 80" 
				-v "stream_percent_rate_set -portList ${ixia.port4} -streamId 1 -percentRate 80"
			</ssh>
		</step>
	</stage>
	
	<stage type="child-process" no="11.0.1_start_traffic">
		<step no="11.0.1_start_traffic">
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="100" session-get="${job.user}-${job.sid}-11">
				-v "start_trans_getstats -txPortList ${ixia.port1},${ixia.port4} -rxPortList ${ixia.port1},${ixia.port4} -duration 90"
			</ssh>
		</step>
	</stage>
	
	<stage type="child-process" no="11.1_access_vlan1">
		<step no="11.1.1_access_dut1">
			<desc>change dut1 agg1 as access</desc>
			<log-file>11.1.1_access_dut1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "interface agg1 switchport mode access"
				-v "interface ${dut1.port1} switchport mode access"
			</console>
		</step>
		<step no="11.1.2_access_dut2">
			<desc>change dut1 agg1 as access</desc>
			<log-file>11.1.2_access_dut2.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "interface agg1 switchport mode access"
				-v "interface ${dut2.port1} switchport mode access"
			</console>
		</step>
		<step no="11.1.3_access_dut3">
			<desc>change dut3 agg1 as access</desc>
			<log-file>11.1.3_access_dut3.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "interface agg1 switchport mode access"
				-v "interface agg29 switchport mode access"
				-v "interface agg30 switchport mode access"
				-v "interface ${dut3.port1} switchport mode access"
			</console>
		</step>
		<step no="11.1.4_access_dut4">
			<desc>change dut4 agg1 as access</desc>
			<log-file>11.1.4_access_dut4.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "interface agg1 switchport mode access"
				-v "interface agg2 switchport mode access"
				-v "interface agg3 switchport mode access"
				-v "interface ${dut4.port1} switchport mode access"
			</console>
		</step>
		
		<step no="11.1.5_stp_dut1" delay="90">
			<desc>show dut1 stp status</desc>
			<log-file>11.1.5_stp_dut1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree in"
			</console>
			<log-match>-p 1 -i "${dut1.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut1.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
		</step>
		<step no="11.1.6_stp_dut2">
			<desc>show dut2 stp status</desc>
			<log-file>11.1.6_stp_dut2.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree in"
			</console>
			<log-match>-p 1 -i "${dut2.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut2.port1}" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
		</step>
		<step no="11.1.7_stp_dut3" type="loop-check" loop-max-times="10" loop-interval="3">
			<desc>show dut3 stp status</desc>
			<setvar name="11.1.7_looptime">
				echo "(${loop_check.idx}-1)*${loop.interval}"|bc
			</setvar>
			<log-file>11.1.7_stp_dut3.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree in"
			</console>
			<log-match>-p 1 -i "${dut3.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut3.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg29" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg30" -p 2 -i "ALTE" -p 3 -i "BLOC" -p 4 -i "1000"</log-match>
		</step>
		<step no="11.1.8_stp_dut4">
			<desc>show dut4 stp status</desc>
			<log-file>11.1.8_stp_dut4.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "show spanning-tree in"
			</console>
			<log-match>-p 1 -i "${dut4.ixia}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "${dut4.port1}" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "20000"</log-match>
			<log-match>-p 1 -i "agg1" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "5000"</log-match>
			<log-match>-p 1 -i "agg2" -p 2 -i "ROOT" -p 3 -i "FORW" -p 4 -i "10000"</log-match>
			<log-match>-p 1 -i "agg3" -p 2 -i "DESG" -p 3 -i "FORW" -p 4 -i "1000"</log-match>
		</step>
	</stage>

	<stage type="check-point"/>
	
	<stage no="11.2">
		<step no="11.2.1_send_traffic">
			<desc>send untaged traffic</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-11">
				-v "tclsh8.5"
				-v "package req ixia"
				-v "ah_ixia_connect -chassisIP ${pub.chassis1.ip} 
					-userName ${job.user}${job.sid} 
					-tclServerIP ${pri.tclserver.ip} 
					-portList ${sw1.port1.ixia_port},${sw1.port2.ixia_port},${sw1.port3.ixia_port},${sw1.port4.ixia_port}
					-phyList ${sw1.port1.phytype},${sw1.port2.phytype},${sw1.port3.phytype},${sw1.port4.phytype}"
				-v ""
				-v "traffic_configure_eth2 -portListIn ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4}
					-mac_dst ffff:ffff:ffff
					-mac_src ${ixia.port1.mac}
					-vlan disable
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				
				-v "stream_percent_rate_set -portList ${ixia.port1} -streamId 1  -percentRate 30"
				
				-v "after 60000"
				-v "start_trans_getstats -txPortList ${ixia.port1} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4} -duration 15"
				
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port2}"
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port3}"
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port4}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port2} framesSent userDefinedStat2 result is equal"</log-match>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port3} framesSent userDefinedStat2 result is equal"</log-match>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port4} framesSent userDefinedStat2 result is equal"</log-match>
		</step>
		
		<step no="11.3.1_send_traffic">
			<desc>send taged traffic</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-11">
				-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp disable"
				
				-v "traffic_configure_eth2 -portListIn ${ixia.port1}
					-mac_dst ffff:ffff:ffff
					-mac_src ${ixia.port1.mac}
					-vlan enable
					-vlan_id ${vlan.group1.start}
					-vlan_repeatCount 128
					-eth2_protocol ${stream1.etype}
					-frame_length 64
					-udf_offset ${stream1.UDFoffset}
					-udf_value 0xBDBDBDBD	
					-rate_pps 1024
					-patternOffset2 ${stream1.patternOffset2}
					-rxPattern 0xBDBDBDBD"
				-v ""
				
				-v "stream_percent_rate_set -portList ${ixia.port1} -streamId 2  -percentRate 30"
				-v "start_trans_getstats -txPortList ${ixia.port1} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4} -duration 15"
				
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port2}"
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port3}"
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port4}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port2} framesSent userDefinedStat2 result is blocked"</log-match>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port3} framesSent userDefinedStat2 result is blocked"</log-match>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port4} framesSent userDefinedStat2 result is blocked"</log-match>
		</step>
	</stage>
	
	<stage type="child-process" no="11.4">
		<step no="11.4.0_send_traffic">
			<desc>send taged traffic</desc>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-11">
				-v "stream_percent_rate_set -portList ${ixia.port1} -streamId 2  -percentRate 80"
				-v "start_trans_getstats -txPortList ${ixia.port1} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4} -duration 90"
			</ssh>
		</step>
	</stage>
	<stage type="child-process" no="11.4_trunk_vlan1">
		<step no="11.4.1_trunk_dut1">
			<desc>change dut1 agg1 as access</desc>
			<log-file>11.4.1_trunk_dut1.log</log-file>
			<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}">
				-v "interface agg1 switchport mode trunk"
				-v "interface ${dut1.port1} switchport mode trunk"
			</console>
		</step>
		<step no="11.4.2_trunk_dut2">
			<desc>change dut1 agg1 as access</desc>
			<log-file>11.4.2_trunk_dut2.log</log-file>
			<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}">
				-v "interface agg1 switchport mode trunk"
				-v "interface ${dut2.port1} switchport mode trunk"
			</console>
		</step>
		<step no="11.4.3_access_dut3">
			<desc>change dut3 agg1 as access</desc>
			<log-file>11.4.3_trunk_dut3.log</log-file>
			<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}">
				-v "interface agg1 switchport mode trunk"
				-v "interface agg29 switchport mode trunk"
				-v "interface agg30 switchport mode trunk"
				-v "interface ${dut3.port1} switchport mode trunk"
			</console>
		</step>
		<step no="11.4.4_trunk_dut4">
			<desc>change dut4 agg1 as access</desc>
			<log-file>11.4.4_trunk_dut4.log</log-file>
			<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}">
				-v "interface agg1 switchport mode trunk"
				-v "interface agg2 switchport mode trunk"
				-v "interface agg3 switchport mode trunk"
				-v "interface ${dut4.port1} switchport mode trunk"
			</console>
		</step>
	</stage>
	
	<stage type="check-point"/>
	
	<stage no="11.5">
		<step no="11.5.1_send_traffic" delay="60">
			<desc>send untaged traffic</desc>
			<log-file>11.5.1_sf.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-11">
				-v "stream_maintance -onePort ${ixia.port1} -streamId 2 -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp enable"

				-v "stream_percent_rate_set -portList ${ixia.port1} -streamId 1  -percentRate 30"
				-v "start_trans_getstats -txPortList ${ixia.port1} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4} -duration 15"
				
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port2}"
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port3}"
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port4}"
			</ssh>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port2} framesSent userDefinedStat2 result is equal"</log-match>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port3} framesSent userDefinedStat2 result is equal"</log-match>
			<log-match>-e "checkEqualTxWithRX ${ixia.port1} ${ixia.port4} framesSent userDefinedStat2 result is equal"</log-match>
		</step>
		<step no="11.5.2_send_traffic">
			<desc>send taged traffic</desc>
			<log-file>11.5.2_sf.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-11">
				-v "stream_maintance -onePort ${ixia.port1} -streamId 1 -maintanceOp disable"
				-v "stream_maintance -onePort ${ixia.port1} -streamId 2 -maintanceOp enable"

				-v "stream_transmit_method_set -portList ${ixia.port1} -streamId 2 -transmitMethod advance -numFrames 2048"
				-v "start_trans_getstats -txPortList ${ixia.port1} -rxPortList ${ixia.port1},${ixia.port2},${ixia.port3},${ixia.port4} -duration 15"
				
			</ssh>
		</step>
		<step no="11.5.3_check_frames">
			<desc>check frames with ixia1 and ixia2</desc>
			<log-file>11.5.3_cf.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-11">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port2}"
			</ssh>
			<log-match>-e "cmp2 is 512"</log-match>
		</step>
		<step no="11.5.4_check_frames">
			<desc>check frames with ixia1 and ixia3</desc>
			<log-file>11.5.4_cf.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-get="${job.user}-${job.sid}-11">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port3}"
			</ssh>
			<log-match>-e "cmp2 is 512"</log-match>
		</step>
		<step no="11.5.5_check_frames">
			<desc>check frames with ixia1 and ixia3</desc>
			<log-file>11.5.5_cf.log</log-file>
			<ssh target="${pri.tclclient.ip}" prompt="%.*|root@.*#" timeout="900" session-close="${job.user}-${job.sid}-11">
				-v "check_equal_tx_with_rx -oneTxPort ${ixia.port1} -oneRxPort ${ixia.port4}"
			</ssh>
			<log-match>-e "cmp2 is 1024"</log-match>
		</step>
	</stage>

	<failed-process>
		<stage no="failed-1">
			<step no="f1">
				<desc>show case name</desc>
				<script>
					echo "${case.name}"
				</script>
			</step>
		</stage>
		<include prefix="f3" file="${case.dir}/subs/wp_default_failed_process.xml"/>
	</failed-process>
	
	<post-process>
		<stage>
			<step no="post-1">
			<script>
				echo "${case.name}"
				echo "9.15.3_3_looptime"
				echo "${9.15.3_3_looptime}"
				echo "11.1.7_looptime"
				echo "${11.1.7_looptime}"
			</script>
			</step>
			<step no="cisco_post-process">
				<desc> cli recover for cisco</desc>
				<console cons-name="hzswtb8_sys-Cisco" cons-host="${mpc.mif.ip}" prompt=".*#">
					-v "conf t"
					-v "interface g0/1"
					-v "shut"
					-v "no shut"
					-v "exit"
					-v "interface g0/2"
					-v "shut"
					-v "no shut"
					-v "exit"
					-v "interface po1"
					-v "shut"
					-v "no shut"
					-v "exit"
					-v "interface po2"
					-v "shut"
					-v "no shut"
					-v "exit"
					-v "exit"					
				</console>
			</step>
			<step no="dut1_post-process">
				<desc>post-process for dut1</desc>
				<log-file>show_version_dut1.log</log-file>
				<console cons-name="${dut1.consname}" cons-host="${mpc.mif.ip}" timeout="200">
					-v "show version detail"
				</console>
			</step>
			<step no="dut2_post-process">
				<desc>post-process for dut2</desc>
				<log-file>show_version_dut2.log</log-file>
				<console cons-name="${dut2.consname}" cons-host="${mpc.mif.ip}" timeout="200">
					-v "show version detail"
				</console>
			</step>
			<step no="dut3_post-process">
				<desc>post-process for dut3</desc>
				<log-file>show_version_dut3.log</log-file>
				<console cons-name="${dut3.consname}" cons-host="${mpc.mif.ip}" timeout="200">
					-v "show version detail"
				</console>
			</step>
			<step no="dut4_post-process">
				<desc>post-process for dut4</desc>
				<log-file>show_version_dut4.log</log-file>
				<console cons-name="${dut4.consname}" cons-host="${mpc.mif.ip}" timeout="200">
					-v "show version detail"
				</console>
			</step>
		</stage>
	</post-process>
</testcase>