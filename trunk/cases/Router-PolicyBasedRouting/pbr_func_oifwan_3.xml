<?xml version="1.0" encoding="UTF-8"?>
<testcase>
    <brief>Forwarding and Routing traffic based on policy, oif is eth2 interface Platform  Dependence BR100,BR200,BR200-WP,BRAP330,BRAP350,BRAP121,BRAP141</brief>
    <priority>Middle</priority>
    <automated>no</automated>
    <description>
        
		Pre-Condition:

			Set interface eth2 mode wan

		Test Procedure:

			1.	Set a match-map 
			routing match-map mb user-profile 2 to any
			2.	Set a route-map, the oif for all traffic is eth2 interface
			routing route-map eth2 via eth2
			3.	 Bind one match-map to routing policy
			routing policy eth2 id 5 match-map mb route-map eth2
			4.	Laptop connect to the match-map
			5.	Laptop send traffic to vpn network, check result1
			6.	Laptop send traffic to internet, check result2
			7.	Eth2 down
			8.	Laptop send traffic to vpn network, check result3
			9.	Laptop send traffic to internet, check result3
			10.	Eth2 up
			11.	Laptop send traffic to vpn network, check result1
			12.	Laptop send traffic to internet, check result2
    </description>
    <numofap>1</numofap>
    <numofsta>1</numofsta>
    <tbtype>winlin</tbtype>
    <property name="" value=""/>
    <stage>
                <step no="1">
            <desc>
            
				Set interface eth2 mode wan
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="2">
            <desc>
            1.	Set a match-map 
				routing match-map mb user-profile 2 to any
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="3">
            <desc>
            2.	Set a route-map, the oif for all traffic is eth2 interface
				routing route-map eth2 via eth2
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="4">
            <desc>
            3.	 Bind one match-map to routing policy
				routing policy eth2 id 5 match-map mb route-map eth2
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="5">
            <desc>
            4.	Laptop connect to the match-map
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="6">
            <desc>
            5.	Laptop send traffic to vpn network, check result1
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="7">
            <desc>
            6.	Laptop send traffic to internet, check result2
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="8">
            <desc>
            7.	Eth2 down
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="9">
            <desc>
            8.	Laptop send traffic to vpn network, check result3
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="10">
            <desc>
            9.	Laptop send traffic to internet, check result3
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="11">
            <desc>
            10.	Eth2 up
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="12">
            <desc>
            11.	Laptop send traffic to vpn network, check result1
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="13">
            <desc>
            12.	Laptop send traffic to internet, check result2
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>

    </stage>
    <failed-process>
        <step no="1..n">
            .. process
	</step>
    </failed-process>
</testcase>
