<?xml version="1.0" encoding="UTF-8"?>
<testcase>
    <brief>One route-map have 4 priority ,failover and failback in the 4 priority Platform  Dependence BR100,BR200,BR200-WP,BRAP330,BRAP350,BRAP121,BRAP141</brief>
    <priority>Middle</priority>
    <automated>no</automated>
    <description>
        
		Pre-Condition:

			1.	Set interface eth0 mode wan
			2.	Set interface usbnet0 mode wan
			3.	Have vpn tunnel-policy on every wan interface
			4.	have established a tunnel on BR eth0 and CVG

		Test Procedure:

			1.	Create user-profile default-profile 
			2.	Set  match-map 
			routing match-map mb user-profile default-profile to any
			3.	Set route-map
			routing route-map ra via encrypted
			routing route-map ra via eth0
			routing route-map ra via usbnet0
			4.	Create a routing policy ,and bind the match-map  and route-map  
			routing policy rc id 10 match-map mb route-map ra 
			5.	Laptop1 connect to BR default-profile
			6.	Laptop1 connect to any network, result1
			7.	The only one tunnel down 
			8.	Laptop1 connect to any network, result2
			9.	Eth0 down
			10.	Laptop1 connect to any network, result3
			11.	Usbent0 down
			12.	Laptop1 connect to any network, result4
			13.	Eth0 up
			14.	Laptop1 connect to any network, result2
			15.	Tunnel up 
			16.	Laptop1 connect to any network, result1
    </description>
    <numofap>1</numofap>
    <numofsta>1</numofsta>
    <tbtype>winlin</tbtype>
    <property name="" value=""/>
    <stage>
                <step no="1">
            <desc>
            1.	Set interface eth0 mode wan
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="2">
            <desc>
            2.	Set interface usbnet0 mode wan
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="3">
            <desc>
            3.	Have vpn tunnel-policy on every wan interface
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="4">
            <desc>
            4.	have established a tunnel on BR eth0 and CVG
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="5">
            <desc>
            1.	Create user-profile default-profile 
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="6">
            <desc>
            2.	Set  match-map 
				routing match-map mb user-profile default-profile to any
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="7">
            <desc>
            3.	Set route-map
				routing route-map ra via encrypted
				routing route-map ra via eth0
				routing route-map ra via usbnet0
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="8">
            <desc>
            4.	Create a routing policy ,and bind the match-map  and route-map  
				routing policy rc id 10 match-map mb route-map ra 
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="9">
            <desc>
            5.	Laptop1 connect to BR default-profile
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="10">
            <desc>
            6.	Laptop1 connect to any network, result1
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="11">
            <desc>
            7.	The only one tunnel down 
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="12">
            <desc>
            8.	Laptop1 connect to any network, result2
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="13">
            <desc>
            9.	Eth0 down
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="14">
            <desc>
            10.	Laptop1 connect to any network, result3
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="15">
            <desc>
            11.	Usbent0 down
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="16">
            <desc>
            12.	Laptop1 connect to any network, result4
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="17">
            <desc>
            13.	Eth0 up
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="18">
            <desc>
            14.	Laptop1 connect to any network, result2
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="19">
            <desc>
            15.	Tunnel up 
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>
        <step no="20">
            <desc>
            16.	Laptop1 connect to any network, result1
            </desc>
            <log-file></log-file>
            <telnet target="ap1"></telnet>
            <ssh target="sta1"></ssh>
            <setvar name=""></setvar>
            <script></script>
            <log-match></log-match>
        </step>

    </stage>
    <failed-process>
        <step no="1..n">
            .. process
	</step>
    </failed-process>
</testcase>
