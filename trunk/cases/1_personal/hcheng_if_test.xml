<testcase>
	<brief>test bpc init and post process</brief>
	<priority>low</priority>
	<automated>yes</automated>
	<description>
		***
	</description>
	<numofap>1</numofap>
	<numofsta>0</numofsta>
	<tbtype>winlin</tbtype>
	
	<pre-process />
    
	<stage>
		<step no="1">
			<log-file>show_log_buff.log</log-file>
			<script>
				>${log.dir}/${log.file}
				echo "014-07-24 10:07:41 debug   kernel: scan:Tx Self-CTS (next foreign channel 48, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:07:40 debug   kernel: scan:Tx Self-CTS (next foreign channel 44, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:07:40 debug   kernel: scan:Tx Self-CTS (next foreign channel 40, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:07:40 debug   kernel: scan:Tx Self-CTS (next foreign channel 36, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:07:40 debug   kernel: scan:Tx Self-CTS (next foreign channel 64, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:07:39 debug   kernel: scan:Tx Self-CTS (next foreign channel 60, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:07:39 debug   kernel: scan:Tx Self-CTS (next foreign channel 56, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:07:39 debug   kernel: scan:Tx Self-CTS (next foreign channel 52, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:06:40 debug   kernel: scan:Tx Self-CTS (next foreign channel 140, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:06:44 debug   kernel: scan:Tx Self-CTS (next foreign channel 136, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:06:44 debug   kernel: scan:Tx Self-CTS (next foreign channel 132, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:06:43 debug   kernel: scan:Tx Self-CTS (next foreign channel 116, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:06:43 debug   kernel: scan:Tx Self-CTS (next foreign channel 112, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:06:43 debug   kernel: scan:Tx Self-CTS (next foreign channel 108, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:06:43 debug   kernel: scan:Tx Self-CTS (next foreign channel 104, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:06:42 debug   kernel: scan:Tx Self-CTS (next foreign channel 100, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:06:42 debug   kernel: scan:Tx Self-CTS (next foreign channel 165, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:06:42 debug   kernel: scan:Tx Self-CTS (next foreign channel 161, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:06:41 debug   kernel: scan:Tx Self-CTS (next foreign channel 157, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:06:41 debug   kernel: scan:Tx Self-CTS (next foreign channel 153, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:06:41 debug   kernel: scan:Tx Self-CTS (next foreign channel 149, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:06:41 debug   kernel: scan:Tx Self-CTS (next foreign channel 48, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:06:40 debug   kernel: scan:Tx Self-CTS (next foreign channel 44, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:06:40 debug   kernel: scan:Tx Self-CTS (next foreign channel 40, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:06:40 debug   kernel: scan:Tx Self-CTS (next foreign channel 36, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:06:40 debug   kernel: scan:Tx Self-CTS (next foreign channel 64, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:06:39 debug   kernel: scan:Tx Self-CTS (next foreign channel 60, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:06:39 debug   kernel: scan:Tx Self-CTS (next foreign channel 56, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:06:39 debug   kernel: scan:Tx Self-CTS (next foreign channel 52, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:05:44 debug   kernel: scan:Tx Self-CTS (next foreign channel 140, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:05:44 debug   kernel: scan:Tx Self-CTS (next foreign channel 136, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:05:44 debug   kernel: scan:Tx Self-CTS (next foreign channel 132, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:05:43 debug   kernel: scan:Tx Self-CTS (next foreign channel 116, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:05:43 debug   kernel: scan:Tx Self-CTS (next foreign channel 112, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:05:43 debug   kernel: scan:Tx Self-CTS (next foreign channel 108, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:05:43 debug   kernel: scan:Tx Self-CTS (next foreign channel 104, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:05:42 debug   kernel: scan:Tx Self-CTS (next foreign channel 100, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:05:42 debug   kernel: scan:Tx Self-CTS (next foreign channel 165, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:05:42 debug   kernel: scan:Tx Self-CTS (next foreign channel 161, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:05:41 debug   kernel: scan:Tx Self-CTS (next foreign channel 157, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:05:41 debug   kernel: scan:Tx Self-CTS (next foreign channel 153, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:05:41 debug   kernel: scan:Tx Self-CTS (next foreign channel 149, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:05:41 debug   kernel: scan:Tx Self-CTS (next foreign channel 48, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:05:40 debug   kernel: scan:Tx Self-CTS (next foreign channel 44, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:05:40 debug   kernel: scan:Tx Self-CTS (next foreign channel 40, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:05:40 debug   kernel: scan:Tx Self-CTS (next foreign channel 36, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:05:40 debug   kernel: scan:Tx Self-CTS (next foreign channel 64, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:05:39 debug   kernel: scan:Tx Self-CTS (next foreign channel 60, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:05:39 debug   kernel: scan:Tx Self-CTS (next foreign channel 56, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:05:39 debug   kernel: scan:Tx Self-CTS (next foreign channel 52, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:04:46 debug   kernel: scan:Tx Self-CTS (next foreign channel 140, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:04:46 debug   kernel: scan:Tx Self-CTS (next foreign channel 136, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:04:47 debug   kernel: scan:Tx Self-CTS (next foreign channel 36, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:04:49 debug   kernel: scan:Tx Self-CTS (next foreign channel 140, dur:28000)" >> ${log.dir}/${log.file}
				echo "2014-07-24 10:04:43 debug   kernel: scan:Tx Self-CTS (next foreign channel 112, dur:28000)" >> ${log.dir}/${log.file}
			</script>
		</step>
		<step no="2">
            <setvar name="log.max_interval">
				perl ${bin.dir}/get_log_interval.pl \
				--file "${log.dir}/show_log_buff.log" \
				--pattern 'kernel: scan:Tx Self-CTS \(next foreign channel 36' \
				--pattern 'kernel: scan:Tx Self-CTS \(next foreign channel 140' \
				--mode "max"
			</setvar>
        </step>
		<step no="3">
			<script>
				if [ ${log.max_interval} -gt 30 ] &amp;&amp; [ ${log.max_interval} -lt 120 ];then
					echo "Maximum interval is OK"
					exit 0
				else
					echo "Maximum interval is not OK"
					exit 1
				fi
			</script>
			<failed>next</failed>
        </step>
		<step no="4">
            <setvar name="log.min_interval">
				perl ${bin.dir}/get_log_interval.pl \
				--file "${log.dir}/show_log_buff.log" \
				--pattern 'kernel: scan:Tx Self-CTS \(next foreign channel 36' \
				--mode "min"
			</setvar>
        </step>
		<step no="5">
			<script>
				if [ ${log.min_interval} -gt 30 ] &amp;&amp; [ ${log.min_interval} -lt 120 ];then
					echo "Minimal interval is OK"
					exit 0
				else
					echo "Minimal interval is not OK"
					exit 1
				fi
			</script>
			<failed>next</failed>
        </step>
		<step no="6">
            <setvar name="log.avg_interval">
				perl ${bin.dir}/get_log_interval.pl \
				--file "${log.dir}/show_log_buff.log" \
				--pattern 'kernel: scan:Tx Self-CTS (next foreign channel 36' \
				--pattern 'kernel: scan:Tx Self-CTS (next foreign channel 140' \
				--mode "average" --literal
			</setvar>
        </step>
		<step no="7">
			<script>
				if [ ${log.avg_interval} -gt 30 ] &amp;&amp; [ ${log.avg_interval} -lt 120 ];then
					echo "Average interval is OK"
					exit 0
				else
					echo "Average interval is not OK"
					exit 1
				fi
			</script>
			<failed>next</failed>
        </step>
		<step no="8">
            <setvar name="log.latest_interval">
				perl ${bin.dir}/get_log_interval.pl \
				--file "${log.dir}/show_log_buff.log" \
				--pattern 'kernel: scan:Tx Self-CTS (next foreign channel 36' \
				--mode "latest" --literal
			</setvar>
        </step>
		<step no="9">
			<script>
				if [ ${log.latest_interval} -gt 30 ] &amp;&amp; [ ${log.latest_interval} -lt 120 ];then
					echo "Latest interval is OK"
					exit 0
				else
					echo "Latest interval is not OK"
					exit 1
				fi
			</script>
			<failed>next</failed>
        </step>
		<step no="10">
            <setvar name="log.earliest_interval">
				perl ${bin.dir}/get_log_interval.pl \
				--file "${log.dir}/show_log_buff.log" \
				--pattern 'kernel: scan:Tx Self-CTS \(next foreign channel 36' \
				--pattern 'kernel: scan:Tx Self-CTS \(next foreign channel 140' \
				--mode "earliest"
			</setvar>
        </step>
		<step no="11">
			<script>
				if [ ${log.earliest_interval} -gt 30 ] &amp;&amp; [ ${log.earliest_interval} -lt 120 ];then
					echo "Earliest interval is OK"
					exit 0
				else
					echo "Earliest interval is not OK"
					exit 1
				fi
			</script>
			<failed>next</failed>
        </step>
	</stage>

<!--    <stage>
        <step no="1">
            <if>"${var1}" == "abc"</if>
            <if>"${var2}" == "efg"</if>
            <desc>check the relationship of multi if in one step</desc>
            <script>
                echo "Two if is AND"
				echo "${ap.platform}"
            </script>
        </step>
        <step no="2">
            <if>"${var1}" == "abc"</if>
            <desc>check the relationship of multi if in one step</desc>
            <script>
                echo "if A"
            </script>
        </step>
        <step no="3">
            <if>"${var2}" == "efg"</if>
            <desc>check the relationship of multi if in one step</desc>
            <script>
                echo "if B"
            </script>
        </step>
        
        <step no="3">
            <if>"${var2}" == "efg" &amp;&amp; "${var1}" == "abc"</if>
            <desc>check the relationship of multi if in one step</desc>
            <script>
                echo "if A and B"
            </script>
        </step>
    </stage>
	-->
	<post-process />
</testcase>